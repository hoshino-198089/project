(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();class B{static loadFile(t){return new Promise(async e=>{const n=await(await fetch(t)).text();e(n)})}static loadImage(t){return new Promise(e=>{const i=new Image;i.addEventListener("load",()=>{e(i)},!1),i.src=t})}static createWebGLContext(t){const e=t.getContext("webgl",{stencil:!0});if(e==null)throw new Error("webgl not supported");return e}static createShaderObject(t,e,i){const n=t.createShader(i);if(t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))return n;throw new Error(t.getShaderInfoLog(n))}static createProgramObject(t,e,i){const n=t.createProgram();if(t.attachShader(n,e),t.attachShader(n,i),t.linkProgram(n),t.deleteShader(e),t.deleteShader(i),t.getProgramParameter(n,t.LINK_STATUS))return t.useProgram(n),n;throw new Error(t.getProgramInfoLog(n))}static createVBO(t,e){const i=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),i}static createIBO(t,e){const i=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Int16Array(e),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),i}static enableBuffer(t,e,i,n,s){for(let o=0;o<e.length;++o)t.bindBuffer(t.ARRAY_BUFFER,e[o]),t.enableVertexAttribArray(i[o]),t.vertexAttribPointer(i[o],n[o],t.FLOAT,!1,0,0);s!=null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s)}static createTexture(t,e){const i=t.createTexture();return t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_2D,null),i}static createCubeTexture(t,e,i){const n=t.createTexture();return t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_CUBE_MAP,n),i.forEach((s,o)=>{t.texImage2D(s,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e[o])}),t.generateMipmap(t.TEXTURE_CUBE_MAP),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_CUBE_MAP,null),n}static createCubeTextureFromFile(t,e,i){return new Promise(async n=>{const s=e.map(l=>new Promise(u=>{const c=new Image;c.addEventListener("load",()=>{u(c)},!1),c.src=l})),o=await Promise.all(s),a=B.createCubeTexture(t,o,i);n(a)})}static createFramebuffer(t,e,i){const n=t.createFramebuffer(),s=t.createRenderbuffer(),o=t.createTexture();return t.bindFramebuffer(t.FRAMEBUFFER,n),t.bindRenderbuffer(t.RENDERBUFFER,s),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,s),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),{framebuffer:n,depthRenderbuffer:s,texture:o}}static resizeFramebuffer(t,e,i,n,s){n!=null&&(t.bindRenderbuffer(t.RENDERBUFFER,n),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e,i)),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null)}static deleteFramebuffer(t,e,i,n){t.deleteFramebuffer(e),e=null,i!=null&&(t.deleteRenderbuffer(i),i=null),t.deleteTexture(n),n=null}}class qt{static create(t=0,e=0){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}static length(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}static normalize(t){const e=qt.create(),i=qt.length(t);if(i>0){const n=1/i;e[0]=t[0]*n,e[1]=t[1]*n}return e}static dot(t,e){return t[0]*e[0]+t[1]*e[1]}static cross(t,e){return t[0]*e[1]-t[1]*e[0]}}class W{static create(t=0,e=0,i=0){const n=new Float32Array(3);return n[0]=t,n[1]=e,n[2]=i,n}static length(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}static normalize(t){const e=W.create(),i=W.length(t);if(i>0){const n=1/i;e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n}return e}static dot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}static cross(t,e){return W.create(t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0])}static faceNormal(t,e,i){const n=W.create(e[0]-t[0],e[1]-t[1],e[2]-t[2]),s=W.create(i[0]-t[0],i[1]-t[1],i[2]-t[2]),o=W.create(n[1]*s[2]-n[2]*s[1],n[2]*s[0]-n[0]*s[2],n[0]*s[1]-n[1]*s[0]);return W.normalize(o)}}class L{static create(){return new Float32Array(16)}static identity(t){const e=t??L.create();return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}static multiply(t,e,i){const n=i??L.create(),s=t[0],o=t[1],a=t[2],l=t[3],u=t[4],c=t[5],h=t[6],d=t[7],f=t[8],v=t[9],p=t[10],_=t[11],m=t[12],g=t[13],w=t[14],x=t[15],b=e[0],P=e[1],y=e[2],C=e[3],E=e[4],k=e[5],V=e[6],M=e[7],S=e[8],D=e[9],O=e[10],T=e[11],z=e[12],tt=e[13],Nt=e[14],Ot=e[15];return n[0]=b*s+P*u+y*f+C*m,n[1]=b*o+P*c+y*v+C*g,n[2]=b*a+P*h+y*p+C*w,n[3]=b*l+P*d+y*_+C*x,n[4]=E*s+k*u+V*f+M*m,n[5]=E*o+k*c+V*v+M*g,n[6]=E*a+k*h+V*p+M*w,n[7]=E*l+k*d+V*_+M*x,n[8]=S*s+D*u+O*f+T*m,n[9]=S*o+D*c+O*v+T*g,n[10]=S*a+D*h+O*p+T*w,n[11]=S*l+D*d+O*_+T*x,n[12]=z*s+tt*u+Nt*f+Ot*m,n[13]=z*o+tt*c+Nt*v+Ot*g,n[14]=z*a+tt*h+Nt*p+Ot*w,n[15]=z*l+tt*d+Nt*_+Ot*x,n}static scale(t,e,i){const n=i??L.create();return n[0]=t[0]*e[0],n[1]=t[1]*e[0],n[2]=t[2]*e[0],n[3]=t[3]*e[0],n[4]=t[4]*e[1],n[5]=t[5]*e[1],n[6]=t[6]*e[1],n[7]=t[7]*e[1],n[8]=t[8]*e[2],n[9]=t[9]*e[2],n[10]=t[10]*e[2],n[11]=t[11]*e[2],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}static translate(t,e,i){const n=i??L.create();return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12],n[13]=t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13],n[14]=t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14],n[15]=t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15],n}static rotate(t,e,i,n){let s=n??L.create();const o=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);if(!o)return null;let a=i[0],l=i[1],u=i[2];if(o!=1){const tt=1/o;a*=tt,l*=tt,u*=tt}const c=Math.sin(e),h=Math.cos(e),d=1-h,f=t[0],v=t[1],p=t[2],_=t[3],m=t[4],g=t[5],w=t[6],x=t[7],b=t[8],P=t[9],y=t[10],C=t[11],E=a*a*d+h,k=l*a*d+u*c,V=u*a*d-l*c,M=a*l*d-u*c,S=l*l*d+h,D=u*l*d+a*c,O=a*u*d+l*c,T=l*u*d-a*c,z=u*u*d+h;return e?t!=s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]):s=t,s[0]=f*E+m*k+b*V,s[1]=v*E+g*k+P*V,s[2]=p*E+w*k+y*V,s[3]=_*E+x*k+C*V,s[4]=f*M+m*S+b*D,s[5]=v*M+g*S+P*D,s[6]=p*M+w*S+y*D,s[7]=_*M+x*S+C*D,s[8]=f*O+m*T+b*z,s[9]=v*O+g*T+P*z,s[10]=p*O+w*T+y*z,s[11]=_*O+x*T+C*z,s}static lookAt(t,e,i,n){const s=n??L.create(),o=t[0],a=t[1],l=t[2],u=e[0],c=e[1],h=e[2],d=i[0],f=i[1],v=i[2];if(o==u&&a==c&&l==h)return L.identity(s);let p,_,m,g,w,x,b,P,y,C;return b=o-u,P=a-c,y=l-h,C=1/Math.sqrt(b*b+P*P+y*y),b*=C,P*=C,y*=C,p=f*y-v*P,_=v*b-d*y,m=d*P-f*b,C=Math.sqrt(p*p+_*_+m*m),C?(C=1/C,p*=C,_*=C,m*=C):(p=0,_=0,m=0),g=P*m-y*_,w=y*p-b*m,x=b*_-P*p,C=Math.sqrt(g*g+w*w+x*x),C?(C=1/C,g*=C,w*=C,x*=C):(g=0,w=0,x=0),s[0]=p,s[1]=g,s[2]=b,s[3]=0,s[4]=_,s[5]=w,s[6]=P,s[7]=0,s[8]=m,s[9]=x,s[10]=y,s[11]=0,s[12]=-(p*o+_*a+m*l),s[13]=-(g*o+w*a+x*l),s[14]=-(b*o+P*a+y*l),s[15]=1,s}static perspective(t,e,i,n,s){const o=s??L.create(),a=i*Math.tan(t*Math.PI/360),u=a*e*2,c=a*2,h=n-i;return o[0]=i*2/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i*2/c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-(n+i)/h,o[11]=-1,o[12]=0,o[13]=0,o[14]=-(n*i*2)/h,o[15]=0,o}static ortho(t,e,i,n,s,o,a){const l=a??L.create(),u=e-t,c=i-n,h=o-s;return l[0]=2/u,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=2/c,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=-2/h,l[11]=0,l[12]=-(t+e)/u,l[13]=-(i+n)/c,l[14]=-(o+s)/h,l[15]=1,l}static transpose(t,e){const i=e??L.create();return i[0]=t[0],i[1]=t[4],i[2]=t[8],i[3]=t[12],i[4]=t[1],i[5]=t[5],i[6]=t[9],i[7]=t[13],i[8]=t[2],i[9]=t[6],i[10]=t[10],i[11]=t[14],i[12]=t[3],i[13]=t[7],i[14]=t[11],i[15]=t[15],i}static inverse(t,e){const i=e??L.create(),n=t[0],s=t[1],o=t[2],a=t[3],l=t[4],u=t[5],c=t[6],h=t[7],d=t[8],f=t[9],v=t[10],p=t[11],_=t[12],m=t[13],g=t[14],w=t[15],x=n*u-s*l,b=n*c-o*l,P=n*h-a*l,y=s*c-o*u,C=s*h-a*u,E=o*h-a*c,k=d*m-f*_,V=d*g-v*_,M=d*w-p*_,S=f*g-v*m,D=f*w-p*m,O=v*w-p*g,T=1/(x*O-b*D+P*S+y*M-C*V+E*k);return i[0]=(u*O-c*D+h*S)*T,i[1]=(-s*O+o*D-a*S)*T,i[2]=(m*E-g*C+w*y)*T,i[3]=(-f*E+v*C-p*y)*T,i[4]=(-l*O+c*M-h*V)*T,i[5]=(n*O-o*M+a*V)*T,i[6]=(-_*E+g*P-w*b)*T,i[7]=(d*E-v*P+p*b)*T,i[8]=(l*D-u*M+h*k)*T,i[9]=(-n*D+s*M-a*k)*T,i[10]=(_*C-m*P+w*x)*T,i[11]=(-d*C+f*P-p*x)*T,i[12]=(-l*S+u*V-c*k)*T,i[13]=(n*S-s*V+o*k)*T,i[14]=(-_*y+m*b-g*x)*T,i[15]=(d*y-f*b+v*x)*T,i}static toVecIV(t,e){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],f=t[10],v=t[11],p=t[12],_=t[13],m=t[14],g=t[15],w=e[0],x=e[1],b=e[2],P=e[3],y=new Float32Array(4);return y[0]=w*i+x*a+b*h+P*p,y[1]=w*n+x*l+b*d+P*_,y[2]=w*s+x*u+b*f+P*m,y[3]=w*o+x*c+b*v+P*g,y}static screenPositionFromMvp(t,e,i,n){const s=i*.5,o=n*.5,a=L.toVecIV(t,[e[0],e[1],e[2],1]);if(a[3]<=0)return[NaN,NaN];a[0]/=a[3],a[1]/=a[3],a[2]/=a[3];const l=qt.create();return l[0]=s+a[0]*s,l[1]=o-a[1]*o,l}}class K{static create(){return new Float32Array(4)}static identity(t){const e=t??K.create();return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}static inverse(t,e){const i=e??K.create();return i[0]=-t[0],i[1]=-t[1],i[2]=-t[2],i[3]=t[3],i}static normalize(t){const e=K.create(),i=t[0],n=t[1],s=t[2],o=Math.sqrt(i*i+n*n+s*s);if(o>0){const a=1/o;e[0]=i*a,e[1]=n*a,e[2]=s*a}return e}static multiply(t,e,i){const n=i??K.create(),s=t[0],o=t[1],a=t[2],l=t[3],u=e[0],c=e[1],h=e[2],d=e[3];return n[0]=s*d+l*u+o*h-a*c,n[1]=o*d+l*c+a*u-s*h,n[2]=a*d+l*h+s*c-o*u,n[3]=l*d-s*u-o*c-a*h,n}static rotate(t,e,i){const n=i??K.create();let s=e[0],o=e[1],a=e[2];const l=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);if(l!==0){const c=1/l;s*=c,o*=c,a*=c}const u=Math.sin(t*.5);return n[0]=s*u,n[1]=o*u,n[2]=a*u,n[3]=Math.cos(t*.5),n}static toVecIII(t,e,i){const n=i??W.create(),s=K.create(),o=K.create(),a=K.create();return K.inverse(e,a),s[0]=t[0],s[1]=t[1],s[2]=t[2],K.multiply(a,s,o),K.multiply(o,e,a),n[0]=a[0],n[1]=a[1],n[2]=a[2],n}static toMatIV(t,e){const i=e??L.create(),n=t[0],s=t[1],o=t[2],a=t[3],l=n+n,u=s+s,c=o+o,h=n*l,d=n*u,f=n*c,v=s*u,p=s*c,_=o*c,m=a*l,g=a*u,w=a*c;return i[0]=1-(v+_),i[1]=d-w,i[2]=f+g,i[3]=0,i[4]=d+w,i[5]=1-(h+_),i[6]=p-m,i[7]=0,i[8]=f-g,i[9]=p+m,i[10]=1-(h+v),i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}static slerp(t,e,i,n){const s=n??K.create(),o=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3];let a=1-o*o;if(a<=0)s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3];else if(a=Math.sqrt(a),Math.abs(a)<1e-4)s[0]=t[0]*.5+e[0]*.5,s[1]=t[1]*.5+e[1]*.5,s[2]=t[2]*.5+e[2]*.5,s[3]=t[3]*.5+e[3]*.5;else{const l=Math.acos(o),u=l*i,c=Math.sin(l-u)/a,h=Math.sin(u)/a;s[0]=t[0]*c+e[0]*h,s[1]=t[1]*c+e[1]*h,s[2]=t[2]*c+e[2]*h,s[3]=t[3]*c+e[3]*h}return s}}class un{static plane(t,e,i){const n=t/2,s=e/2,o=[-n,s,0,n,s,0,-n,-s,0,n,-s,0],a=[0,0,1,0,0,1,0,0,1,0,0,1],l=[i[0],i[1],i[2],i[3],i[0],i[1],i[2],i[3],i[0],i[1],i[2],i[3],i[0],i[1],i[2],i[3]];return{position:o,normal:a,color:l,texCoord:[0,0,1,0,0,1,1,1],index:[0,2,1,1,2,3]}}static circle(t,e,i){const n=[],s=[],o=[],a=[],l=[];n.push(0,0,0),s.push(0,0,1),o.push(i[0],i[1],i[2],i[3]),a.push(.5,.5);let u=0;for(let c=0;c<t;c++){const h=Math.PI*2/t*c,d=Math.cos(h),f=Math.sin(h);n.push(d*e,f*e,0),s.push(0,0,1),o.push(i[0],i[1],i[2],i[3]),a.push((d+1)*.5,1-(f+1)*.5),c===t-1?l.push(0,u+1,1):l.push(0,u+1,u+2),++u}return{position:n,normal:s,color:o,texCoord:a,index:l}}static cube(t,e){const i=t*.5,n=[-i,-i,i,i,-i,i,i,i,i,-i,i,i,-i,-i,-i,-i,i,-i,i,i,-i,i,-i,-i,-i,i,-i,-i,i,i,i,i,i,i,i,-i,-i,-i,-i,i,-i,-i,i,-i,i,-i,-i,i,i,-i,-i,i,i,-i,i,i,i,i,-i,i,-i,-i,-i,-i,-i,i,-i,i,i,-i,i,-i],s=1/Math.sqrt(3),o=[-s,-s,s,s,-s,s,s,s,s,-s,s,s,-s,-s,-s,-s,s,-s,s,s,-s,s,-s,-s,-s,s,-s,-s,s,s,s,s,s,s,s,-s,-s,-s,-s,s,-s,-s,s,-s,s,-s,-s,s,s,-s,-s,s,s,-s,s,s,s,s,-s,s,-s,-s,-s,-s,-s,s,-s,s,s,-s,s,-s],a=[];for(let c=0;c<n.length/3;c++)a.push(e[0],e[1],e[2],e[3]);return{position:n,normal:o,color:a,texCoord:[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],index:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}}static cube2(t,e){const i=t*.5,n=[-i,-i,i,i,-i,i,i,i,i,-i,i,i,-i,-i,-i,-i,i,-i,i,i,-i,i,-i,-i,-i,i,-i,-i,i,i,i,i,i,i,i,-i,-i,-i,-i,i,-i,-i,i,-i,i,-i,-i,i,i,-i,-i,i,i,-i,i,i,i,i,-i,i,-i,-i,-i,-i,-i,i,-i,i,i,-i,i,-i],s=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],o=[];for(let u=0;u<n.length/3;u++)o.push(e[0],e[1],e[2],e[3]);return{position:n,normal:s,color:o,texCoord:[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],index:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}}static cone(t,e,i,n){const s=[],o=[],a=[],l=[],u=[],c=i/2;s.push(0,-c,0),o.push(0,-1,0),a.push(n[0],n[1],n[2],n[3]),l.push(.5,.5);let h=0;for(let d=0;d<=t;d++){const f=Math.PI*2/t*d,v=Math.cos(f),p=Math.sin(f);s.push(v*e,-c,p*e,v*e,-c,p*e),o.push(0,-1,0,v,0,p),a.push(n[0],n[1],n[2],n[3],n[0],n[1],n[2],n[3]),l.push((v+1)*.5,1-(p+1)*.5,(v+1)*.5,1-(p+1)*.5),d!==t&&(u.push(0,h+1,h+3),u.push(h+4,h+2,t*2+3)),h+=2}return s.push(0,c,0),o.push(0,1,0),a.push(n[0],n[1],n[2],n[3]),l.push(.5,.5),{position:s,normal:o,color:a,texCoord:l,index:u}}static cylinder(t,e,i,n,s){const o=[],a=[],l=[],u=[],c=[],h=n/2;o.push(0,h,0,0,-h,0),a.push(0,1,0,0,-1,0),l.push(s[0],s[1],s[2],s[3],s[0],s[1],s[2],s[3]),u.push(.5,.5,.5,.5);let d=2;for(let f=0;f<=t;f++){const v=Math.PI*2/t*f,p=Math.cos(v),_=Math.sin(v);o.push(p*e,h,_*e,p*e,h,_*e,p*i,-h,_*i,p*i,-h,_*i),a.push(0,1,0,p,0,_,0,-1,0,p,0,_),l.push(s[0],s[1],s[2],s[3],s[0],s[1],s[2],s[3],s[0],s[1],s[2],s[3],s[0],s[1],s[2],s[3]),u.push((p+1)*.5,1-(_+1)*.5,1-f/t,0,(p+1)*.5,1-(_+1)*.5,1-f/t,1),f!==t&&c.push(0,d+4,d,1,d+2,d+6,d+5,d+7,d+1,d+1,d+7,d+3),d+=4}return{position:o,normal:a,color:l,texCoord:u,index:c}}static sphere(t,e,i,n){const s=[],o=[],a=[],l=[],u=[];for(let c=0;c<=t;c++){const h=Math.PI/t*c,d=Math.cos(h),f=Math.sin(h);for(let v=0;v<=e;v++){const p=Math.PI*2/e*v,_=f*i*Math.cos(p),m=d*i,g=f*i*Math.sin(p),w=f*Math.cos(p),x=f*Math.sin(p);s.push(_,m,g),o.push(w,d,x),a.push(n[0],n[1],n[2],n[3]),l.push(1-1/e*v,1/t*c)}}for(let c=0;c<t;c++)for(let h=0;h<e;h++){const d=(e+1)*c+h;u.push(d,d+1,d+e+2),u.push(d,d+e+2,d+e+1)}return{position:s,normal:o,color:a,texCoord:l,index:u}}static torus(t,e,i,n,s){const o=[],a=[],l=[],u=[],c=[];for(let h=0;h<=t;h++){const d=Math.PI*2/t*h,f=Math.cos(d),v=Math.sin(d);for(let p=0;p<=e;p++){const _=Math.PI*2/e*p,m=(f*i+n)*Math.cos(_),g=v*i,w=(f*i+n)*Math.sin(_),x=f*Math.cos(_),b=f*Math.sin(_),P=1/e*p;let y=1/t*h+.5;y>1&&(y-=1),y=1-y,o.push(m,g,w),a.push(x,v,b),l.push(s[0],s[1],s[2],s[3]),u.push(P,y)}}for(let h=0;h<t;h++)for(let d=0;d<e;d++){const f=(e+1)*h+d;c.push(f,f+e+1,f+1),c.push(f+e+1,f+e+2,f+1)}return{position:o,normal:a,color:l,texCoord:u,index:c}}static icosahedron(t,e){const i=(1+Math.sqrt(5))/2,n=i*t,s=Math.sqrt(1+i*i),o=[1/s,i/s],a=[-t,n,0,t,n,0,-t,-n,0,t,-n,0,0,-t,n,0,t,n,0,-t,-n,0,t,-n,n,0,-t,n,0,t,-n,0,-t,-n,0,t],l=[-o[0],o[1],0,o[0],o[1],0,-o[0],-o[1],0,o[0],-o[1],0,0,-o[0],o[1],0,o[0],o[1],0,-o[0],-o[1],0,o[0],-o[1],o[1],0,-o[0],o[1],0,o[0],-o[1],0,-o[0],-o[1],0,o[0]],u=[e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3]],c=[];for(let d=0,f=l.length;d<f;d+=3){const v=(Math.atan2(l[d+2],-l[d])+Math.PI)/(Math.PI*2),p=1-(l[d+1]+1)/2;c.push(v,p)}return{position:a,normal:l,color:u,texCoord:c,index:[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}}}class Ie{static DEFAULT_DISTANCE=5;static DEFAULT_MIN_DISTANCE=1;static DEFAULT_MAX_DISTANCE=10;static DEFAULT_MOVE_SCALE=2;constructor(t,e={}){this.target=t,this.distance=e.distance||Ie.DEFAULT_DISTANCE,this.minDistance=e.min||Ie.DEFAULT_MIN_DISTANCE,this.maxDistance=e.max||Ie.DEFAULT_MAX_DISTANCE,this.moveScale=e.move||Ie.DEFAULT_MOVE_SCALE,this.position=W.create(0,0,this.distance),this.center=W.create(0,0,0),this.upDirection=W.create(0,1,0),this.defaultPosition=W.create(0,0,this.distance),this.defaultCenter=W.create(0,0,0),this.defaultUpDirection=W.create(0,1,0),this.movePosition=W.create(0,0,0),this.rotateX=0,this.rotateY=0,this.scale=0,this.isDown=!1,this.prevPosition=qt.create(0,0),this.offsetPosition=qt.create(0,0),this.qt=K.create(),this.qtx=K.create(),this.qty=K.create(),this.mouseInteractionStart=this.mouseInteractionStart.bind(this),this.mouseInteractionMove=this.mouseInteractionMove.bind(this),this.mouseInteractionEnd=this.mouseInteractionEnd.bind(this),this.wheelScroll=this.wheelScroll.bind(this),this.target.addEventListener("mousedown",this.mouseInteractionStart,!1),this.target.addEventListener("mousemove",this.mouseInteractionMove,!1),this.target.addEventListener("mouseup",this.mouseInteractionEnd,!1),this.target.addEventListener("wheel",this.wheelScroll,!1),this.target.addEventListener("contextmenu",i=>{i.preventDefault()},!1)}mouseInteractionStart(t){this.isDown=!0;const e=this.target.getBoundingClientRect();this.prevPosition=qt.create(t.clientX-e.left,t.clientY-e.top)}mouseInteractionMove(t){if(this.isDown!==!0)return;const e=this.target.getBoundingClientRect(),i=e.width,n=e.height,s=t.clientX-e.left,o=t.clientY-e.top,a=1/Math.min(i,n);switch(this.offsetPosition=qt.create(s-this.prevPosition[0],o-this.prevPosition[1]),this.prevPosition=qt.create(s,o),t.buttons){case 1:this.rotateX+=this.offsetPosition[0]*a,this.rotateY+=this.offsetPosition[1]*a,this.rotateX=this.rotateX%1,this.rotateY=Math.min(Math.max(this.rotateY%1,-.25),.25);break;case 2:const l=W.create(this.offsetPosition[0],-this.offsetPosition[1],0),u=K.toVecIII(l,this.qt);this.movePosition[0]-=u[0]*a*this.moveScale,this.movePosition[1]-=u[1]*a*this.moveScale,this.movePosition[2]-=u[2]*a*this.moveScale;break}}mouseInteractionEnd(){this.isDown=!1}wheelScroll(t){const e=t.wheelDelta;e>0?this.scale=-.5:e<0&&(this.scale=.5)}update(){const t=Math.PI*2,e=W.create(1,0,0),i=W.create(0,1,0);return this.scale*=.7,this.distance+=this.scale,this.distance=Math.min(Math.max(this.distance,this.minDistance),this.maxDistance),this.defaultPosition[2]=this.distance,K.identity(this.qt),K.identity(this.qtx),K.identity(this.qty),K.rotate(this.rotateX*t,i,this.qtx),K.toVecIII(e,this.qtx,e),K.rotate(this.rotateY*t,e,this.qty),K.multiply(this.qtx,this.qty,this.qt),K.toVecIII(this.defaultPosition,this.qt,this.position),K.toVecIII(this.defaultUpDirection,this.qt,this.upDirection),this.position[0]+=this.movePosition[0],this.position[1]+=this.movePosition[1],this.position[2]+=this.movePosition[2],this.center[0]=this.defaultCenter[0]+this.movePosition[0],this.center[1]=this.defaultCenter[1]+this.movePosition[1],this.center[2]=this.defaultCenter[2]+this.movePosition[2],L.lookAt(this.position,this.center,this.upDirection)}}/*! Tweakpane 4.0.3 (c) 2016 cocopon, licensed under the MIT license. */function G(r){return r==null}function Hn(r){return r!==null&&typeof r=="object"}function Mn(r){return r!==null&&typeof r=="object"}function ka(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0}function ke(r,t){return Array.from(new Set([...Object.keys(r),...Object.keys(t)])).reduce((e,i)=>{const n=r[i],s=t[i];return Mn(n)&&Mn(s)?Object.assign(Object.assign({},e),{[i]:ke(n,s)}):Object.assign(Object.assign({},e),{[i]:i in t?s:n})},{})}function Wn(r){return!!Hn(r)&&"target"in r}const Ta={alreadydisposed:()=>"View has been already disposed",invalidparams:r=>`Invalid parameters for '${r.name}'`,nomatchingcontroller:r=>`No matching controller for '${r.key}'`,nomatchingview:r=>`No matching view for '${JSON.stringify(r.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:r=>`Not compatible with  plugin '${r.id}'`,propertynotfound:r=>`Property '${r.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Z{static alreadyDisposed(){return new Z({type:"alreadydisposed"})}static notBindable(){return new Z({type:"notbindable"})}static notCompatible(t,e){return new Z({type:"notcompatible",context:{id:`${t}.${e}`}})}static propertyNotFound(t){return new Z({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new Z({type:"shouldneverhappen"})}constructor(t){var e;this.message=(e=Ta[t.type](t.context))!==null&&e!==void 0?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}toString(){return this.message}}class Xi{constructor(t,e){this.obj_=t,this.key=e}static isBindable(t){return t!==null&&(typeof t=="object"||typeof t=="function")}read(){return this.obj_[this.key]}write(t){this.obj_[this.key]=t}writeProperty(t,e){const i=this.read();if(!Xi.isBindable(i))throw Z.notBindable();if(!(t in i))throw Z.propertyNotFound(t);i[t]=e}}class nt{constructor(){this.observers_={}}on(t,e,i){var n;let s=this.observers_[t];return s||(s=this.observers_[t]=[]),s.push({handler:e,key:(n=i?.key)!==null&&n!==void 0?n:e}),this}off(t,e){const i=this.observers_[t];return i&&(this.observers_[t]=i.filter(n=>n.key!==e)),this}emit(t,e){const i=this.observers_[t];i&&i.forEach(n=>{n.handler(e)})}}class Ma{constructor(t,e){var i;this.constraint_=e?.constraint,this.equals_=(i=e?.equals)!==null&&i!==void 0?i:(n,s)=>n===s,this.emitter=new nt,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const i=e??{forceEmit:!1,last:!0},n=this.constraint_?this.constraint_.constrain(t):t,s=this.rawValue_;(!this.equals_(s,n)||i.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=n,this.emitter.emit("change",{options:i,previousRawValue:s,rawValue:n,sender:this}))}}class Sa{constructor(t){this.emitter=new nt,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const i=e??{forceEmit:!1,last:!0},n=this.value_;(n!==t||i.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:i,previousRawValue:n,rawValue:this.value_,sender:this}))}}class Va{constructor(t){this.emitter=new nt,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function q(r,t){const e=t?.constraint,i=t?.equals;return e||i?new Ma(r,t):new Sa(r)}class A{constructor(t){this.emitter=new nt,this.valMap_=t;for(const e in this.valMap_)this.valMap_[e].emitter.on("change",()=>{this.emitter.emit("change",{key:e,sender:this})})}static createCore(t){return Object.keys(t).reduce((e,i)=>Object.assign(e,{[i]:q(t[i])}),{})}static fromObject(t){const e=this.createCore(t);return new A(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}class ki{constructor(t){this.values=A.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(t,i),e)}}class Aa{constructor(t){this.values=A.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),i=this.values.get("min");let n=t;return G(i)||(n=Math.max(n,i)),G(e)||(n=Math.min(n,e)),n}}class Ra{constructor(t,e=0){this.step=t,this.origin=e}constrain(t){const e=this.origin%this.step;return e+Math.round((t-e)/this.step)*this.step}}class Oa{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const Da={"**":(r,t)=>Math.pow(r,t),"*":(r,t)=>r*t,"/":(r,t)=>r/t,"%":(r,t)=>r%t,"+":(r,t)=>r+t,"-":(r,t)=>r-t,"<<":(r,t)=>r<<t,">>":(r,t)=>r>>t,">>>":(r,t)=>r>>>t,"&":(r,t)=>r&t,"^":(r,t)=>r^t,"|":(r,t)=>r|t};class La{constructor(t,e,i){this.left=e,this.operator=t,this.right=i}evaluate(){const t=Da[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Ia={"+":r=>r,"-":r=>-r,"~":r=>~r};class Ua{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=Ia[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Zn(r){return(t,e)=>{for(let i=0;i<r.length;i++){const n=r[i](t,e);if(n!=="")return n}return""}}function pi(r,t){var e;const i=r.substr(t).match(/^\s+/);return(e=i&&i[0])!==null&&e!==void 0?e:""}function di(r,t){var e;const i=r.substr(t).match(/^[0-9]+/);return(e=i&&i[0])!==null&&e!==void 0?e:""}function cn(r,t){const e=r.substr(t,1);if(t+=1,e.toLowerCase()!=="e")return"";const i=function(n,s){const o=di(n,s);if(o!=="")return o;const a=n.substr(s,1);if(a!=="-"&&a!=="+")return"";const l=di(n,s+=1);return l===""?"":a+l}(r,t);return i===""?"":e+i}function Br(r,t){const e=r.substr(t,1);if(e==="0")return e;const i=function(n,s){const o=n.substr(s,1);return o.match(/^[1-9]$/)?o:""}(r,t);return t+=i.length,i===""?"":i+di(r,t)}const Fa=Zn([function(r,t){const e=Br(r,t);if(t+=e.length,e==="")return"";const i=r.substr(t,1);if(t+=i.length,i!==".")return"";const n=di(r,t);return e+i+n+cn(r,t+=n.length)},function(r,t){const e=r.substr(t,1);if(t+=e.length,e!==".")return"";const i=di(r,t);return t+=i.length,i===""?"":e+i+cn(r,t)},function(r,t){const e=Br(r,t);return t+=e.length,e===""?"":e+cn(r,t)}]),Ba=Zn([function(r,t){const e=r.substr(t,2);if(t+=e.length,e.toLowerCase()!=="0b")return"";const i=function(n,s){var o;const a=n.substr(s).match(/^[01]+/);return(o=a&&a[0])!==null&&o!==void 0?o:""}(r,t);return i===""?"":e+i},function(r,t){const e=r.substr(t,2);if(t+=e.length,e.toLowerCase()!=="0o")return"";const i=function(n,s){var o;const a=n.substr(s).match(/^[0-7]+/);return(o=a&&a[0])!==null&&o!==void 0?o:""}(r,t);return i===""?"":e+i},function(r,t){const e=r.substr(t,2);if(t+=e.length,e.toLowerCase()!=="0x")return"";const i=function(n,s){var o;const a=n.substr(s).match(/^[0-9a-f]+/i);return(o=a&&a[0])!==null&&o!==void 0?o:""}(r,t);return i===""?"":e+i}]),za=Zn([Ba,Fa]);function Na(r,t){var e;return(e=function(i,n){const s=za(i,n);return n+=s.length,s===""?null:{evaluable:new Oa(s),cursor:n}}(r,t))!==null&&e!==void 0?e:function(i,n){const s=i.substr(n,1);if(n+=s.length,s!=="(")return null;const o=Os(i,n);if(!o)return null;n=o.cursor,n+=pi(i,n).length;const a=i.substr(n,1);return n+=a.length,a!==")"?null:{evaluable:o.evaluable,cursor:n}}(r,t)}function ja(r,t,e){e+=pi(t,e).length;const i=r.filter(n=>t.startsWith(n,e))[0];return i?(e+=i.length,{cursor:e+=pi(t,e).length,operator:i}):null}const Ka=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((r,t)=>function(e,i){return(n,s)=>{const o=e(n,s);if(!o)return null;s=o.cursor;let a=o.evaluable;for(;;){const l=ja(i,n,s);if(!l)break;s=l.cursor;const u=e(n,s);if(!u)return null;s=u.cursor,a=new La(l.operator,a,u.evaluable)}return a?{cursor:s,evaluable:a}:null}}(r,t),function r(t,e){const i=Na(t,e);if(i)return i;const n=t.substr(e,1);if(e+=n.length,n!=="+"&&n!=="-"&&n!=="~")return null;const s=r(t,e);return s?{cursor:e=s.cursor,evaluable:new Ua(n,s.evaluable)}:null});function Os(r,t){return t+=pi(r,t).length,Ka(r,t)}function Wt(r){var t;const e=function(i){const n=Os(i,0);return n?n.cursor+pi(i,n.cursor).length!==i.length?null:n.evaluable:null}(r);return(t=e?.evaluate())!==null&&t!==void 0?t:null}function Ds(r){if(typeof r=="number")return r;if(typeof r=="string"){const t=Wt(r);if(!G(t))return t}return 0}function Ga(r){return String(r)}function dt(r){return t=>t.toFixed(Math.max(Math.min(r,20),0))}function F(r,t,e,i,n){return i+(r-t)/(e-t)*(n-i)}function zr(r){return String(r.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function rt(r,t,e){return Math.min(Math.max(r,t),e)}function Ls(r,t){return(r%t+t)%t}function Xa(r,t){return G(r.step)?Math.max(zr(t),2):zr(r.step)}function Is(r){var t;return(t=r.step)!==null&&t!==void 0?t:1}function Us(r,t){var e;const i=Math.abs((e=r.step)!==null&&e!==void 0?e:t);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function Fs(r,t){return G(r.step)?null:new Ra(r.step,t)}function Bs(r){return G(r.max)||G(r.min)?G(r.max)&&G(r.min)?null:new Aa({max:r.max,min:r.min}):new ki({max:r.max,min:r.min})}function zs(r,t){var e,i,n;return{formatter:(e=r.format)!==null&&e!==void 0?e:dt(Xa(r,t)),keyScale:(i=r.keyScale)!==null&&i!==void 0?i:Is(r),pointerScale:(n=r.pointerScale)!==null&&n!==void 0?n:Us(r,t)}}function Ns(r){return{format:r.optional.function,keyScale:r.optional.number,max:r.optional.number,min:r.optional.number,pointerScale:r.optional.number,step:r.optional.number}}function Qn(r){return{constraint:r.constraint,textProps:A.fromObject(zs(r.params,r.initialValue))}}class Ve{constructor(t){this.controller=t}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(t){this.controller.viewProps.set("disabled",t)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(t){this.controller.viewProps.set("hidden",t)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(t){return this.controller.importState(t)}exportState(){return this.controller.exportState()}}class en{constructor(t){this.target=t}}class Ti extends en{constructor(t,e,i){super(t),this.value=e,this.last=i==null||i}}class qa extends en{constructor(t,e){super(t),this.expanded=e}}class Ya extends en{constructor(t,e){super(t),this.index=e}}class $a extends en{constructor(t,e){super(t),this.native=e}}class fi extends Ve{constructor(t){super(t),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new nt,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(t){this.controller.tag=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,n=>{i(n)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}refresh(){this.controller.value.fetch()}onValueChange_(t){const e=this.controller.value;this.emitter_.emit("change",new Ti(this,e.binding.target.read(),t.options.last))}}class Ha{constructor(t,e){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e,this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new nt}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,e){this.value_.setRawValue(t,e)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function Kt(r){return t=>e=>{if(!t&&e===void 0)return{succeeded:!1,value:void 0};if(t&&e===void 0)return{succeeded:!0,value:void 0};const i=r(e);return i!==void 0?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function Nr(r){return{custom:t=>Kt(t)(r),boolean:Kt(t=>typeof t=="boolean"?t:void 0)(r),number:Kt(t=>typeof t=="number"?t:void 0)(r),string:Kt(t=>typeof t=="string"?t:void 0)(r),function:Kt(t=>typeof t=="function"?t:void 0)(r),constant:t=>Kt(e=>e===t?t:void 0)(r),raw:Kt(t=>t)(r),object:t=>Kt(e=>{var i;if((i=e)!==null&&typeof i=="object")return function(n,s){return Object.keys(s).reduce((o,a)=>{if(o===void 0)return;const l=(0,s[a])(n[a]);return l.succeeded?Object.assign(Object.assign({},o),{[a]:l.value}):void 0},{})}(e,t)})(r),array:t=>Kt(e=>{var i;if(Array.isArray(e))return i=t,e.reduce((n,s)=>{if(n===void 0)return;const o=i(s);return o.succeeded&&o.value!==void 0?[...n,o.value]:void 0},[])})(r)}}const Sn={optional:Nr(!0),required:Nr(!1)};function H(r,t){const e=t(Sn),i=Sn.required.object(e)(r);return i.succeeded?i.value:void 0}function Et(r,t,e,i){if(t&&!t(r))return!1;const n=H(r,e);return!!n&&i(n)}function kt(r,t){var e;return ke((e=r?.())!==null&&e!==void 0?e:{},t)}function we(r){return"value"in r}function js(r){return!Hn(r)||!("binding"in r)?!1:Wn(r.binding)}const It="http://www.w3.org/2000/svg";function Bi(r){r.offsetHeight}function Jn(r){return r.ontouchstart!==void 0}function Wa(){return globalThis.document}const Za={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function nn(r,t){const e=r.createElementNS(It,"svg");return e.innerHTML=Za[t],e}function Ks(r,t,e){r.insertBefore(t,r.children[e])}function tr(r){r.parentElement&&r.parentElement.removeChild(r)}function Gs(r){for(;r.children.length>0;)r.removeChild(r.children[0])}function Xs(r){return r.relatedTarget?r.relatedTarget:"explicitOriginalTarget"in r?r.explicitOriginalTarget:null}function $t(r,t){r.emitter.on("change",e=>{t(e.rawValue)}),t(r.rawValue)}function Ft(r,t,e){$t(r.value(t),e)}const Qa="tp";function I(r){return(t,e)=>[Qa,"-",r,"v",t?`_${t}`:"",e?`-${e}`:""].join("")}const ii=I("lbl");class qs{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ii()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(ii("l")),Ft(e.props,"label",s=>{G(s)?this.element.classList.add(ii(void 0,"nol")):(this.element.classList.remove(ii(void 0,"nol")),function(o){for(;o.childNodes.length>0;)o.removeChild(o.childNodes[0])}(i),i.appendChild(function(o,a){const l=o.createDocumentFragment();return a.split(`
`).map(u=>o.createTextNode(u)).forEach((u,c)=>{c>0&&l.appendChild(o.createElement("br")),l.appendChild(u)}),l}(t,s)))}),this.element.appendChild(i),this.labelElement=i;const n=t.createElement("div");n.classList.add(ii("v")),this.element.appendChild(n),this.valueElement=n}}class Ys{constructor(t,e){this.props=e.props,this.valueController=e.valueController,this.viewProps=e.valueController.viewProps,this.view=new qs(t,{props:e.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(t){return Et(t,null,e=>({label:e.optional.string}),e=>(this.props.set("label",e.label),!0))}exportProps(){return kt(null,{label:this.props.get("label")})}}const jr=I(""),Kr={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class rn{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",()=>{["veryfirst","first","last","verylast"].forEach(i=>{e.classList.remove(jr(void 0,Kr[i]))}),this.blade.get("positions").forEach(i=>{e.classList.add(jr(void 0,Kr[i]))})}),this.viewProps.handleDispose(()=>{tr(e)})}get parent(){return this.parent_}set parent(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(t){return Et(t,null,e=>({disabled:e.required.boolean,hidden:e.required.boolean}),e=>(this.viewProps.importState(e),!0))}exportState(){return kt(null,Object.assign({},this.viewProps.exportState()))}}class Te extends rn{constructor(t,e){if(e.value!==e.valueController.value)throw Z.shouldNeverHappen();const i=e.valueController.viewProps,n=new Ys(t,{blade:e.blade,props:e.props,valueController:e.valueController});super(Object.assign(Object.assign({},e),{view:new qs(t,{props:e.props,viewProps:i}),viewProps:i})),this.labelController=n,this.value=e.value,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(t){return Et(t,e=>{var i,n,s;return super.importState(e)&&this.labelController.importProps(e)&&((s=(n=(i=this.valueController).importProps)===null||n===void 0?void 0:n.call(i,t))===null||s===void 0||s)},e=>({value:e.optional.raw}),e=>(e.value&&(this.value.rawValue=e.value),!0))}exportState(){var t,e,i;return kt(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(i=(e=(t=this.valueController).exportProps)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:{}))}}function Gr(r){const t=Object.assign({},r);return delete t.value,t}class $s extends Te{constructor(t,e){super(t,e),this.tag=e.tag}importState(t){return Et(t,e=>super.importState(Gr(t)),e=>({tag:e.optional.string}),e=>(this.tag=e.tag,!0))}exportState(){return kt(()=>Gr(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}class Ja extends $s{importState(t){return Et(t,e=>super.importState(e),e=>({binding:e.required.object({value:e.required.raw})}),e=>(this.value.binding.inject(e.binding.value),this.value.fetch(),!0))}}function tl(r){return we(r)&&function(t){if(!("binding"in t))return!1;const e=t.binding;return Wn(e)&&"read"in e&&"write"in e}(r.value)}function Xr(r,t){for(;r.length<t;)r.push(void 0)}function el(r){const t=r.indexOf(void 0);return t<0?r:r.slice(0,t)}class il{constructor(t){this.emitter=new nt,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t.binding,this.value_=q(function(e){const i=[];return Xr(i,e),i}(t.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,e){this.value_.setRawValue(t,e)}fetch(){this.value_.rawValue=function(t,e){const i=[...el(t),e];return i.length>t.length?i.splice(0,i.length-t.length):Xr(i,t.length),i}(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}class nl extends $s{exportState(){return kt(()=>super.exportState(),{binding:{readonly:!0}})}}function rl(r){return we(r)&&function(t){if(!("binding"in t))return!1;const e=t.binding;return Wn(e)&&"read"in e&&!("write"in e)}(r.value)}class sl extends Ve{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get title(){var t;return(t=this.controller.buttonController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.buttonController.props.set("title",t)}on(t,e){const i=e.bind(this);return this.controller.buttonController.emitter.on(t,n=>{i(new $a(this,n.nativeEvent))}),this}off(t,e){return this.controller.buttonController.emitter.off(t,e),this}}function Qe(r,t){return e=>{(function(i,n,s){s?i.classList.add(n):i.classList.remove(n)})(r,t,e)}}function er(r,t){$t(r,e=>{t.textContent=e??""})}const hn=I("btn");class ol{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(hn()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("button");i.classList.add(hn("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const n=t.createElement("div");n.classList.add(hn("t")),er(e.props.value("title"),n),this.buttonElement.appendChild(n)}}class al{constructor(t,e){this.emitter=new nt,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new ol(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(t){return Et(t,null,e=>({title:e.optional.string}),e=>(this.props.set("title",e.title),!0))}exportProps(){return kt(null,{title:this.props.get("title")})}onClick_(t){this.emitter.emit("click",{nativeEvent:t,sender:this})}}class qr extends rn{constructor(t,e){const i=new al(t,{props:e.buttonProps,viewProps:e.viewProps}),n=new Ys(t,{blade:e.blade,props:e.labelProps,valueController:i});super({blade:e.blade,view:n.view,viewProps:e.viewProps}),this.buttonController=i,this.labelController=n}importState(t){return Et(t,e=>super.importState(e)&&this.buttonController.importProps(e)&&this.labelController.importProps(e),()=>({}),()=>!0)}exportState(){return kt(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class Hs{constructor(t){const[e,i]=t.split("-"),n=e.split(".");this.major=parseInt(n[0],10),this.minor=parseInt(n[1],10),this.patch=parseInt(n[2],10),this.prerelease=i??null}toString(){const t=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[t,this.prerelease].join("-"):t}}const Je=new Hs("2.0.3");function ht(r){return Object.assign({core:Je},r)}const ll=ht({id:"button",type:"blade",accept(r){const t=H(r,e=>({title:e.required.string,view:e.required.constant("button"),label:e.optional.string}));return t?{params:t}:null},controller:r=>new qr(r.document,{blade:r.blade,buttonProps:A.fromObject({title:r.params.title}),labelProps:A.fromObject({label:r.params.label}),viewProps:r.viewProps}),api:r=>r.controller instanceof qr?new sl(r.controller):null});class ul{constructor(t,e){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=t,this.emitter_=new nt,this.pool_=e,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(t=>this.pool_.createApi(t))}addBinding(t,e,i){const n=i??{},s=this.controller_.element.ownerDocument,o=this.pool_.createBinding(s,function(l,u){if(!Xi.isBindable(l))throw Z.notBindable();return new Xi(l,u)}(t,e),n),a=this.pool_.createBindingApi(o);return this.add(a,n.index)}addFolder(t){return function(e,i){return e.addBlade(Object.assign(Object.assign({},i),{view:"folder"}))}(this,t)}addButton(t){return function(e,i){return e.addBlade(Object.assign(Object.assign({},i),{view:"button"}))}(this,t)}addTab(t){return function(e,i){return e.addBlade(Object.assign(Object.assign({},i),{view:"tab"}))}(this,t)}add(t,e){const i=t.controller;return this.controller_.rack.add(i,e),t}remove(t){this.controller_.rack.remove(t.controller)}addBlade(t){const e=this.controller_.element.ownerDocument,i=this.pool_.createBlade(e,t),n=this.pool_.createApi(i);return this.add(n,t.index)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,n=>{i(n)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}refresh(){this.children.forEach(t=>{var e;Hn(e=t)&&"refresh"in e&&typeof e.refresh=="function"&&t.refresh()})}onRackValueChange_(t){const e=t.bladeController,i=this.pool_.createApi(e),n=js(e.value)?e.value.binding:null;this.emitter_.emit("change",new Ti(i,n?n.target.read():e.value.rawValue,t.options.last))}}class ir extends Ve{constructor(t,e){super(t),this.rackApi_=new ul(t.rackController,e)}refresh(){this.rackApi_.refresh()}}class nr extends rn{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}importState(t){return Et(t,e=>super.importState(e),e=>({children:e.required.array(e.required.raw)}),e=>this.rackController.rack.children.every((i,n)=>i.importState(e.children[n])))}exportState(){return kt(()=>super.exportState(),{children:this.rackController.rack.children.map(t=>t.exportState())})}}function Vn(r){return"rackController"in r}class cl{constructor(t){this.emitter=new nt,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw Z.shouldNeverHappen();const i=e!==void 0?e:this.items_.length;this.items_.splice(i,0,t),this.cache_.add(t);const n=this.extract_(t);n&&(n.emitter.on("add",this.onSubListAdd_),n.emitter.on("remove",this.onSubListRemove_),n.allItems().forEach(s=>{this.cache_.add(s)})),this.emitter.emit("add",{index:i,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const i=this.extract_(t);i&&(i.allItems().forEach(n=>{this.cache_.delete(n)}),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}function hl(r){return Vn(r)?r.rackController.rack.bcSet_:null}class pl{constructor(t){var e,i;this.emitter=new nt,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(e=t.blade)!==null&&e!==void 0?e:null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new cl(hl),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){var i;(i=t.parent)===null||i===void 0||i.remove(t),t.parent=this,this.bcSet_.add(t,e)}remove(t){t.parent=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(t)}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:e,sender:this}),!e)return;const i=t.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),we(i))i.value.emitter.on("change",this.onChildValueChange_);else if(Vn(i)){const n=i.rackController.rack;if(n){const s=n.emitter;s.on("layout",this.onRackLayout_),s.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:e,sender:this}),!e)return;const i=t.item;if(we(i))i.value.emitter.off("change",this.onChildValueChange_);else if(Vn(i)){const n=i.rackController.rack;if(n){const s=n.emitter;s.off("layout",this.onRackLayout_),s.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const t=this.bcSet_.items.filter(n=>!n.viewProps.get("hidden")),e=t[0],i=t[t.length-1];this.bcSet_.items.forEach(n=>{const s=[];n===e&&(s.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||s.push("veryfirst")),n===i&&(s.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||s.push("verylast")),n.blade.set("positions",s)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildValueChange_(t){const e=function(i,n){for(let s=0;s<i.length;s++){const o=i[s];if(we(o)&&o.value===n)return o}return null}(this.find(we),t.sender);if(!e)throw Z.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:e,options:t.options,sender:this})}onRackLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class rr{constructor(t){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=t.element,this.viewProps=t.viewProps;const e=new pl({blade:t.root?void 0:t.blade,viewProps:t.viewProps});e.emitter.on("add",this.onRackAdd_),e.emitter.on("remove",this.onRackRemove_),this.rack=e,this.viewProps.handleDispose(()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)})}onRackAdd_(t){t.root&&Ks(this.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.root&&tr(t.bladeController.view.element)}}function Be(){return new A({positions:q([],{equals:ka})})}class Mi extends A{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=A.createCore(e);return new Mi(i)}get styleExpanded(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!G(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const i=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};Ft(this,"expanded",i),Ft(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Yr(r,t){t.style.height=r.styleHeight}function sr(r,t){r.value("expanded").emitter.on("beforechange",()=>{if(r.set("completed",!1),G(r.get("expandedHeight"))){const e=function(i,n){let s=0;return function(o,a){const l=o.style.transition;o.style.transition="none",a(),o.style.transition=l}(n,()=>{i.set("expandedHeight",null),i.set("temporaryExpanded",!0),Bi(n),s=n.clientHeight,i.set("temporaryExpanded",null),Bi(n)}),s}(r,t);e>0&&r.set("expandedHeight",e)}r.set("shouldFixHeight",!0),Bi(t)}),r.emitter.on("change",()=>{Yr(r,t)}),Yr(r,t),t.addEventListener("transitionend",e=>{e.propertyName==="height"&&r.cleanUpTransition()})}class Ws extends ir{constructor(t,e){super(t,e),this.emitter_=new nt,this.controller.foldable.value("expanded").emitter.on("change",i=>{this.emitter_.emit("fold",new qa(this,i.sender.rawValue))}),this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(t){this.controller.foldable.set("expanded",t)}get title(){return this.controller.props.get("title")}set title(t){this.controller.props.set("title",t)}get children(){return this.rackApi_.children}addBinding(t,e,i){return this.rackApi_.addBinding(t,e,i)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,n=>{i(n)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}const Zs=I("cnt");class dl{constructor(t,e){var i;this.className_=I((i=e.viewName)!==null&&i!==void 0?i:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),Zs()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Ft(this.foldable_,"completed",Qe(this.element,this.className_(void 0,"cpl")));const n=t.createElement("button");n.classList.add(this.className_("b")),Ft(e.props,"title",u=>{G(u)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const s=t.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const o=t.createElement("div");o.classList.add(this.className_("t")),er(e.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=t.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const l=t.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class An extends nr{constructor(t,e){var i;const n=Mi.create((i=e.expanded)===null||i===void 0||i),s=new dl(t,{foldable:n,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:new rr({blade:e.blade,element:s.containerElement,root:e.root,viewProps:e.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=n,sr(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(t){return Et(t,e=>super.importState(e),e=>({expanded:e.required.boolean,title:e.optional.string}),e=>(this.foldable.set("expanded",e.expanded),this.props.set("title",e.title),!0))}exportState(){return kt(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const fl=ht({id:"folder",type:"blade",accept(r){const t=H(r,e=>({title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean}));return t?{params:t}:null},controller:r=>new An(r.document,{blade:r.blade,expanded:r.params.expanded,props:A.fromObject({title:r.params.title}),viewProps:r.viewProps}),api:r=>r.controller instanceof An?new Ws(r.controller,r.pool):null}),vl=I("");function $r(r,t){return Qe(r,vl(void 0,t))}class Ht extends A{constructor(t){var e,i;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=(i=q(this.getGlobalDisabled_()),[new Va(i),(n,s)=>{i.setRawValue(n,s)}]),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(e=this.get("parent"))===null||e===void 0||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var e,i,n;const s=t??{};return new Ht(A.createCore({disabled:(e=s.disabled)!==null&&e!==void 0&&e,disposed:!1,hidden:(i=s.hidden)!==null&&i!==void 0&&i,parent:(n=s.parent)!==null&&n!==void 0?n:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){$t(this.globalDisabled_,$r(t,"disabled")),Ft(this,"hidden",$r(t,"hidden"))}bindDisabled(t){$t(this.globalDisabled_,e=>{t.disabled=e})}bindTabIndex(t){$t(this.globalDisabled_,e=>{t.tabIndex=e?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",e=>{e&&t()})}importState(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const t=this.get("parent");return!!t&&t.globalDisabled.rawValue||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var e;const i=t.previousRawValue;i?.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(e=this.get("parent"))===null||e===void 0||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Hr=I("tbp");class _l{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Hr()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(Hr("c")),this.element.appendChild(i),this.containerElement=i}}const ni=I("tbi");class ml{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ni()),e.viewProps.bindClassModifiers(this.element),Ft(e.props,"selected",s=>{s?this.element.classList.add(ni(void 0,"sel")):this.element.classList.remove(ni(void 0,"sel"))});const i=t.createElement("button");i.classList.add(ni("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const n=t.createElement("div");n.classList.add(ni("t")),er(e.props.value("title"),n),this.buttonElement.appendChild(n),this.titleElement=n}}class bl{constructor(t,e){this.emitter=new nt,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new ml(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Rn extends nr{constructor(t,e){const i=new _l(t,{viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:new rr({blade:e.blade,element:i.containerElement,viewProps:e.viewProps}),view:i})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new bl(t,{props:e.itemProps,viewProps:Ht.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=e.props,Ft(this.props,"selected",n=>{this.itemController.props.set("selected",n),this.viewProps.set("hidden",!n)})}get itemController(){return this.ic_}importState(t){return Et(t,e=>super.importState(e),e=>({selected:e.required.boolean,title:e.required.string}),e=>(this.ic_.props.set("selected",e.selected),this.ic_.props.set("title",e.title),!0))}exportState(){return kt(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class gl extends ir{constructor(t,e){super(t,e),this.emitter_=new nt,this.onSelect_=this.onSelect_.bind(this),this.pool_=e,this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(t){const e=this.controller.view.element.ownerDocument,i=new Rn(e,{blade:Be(),itemProps:A.fromObject({selected:!1,title:t.title}),props:A.fromObject({selected:!1}),viewProps:Ht.create()}),n=this.pool_.createApi(i);return this.rackApi_.add(n,t.index)}removePage(t){this.rackApi_.remove(this.rackApi_.children[t])}on(t,e){const i=e.bind(this);return this.emitter_.on(t,n=>{i(n)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}onSelect_(t){this.emitter_.emit("select",new Ya(this,t.rawValue))}}class wl extends ir{get title(){var t;return(t=this.controller.itemController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.itemController.props.set("title",t)}get selected(){return this.controller.props.get("selected")}set selected(t){this.controller.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBinding(t,e,i){return this.rackApi_.addBinding(t,e,i)}addBlade(t){return this.rackApi_.addBlade(t)}}class xl{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=q(!0),this.selectedIndex=q(-1),this.items_=[]}add(t,e){const i=e??this.items_.length;this.items_.splice(i,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const e=this.items_.indexOf(t);e<0||(this.items_.splice(e,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0)return this.selectedIndex.rawValue=-1,void(this.empty.rawValue=!0);const t=this.items_.findIndex(e=>e.rawValue);t<0?(this.items_.forEach((e,i)=>{e.rawValue=i===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((e,i)=>{e.rawValue=i===t}),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const e=this.items_.findIndex(i=>i===t.sender);this.items_.forEach((i,n)=>{i.rawValue=n===e}),this.selectedIndex.rawValue=e}else this.keepSelection_()}}const ri=I("tab");class yl{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ri(),Zs()),e.viewProps.bindClassModifiers(this.element),$t(e.empty,Qe(this.element,ri(void 0,"nop")));const i=t.createElement("div");i.classList.add(ri("t")),this.element.appendChild(i),this.itemsElement=i;const n=t.createElement("div");n.classList.add(ri("i")),this.element.appendChild(n);const s=t.createElement("div");s.classList.add(ri("c")),this.element.appendChild(s),this.contentsElement=s}}class Wr extends nr{constructor(t,e){const i=new xl,n=new yl(t,{empty:i.empty,viewProps:e.viewProps});super({blade:e.blade,rackController:new rr({blade:e.blade,element:n.contentsElement,viewProps:e.viewProps}),view:n}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=i}add(t,e){this.rackController.rack.add(t,e)}remove(t){this.rackController.rack.remove(this.rackController.rack.children[t])}onRackAdd_(t){if(!t.root)return;const e=t.bladeController;Ks(this.view.itemsElement,e.itemController.view.element,t.index),e.itemController.viewProps.set("parent",this.viewProps),this.tab.add(e.props.value("selected"))}onRackRemove_(t){if(!t.root)return;const e=t.bladeController;tr(e.itemController.view.element),e.itemController.viewProps.set("parent",null),this.tab.remove(e.props.value("selected"))}}const Zr=ht({id:"tab",type:"blade",accept(r){const t=H(r,e=>({pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")}));return t&&t.pages.length!==0?{params:t}:null},controller(r){const t=new Wr(r.document,{blade:r.blade,viewProps:r.viewProps});return r.params.pages.forEach(e=>{const i=new Rn(r.document,{blade:Be(),itemProps:A.fromObject({selected:!1,title:e.title}),props:A.fromObject({selected:!1}),viewProps:Ht.create()});t.add(i)}),t},api:r=>r.controller instanceof Wr?new gl(r.controller,r.pool):r.controller instanceof Rn?new wl(r.controller,r.pool):null});class or extends fi{get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}}class Pl{constructor(){this.disabled=!1,this.emitter=new nt}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Cl{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new nt,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Si{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((e,i)=>i.constrain(e),t)}}function qi(r,t){if(r instanceof t)return r;if(r instanceof Si){const e=r.constraints.reduce((i,n)=>i||(n instanceof t?n:null),null);if(e)return e}return null}class Vi{constructor(t){this.values=A.fromObject({options:t})}constrain(t){const e=this.values.get("options");return e.length===0||e.filter(i=>i.value===t).length>0?t:e[0].value}}function Ai(r){var t;const e=Sn;return Array.isArray(r)?(t=H({items:r},i=>({items:i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))})))===null||t===void 0?void 0:t.items:typeof r=="object"?e.required.raw(r).value:void 0}function ar(r){if(Array.isArray(r))return r;const t=[];return Object.keys(r).forEach(e=>{t.push({text:e,value:r[e]})}),t}function lr(r){return G(r)?null:new Vi(ar(r))}const pn=I("lst");class El{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(pn()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("select");i.classList.add(pn("s")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const n=t.createElement("div");n.classList.add(pn("m")),n.appendChild(nn(t,"dropdown")),this.element.appendChild(n),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,Ft(this.props_,"options",s=>{Gs(this.selectElement),s.forEach(o=>{const a=t.createElement("option");a.textContent=o.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const t=this.props_.get("options").map(e=>e.value);this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class ce{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new El(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=t.currentTarget;this.value.rawValue=this.props.get("options")[e.selectedIndex].value}importProps(t){return Et(t,null,e=>({options:e.required.custom(Ai)}),e=>(this.props.set("options",ar(e.options)),!0))}exportProps(){return kt(null,{options:this.props.get("options")})}}const Qr=I("pop");class kl{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Qr()),e.viewProps.bindClassModifiers(this.element),$t(e.shows,Qe(this.element,Qr(void 0,"v")))}}class Qs{constructor(t,e){this.shows=q(!1),this.viewProps=e.viewProps,this.view=new kl(t,{shows:this.shows,viewProps:this.viewProps})}}const Jr=I("txt");class Tl{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Jr()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const i=t.createElement("input");i.classList.add(Jr("i")),i.type="text",e.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class vi{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new Tl(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget.value,i=this.parser_(e);G(i)||(this.value.rawValue=i),this.view.refresh()}}function Js(r){return r!=="false"&&!!r}function ts(r){return function(t){return String(t)}(r)}const Ml=dt(0);function Ii(r){return Ml(r)+"%"}function to(r){return String(r)}function On(r){return r}function ti({primary:r,secondary:t,forward:e,backward:i}){let n=!1;function s(o){n||(n=!0,o(),n=!1)}r.emitter.on("change",o=>{s(()=>{t.setRawValue(e(r.rawValue,t.rawValue),o.options)})}),t.emitter.on("change",o=>{s(()=>{r.setRawValue(i(r.rawValue,t.rawValue),o.options)}),s(()=>{t.setRawValue(e(r.rawValue,t.rawValue),o.options)})}),s(()=>{t.setRawValue(e(r.rawValue,t.rawValue),{forceEmit:!1,last:!0})})}function pt(r,t){const e=r*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+e:t.downKey?-e:0}function _i(r){return{altKey:r.altKey,downKey:r.key==="ArrowDown",shiftKey:r.shiftKey,upKey:r.key==="ArrowUp"}}function Zt(r){return{altKey:r.altKey,downKey:r.key==="ArrowLeft",shiftKey:r.shiftKey,upKey:r.key==="ArrowRight"}}function eo(r){return function(t){return t==="ArrowUp"||t==="ArrowDown"}(r)||r==="ArrowLeft"||r==="ArrowRight"}function dn(r,t){var e,i;const n=t.ownerDocument.defaultView,s=t.getBoundingClientRect();return{x:r.pageX-(((e=n&&n.scrollX)!==null&&e!==void 0?e:0)+s.left),y:r.pageY-(((i=n&&n.scrollY)!==null&&i!==void 0?i:0)+s.top)}}class Ae{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new nt,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),(e=t.currentTarget)===null||e===void 0||e.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(dn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(dn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(dn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-i.left,y:e.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-i.left,y:e.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const i=(e=t.targetTouches.item(0))!==null&&e!==void 0?e:this.lastTouch_,n=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(i?{x:i.clientX-n.left,y:i.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey})}}const Tt=I("txt");class Sl{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Tt(),Tt(void 0,"num")),e.arrayPosition&&this.element.classList.add(Tt(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("input");i.classList.add(Tt("i")),i.type="text",e.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Tt()),this.inputElement.classList.add(Tt("i"));const n=t.createElement("div");n.classList.add(Tt("k")),this.element.appendChild(n),this.knobElement=n;const s=t.createElementNS(It,"svg");s.classList.add(Tt("g")),this.knobElement.appendChild(s);const o=t.createElementNS(It,"path");o.classList.add(Tt("gb")),s.appendChild(o),this.guideBodyElem_=o;const a=t.createElementNS(It,"path");a.classList.add(Tt("gh")),s.appendChild(a),this.guideHeadElem_=a;const l=t.createElement("div");l.classList.add(I("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(t.rawValue===null)return void this.element.classList.remove(Tt(void 0,"drg"));this.element.classList.add(Tt(void 0,"drg"));const e=t.rawValue/this.props_.get("pointerScale"),i=e+(e>0?-1:e<0?1:0),n=rt(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+n},0 L${i},4 L${i+n},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class Ri{constructor(t,e){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=e.parser,this.props=e.props,this.sliderProps_=(i=e.sliderProps)!==null&&i!==void 0?i:null,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=q(null),this.view=new Sl(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const n=new Ae(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var e,i;const n=(e=this.sliderProps_)===null||e===void 0?void 0:e.get("min"),s=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("max");let o=t;return n!==void 0&&(o=Math.max(o,n)),s!==void 0&&(o=Math.min(o,s)),o}onInputChange_(t){const e=t.currentTarget.value,i=this.parser_(e);G(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(t){const e=pt(this.props.get("keyScale"),_i(t));e!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}onInputKeyUp_(t){pt(this.props.get("keyScale"),_i(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("pointerScale"))}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);e!==null&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);e!==null&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const fn=I("sld");class Vl{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(fn()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(fn("t")),e.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const n=t.createElement("div");n.classList.add(fn("k")),this.trackElement.appendChild(n),this.knobElement=n,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=rt(F(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class Al{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new Vl(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ae(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(F(rt(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=pt(this.props.get("keyScale"),Zt(t));e!==0&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){pt(this.props.get("keyScale"),Zt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const vn=I("sldtxt");class Rl{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(vn());const i=t.createElement("div");i.classList.add(vn("s")),this.sliderView_=e.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const n=t.createElement("div");n.classList.add(vn("t")),this.textView_=e.textView,n.appendChild(this.textView_.element),this.element.appendChild(n)}}class Yi{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new Al(t,{props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new Ri(t,{parser:e.parser,props:e.textProps,sliderProps:e.sliderProps,value:e.value,viewProps:e.viewProps}),this.view=new Rl(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(t){return Et(t,null,e=>({max:e.required.number,min:e.required.number}),e=>{const i=this.sliderC_.props;return i.set("max",e.max),i.set("min",e.min),!0})}exportProps(){const t=this.sliderC_.props;return kt(null,{max:t.get("max"),min:t.get("min")})}}function io(r){return{sliderProps:new A({keyScale:r.keyScale,max:r.max,min:r.min}),textProps:new A({formatter:q(r.formatter),keyScale:r.keyScale,pointerScale:q(r.pointerScale)})}}const Ol={containerUnitSize:"cnt-usz"};function no(r){return`--${Ol[r]}`}function mi(r){return Ns(r)}function ne(r){if(Mn(r))return H(r,mi)}function Yt(r,t){if(!r)return;const e=[],i=Fs(r,t);i&&e.push(i);const n=Bs(r);return n&&e.push(n),new Si(e)}function ro(r){if(r==="inline"||r==="popup")return r}function Oi(r,t){r.write(t)}const Ui=I("ckb");class Dl{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Ui()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("label");i.classList.add(Ui("l")),this.element.appendChild(i),this.labelElement=i;const n=t.createElement("input");n.classList.add(Ui("i")),n.type="checkbox",this.labelElement.appendChild(n),this.inputElement=n,e.viewProps.bindDisabled(this.inputElement);const s=t.createElement("div");s.classList.add(Ui("w")),this.labelElement.appendChild(s);const o=nn(t,"check");s.appendChild(o),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Ll{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Dl(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(t){const e=t.currentTarget;this.value.rawValue=e.checked,t.preventDefault(),t.stopPropagation()}onLabelMouseDown_(t){t.preventDefault()}}const Il=ht({id:"input-bool",type:"input",accept:(r,t)=>{if(typeof r!="boolean")return null;const e=H(t,i=>({options:i.optional.custom(Ai),readonly:i.optional.constant(!1)}));return e?{initialValue:r,params:e}:null},binding:{reader:r=>Js,constraint:r=>function(t){const e=[],i=lr(t.options);return i&&e.push(i),new Si(e)}(r.params),writer:r=>Oi},controller:r=>{const t=r.document,e=r.value,i=r.constraint,n=i&&qi(i,Vi);return n?new ce(t,{props:new A({options:n.values.value("options")}),value:e,viewProps:r.viewProps}):new Ll(t,{value:e,viewProps:r.viewProps})},api:r=>typeof r.controller.value.rawValue!="boolean"?null:r.controller.valueController instanceof ce?new or(r.controller):null}),_e=I("col");class Ul{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(_e()),e.foldable.bindExpandedClass(this.element,_e(void 0,"expanded")),Ft(e.foldable,"completed",Qe(this.element,_e(void 0,"cpl")));const i=t.createElement("div");i.classList.add(_e("h")),this.element.appendChild(i);const n=t.createElement("div");n.classList.add(_e("s")),i.appendChild(n),this.swatchElement=n;const s=t.createElement("div");if(s.classList.add(_e("t")),i.appendChild(s),this.textElement=s,e.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add(_e("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function so(r,t,e){const i=Ls(r,360),n=rt(t/100,0,1),s=rt(e/100,0,1),o=s*n,a=o*(1-Math.abs(i/60%2-1)),l=s-o;let u,c,h;return[u,c,h]=i>=0&&i<60?[o,a,0]:i>=60&&i<120?[a,o,0]:i>=120&&i<180?[0,o,a]:i>=180&&i<240?[0,a,o]:i>=240&&i<300?[a,0,o]:[o,0,a],[255*(u+l),255*(c+l),255*(h+l)]}function Bt(r){return[r[0],r[1],r[2]]}function sn(r,t){return[r[0],r[1],r[2],t]}const Fl={hsl:{hsl:(r,t,e)=>[r,t,e],hsv:function(r,t,e){const i=e+t*(100-Math.abs(2*e-100))/200;return[r,i!==0?t*(100-Math.abs(2*e-100))/i:0,e+t*(100-Math.abs(2*e-100))/200]},rgb:function(r,t,e){const i=(r%360+360)%360,n=rt(t/100,0,1),s=rt(e/100,0,1),o=(1-Math.abs(2*s-1))*n,a=o*(1-Math.abs(i/60%2-1)),l=s-o/2;let u,c,h;return[u,c,h]=i>=0&&i<60?[o,a,0]:i>=60&&i<120?[a,o,0]:i>=120&&i<180?[0,o,a]:i>=180&&i<240?[0,a,o]:i>=240&&i<300?[a,0,o]:[o,0,a],[255*(u+l),255*(c+l),255*(h+l)]}},hsv:{hsl:function(r,t,e){const i=100-Math.abs(e*(200-t)/100-100);return[r,i!==0?t*e/i:0,e*(200-t)/200]},hsv:(r,t,e)=>[r,t,e],rgb:so},rgb:{hsl:function(r,t,e){const i=rt(r/255,0,1),n=rt(t/255,0,1),s=rt(e/255,0,1),o=Math.max(i,n,s),a=Math.min(i,n,s),l=o-a;let u=0,c=0;const h=(a+o)/2;return l!==0&&(c=l/(1-Math.abs(o+a-1)),u=i===o?(n-s)/l:n===o?2+(s-i)/l:4+(i-n)/l,u=u/6+(u<0?1:0)),[360*u,100*c,100*h]},hsv:function(r,t,e){const i=rt(r/255,0,1),n=rt(t/255,0,1),s=rt(e/255,0,1),o=Math.max(i,n,s),a=o-Math.min(i,n,s);let l;return l=a===0?0:o===i?((n-s)/a%6+6)%6*60:o===n?60*((s-i)/a+2):60*((i-n)/a+4),[l,100*(o===0?0:a/o),100*o]},rgb:(r,t,e)=>[r,t,e]}};function Xe(r,t){return[t==="float"?1:r==="rgb"?255:360,t==="float"?1:r==="rgb"?255:100,t==="float"?1:r==="rgb"?255:100]}function oo(r,t,e){var i;const n=Xe(t,e);return[t==="rgb"?rt(r[0],0,n[0]):(s=r[0],o=n[0],s===o?o:Ls(s,o)),rt(r[1],0,n[1]),rt(r[2],0,n[2]),rt((i=r[3])!==null&&i!==void 0?i:1,0,1)];var s,o}function es(r,t,e,i){const n=Xe(t,e),s=Xe(t,i);return r.map((o,a)=>o/n[a]*s[a])}function ao(r,t,e){const i=es(r,t.mode,t.type,"int");return es(Fl[t.mode][e.mode](...i),e.mode,"int",e.type)}class U{static black(){return new U([0,0,0],"rgb")}constructor(t,e){this.type="int",this.mode=e,this.comps_=oo(t,e,this.type)}getComponents(t){return sn(ao(Bt(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const te=I("colp");class Bl{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(te()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(te("hsv"));const n=t.createElement("div");n.classList.add(te("sv")),this.svPaletteView_=e.svPaletteView,n.appendChild(this.svPaletteView_.element),i.appendChild(n);const s=t.createElement("div");s.classList.add(te("h")),this.hPaletteView_=e.hPaletteView,s.appendChild(this.hPaletteView_.element),i.appendChild(s),this.element.appendChild(i);const o=t.createElement("div");if(o.classList.add(te("rgb")),this.textsView_=e.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const a=t.createElement("div");a.classList.add(te("a"));const l=t.createElement("div");l.classList.add(te("ap")),l.appendChild(this.alphaViews_.palette.element),a.appendChild(l);const u=t.createElement("div");u.classList.add(te("at")),u.appendChild(this.alphaViews_.text.element),a.appendChild(u),this.element.appendChild(a)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(e=>e.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function zl(r){return r==="int"?"int":r==="float"?"float":void 0}function ur(r){return H(r,t=>({color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(zl)}),expanded:t.optional.boolean,picker:t.optional.custom(ro),readonly:t.optional.constant(!1)}))}function Me(r){return r?.1:1}function lo(r){var t;return(t=r.color)===null||t===void 0?void 0:t.type}class cr{constructor(t,e){this.type="float",this.mode=e,this.comps_=oo(t,e,this.type)}getComponents(t){return sn(ao(Bt(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const Nl={int:(r,t)=>new U(r,t),float:(r,t)=>new cr(r,t)};function hr(r,t,e){return Nl[e](r,t)}function ct(r,t){if(r.type===t)return r;if(function(e){return e.type==="int"}(r)&&t==="float")return function(e){const i=e.getComponents(),n=Xe(e.mode,"int");return new cr([F(i[0],0,n[0],0,1),F(i[1],0,n[1],0,1),F(i[2],0,n[2],0,1),i[3]],e.mode)}(r);if(function(e){return e.type==="float"}(r)&&t==="int")return function(e){const i=e.getComponents(),n=Xe(e.mode,"int");return new U([Math.round(F(i[0],0,1,0,n[0])),Math.round(F(i[1],0,1,0,n[1])),Math.round(F(i[2],0,1,0,n[2])),i[3]],e.mode)}(r);throw Z.shouldNeverHappen()}function St(r,t){const e=r.match(/^(.+)%$/);return Math.min(e?.01*parseFloat(e[1])*t:parseFloat(r),t)}const jl={deg:r=>r,grad:r=>360*r/400,rad:r=>360*r/(2*Math.PI),turn:r=>360*r};function uo(r){const t=r.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(r);const e=parseFloat(t[1]),i=t[2];return jl[i](e)}function co(r){const t=r.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[St(t[1],255),St(t[2],255),St(t[3],255)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:e}function Kl(r){const t=co(r);return t?new U(t,"rgb"):null}function ho(r){const t=r.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[St(t[1],255),St(t[2],255),St(t[3],255),St(t[4],1)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])?null:e}function Gl(r){const t=ho(r);return t?new U(t,"rgb"):null}function po(r){const t=r.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[uo(t[1]),St(t[2],100),St(t[3],100)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:e}function Xl(r){const t=po(r);return t?new U(t,"hsl"):null}function fo(r){const t=r.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[uo(t[1]),St(t[2],100),St(t[3],100),St(t[4],1)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])?null:e}function ql(r){const t=fo(r);return t?new U(t,"hsl"):null}function vo(r){const t=r.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];const e=r.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null}function Yl(r){const t=vo(r);return t?new U(t,"rgb"):null}function _o(r){const t=r.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),F(parseInt(t[4]+t[4],16),0,255,0,1)];const e=r.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),F(parseInt(e[4],16),0,255,0,1)]:null}function $l(r){const t=_o(r);return t?new U(t,"rgb"):null}function mo(r){const t=r.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const e=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:e}function Hl(r){return t=>{const e=mo(t);return e?hr(e,"rgb",r):null}}function bo(r){const t=r.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const e=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])?null:e}function Wl(r){return t=>{const e=bo(t);return e?hr(e,"rgb",r):null}}const Zl=[{parser:vo,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:_o,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:co,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:ho,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:po,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:fo,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:mo,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:bo,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Ql(r,t="int"){const e=function(i){return Zl.reduce((n,{parser:s,result:o})=>n||(s(i)?o:null),null)}(r);return e?e.notation==="hex"&&t!=="float"?Object.assign(Object.assign({},e),{type:"int"}):e.notation==="func"?Object.assign(Object.assign({},e),{type:t}):null:null}function Di(r){const t=[Yl,$l,Kl,Gl,Xl,ql];t.push(Hl("int"),Wl("int"));const e=function(i){return n=>i.reduce((s,o)=>s!==null?s:o(n),null)}(t);return i=>{const n=e(i);return n?ct(n,r):null}}function Jl(r){const t=Di("int");if(typeof r!="string")return U.black();const e=t(r);return e??U.black()}function go(r){const t=rt(Math.floor(r),0,255).toString(16);return t.length===1?`0${t}`:t}function pr(r,t="#"){return`${t}${Bt(r.getComponents("rgb")).map(go).join("")}`}function dr(r,t="#"){const e=r.getComponents("rgb");return`${t}${[e[0],e[1],e[2],255*e[3]].map(go).join("")}`}function wo(r){const t=dt(0);return`rgb(${Bt(ct(r,"int").getComponents("rgb")).map(e=>t(e)).join(", ")})`}function zi(r){const t=dt(2),e=dt(0);return`rgba(${ct(r,"int").getComponents("rgb").map((i,n)=>(n===3?t:e)(i)).join(", ")})`}function xo(r,t){const e=dt(t==="float"?2:0),i=["r","g","b"];return`{${Bt(ct(r,t).getComponents("rgb")).map((n,s)=>`${i[s]}: ${e(n)}`).join(", ")}}`}function tu(r){return t=>xo(t,r)}function yo(r,t){const e=dt(2),i=dt(t==="float"?2:0),n=["r","g","b","a"];return`{${ct(r,t).getComponents("rgb").map((s,o)=>`${n[o]}: ${(o===3?e:i)(s)}`).join(", ")}}`}function eu(r){return t=>yo(t,r)}const iu=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:pr},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:dr},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:wo},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:zi},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(r){const t=[dt(0),Ii,Ii];return`hsl(${Bt(ct(r,"int").getComponents("hsl")).map((e,i)=>t[i](e)).join(", ")})`}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(r){const t=[dt(0),Ii,Ii,dt(2)];return`hsla(${ct(r,"int").getComponents("hsl").map((e,i)=>t[i](e)).join(", ")})`}},...["int","float"].reduce((r,t)=>[...r,{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:tu(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:eu(t)}],[])];function is(r){return iu.reduce((t,e)=>{return t||(i=e.format,n=r,i.alpha===n.alpha&&i.mode===n.mode&&i.notation===n.notation&&i.type===n.type?e.stringifier:null);var i,n},null)}const si=I("apl");class nu{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(si()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const i=t.createElement("div");i.classList.add(si("b")),this.element.appendChild(i);const n=t.createElement("div");n.classList.add(si("c")),i.appendChild(n),this.colorElem_=n;const s=t.createElement("div");s.classList.add(si("m")),this.element.appendChild(s),this.markerElem_=s;const o=t.createElement("div");o.classList.add(si("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),i=new U([e[0],e[1],e[2],0],"rgb"),n=new U([e[0],e[1],e[2],255],"rgb"),s=["to right",zi(i),zi(n)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=zi(t);const o=F(e[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class ru{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new nu(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ae(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=t.point.x/t.bounds.width,n=this.value.rawValue,[s,o,a]=n.getComponents("hsv");this.value.setRawValue(new U([s,o,a,i],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=pt(Me(!0),Zt(t));if(e===0)return;const i=this.value.rawValue,[n,s,o,a]=i.getComponents("hsv");this.value.setRawValue(new U([n,s,o,a+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){pt(Me(!0),Zt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Oe=I("coltxt");class su{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Oe()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(Oe("m")),this.modeElem_=function(o){const a=o.createElement("select");return a.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}].reduce((l,u)=>{const c=o.createElement("option");return c.textContent=u.text,c.value=u.value,l.appendChild(c),l},o.createDocumentFragment())),a}(t),this.modeElem_.classList.add(Oe("ms")),i.appendChild(this.modeSelectElement),e.viewProps.bindDisabled(this.modeElem_);const n=t.createElement("div");n.classList.add(Oe("mm")),n.appendChild(nn(t,"dropdown")),i.appendChild(n),this.element.appendChild(i);const s=t.createElement("div");s.classList.add(Oe("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=e.inputViews,this.applyInputViews_(),$t(e.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(t){this.inputViews_=t,this.applyInputViews_()}applyInputViews_(){Gs(this.inputsElem_);const t=this.element.ownerDocument;this.inputViews_.forEach(e=>{const i=t.createElement("div");i.classList.add(Oe("c")),i.appendChild(e.element),this.inputsElem_.appendChild(i)})}}function ou(r,t,e){const i=Xe(r,t)[e];return new ki({min:0,max:i})}function au(r,t){const e={colorMode:t.colorMode,colorType:t.colorType,parser:Wt,viewProps:t.viewProps};return[0,1,2].map(i=>{const n=function(s,o,a){return new Ri(s,{arrayPosition:a===0?"fst":a===2?"lst":"mid",parser:o.parser,props:A.fromObject({formatter:(l=o.colorType,dt(l==="float"?2:0)),keyScale:Me(!1),pointerScale:o.colorType==="float"?.01:1}),value:q(0,{constraint:ou(o.colorMode,o.colorType,a)}),viewProps:o.viewProps});var l}(r,e,i);return ti({primary:t.value,secondary:n.value,forward:s=>ct(s,t.colorType).getComponents(t.colorMode)[i],backward(s,o){const a=t.colorMode,l=ct(s,t.colorType).getComponents(a);return l[i]=o,ct(hr(sn(Bt(l),l[3]),a,t.colorType),"int")}}),n})}class lu{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=e.colorType,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=q(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new su(t,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e=this.colorMode.rawValue;return function(i){return i!=="hex"}(e)?au(t,{colorMode:e,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):function(i,n){const s=new vi(i,{parser:Di("int"),props:A.fromObject({formatter:pr}),value:q(U.black()),viewProps:n.viewProps});return ti({primary:n.value,secondary:s.value,forward:o=>new U(Bt(o.getComponents()),o.mode),backward:(o,a)=>new U(sn(Bt(a.getComponents(o.mode)),o.getComponents()[3]),o.mode)}),[s]}(t,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(i=>i.view)}}const _n=I("hpl");class uu{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(_n()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const i=t.createElement("div");i.classList.add(_n("c")),this.element.appendChild(i);const n=t.createElement("div");n.classList.add(_n("m")),this.element.appendChild(n),this.markerElem_=n,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=wo(new U([e,100,100],"hsv"));const i=F(e,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}}class cu{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new uu(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ae(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=F(rt(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),n=this.value.rawValue,[,s,o,a]=n.getComponents("hsv");this.value.setRawValue(new U([i,s,o,a],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=pt(Me(!1),Zt(t));if(e===0)return;const i=this.value.rawValue,[n,s,o,a]=i.getComponents("hsv");this.value.setRawValue(new U([n+e,s,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){pt(Me(!1),Zt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const mn=I("svp");class hu{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(mn()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const i=t.createElement("canvas");i.height=64,i.width=64,i.classList.add(mn("c")),this.element.appendChild(i),this.canvasElement=i;const n=t.createElement("div");n.classList.add(mn("m")),this.element.appendChild(n),this.markerElem_=n,this.update_()}update_(){const t=function(u){const c=u.ownerDocument.defaultView;return c&&"document"in c?u.getContext("2d",{willReadFrequently:!0}):null}(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,n=this.canvasElement.height,s=t.getImageData(0,0,i,n),o=s.data;for(let u=0;u<n;u++)for(let c=0;c<i;c++){const h=F(c,0,i,0,100),d=F(u,0,n,100,0),f=so(e[0],h,d),v=4*(u*i+c);o[v]=f[0],o[v+1]=f[1],o[v+2]=f[2],o[v+3]=255}t.putImageData(s,0,0);const a=F(e[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const l=F(e[2],0,100,100,0);this.markerElem_.style.top=`${l}%`}onValueChange_(){this.update_()}}class pu{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new hu(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ae(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=F(t.point.x,0,t.bounds.width,0,100),n=F(t.point.y,0,t.bounds.height,100,0),[s,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new U([s,i,n,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){eo(t.key)&&t.preventDefault();const[e,i,n,s]=this.value.rawValue.getComponents("hsv"),o=Me(!1),a=pt(o,Zt(t)),l=pt(o,_i(t));a===0&&l===0||this.value.setRawValue(new U([e,i+a,n+l,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=Me(!1),i=pt(e,Zt(t)),n=pt(e,_i(t));i===0&&n===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class du{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new cu(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new pu(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new ru(t,{value:this.value,viewProps:this.viewProps}),text:new Ri(t,{parser:Wt,props:A.fromObject({pointerScale:.01,keyScale:.1,formatter:dt(2)}),value:q(0,{constraint:new ki({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&ti({primary:this.value,secondary:this.alphaIcs_.text.value,forward:i=>i.getComponents()[3],backward:(i,n)=>{const s=i.getComponents();return s[3]=n,new U(s,i.mode)}}),this.textsC_=new lu(t,{colorType:e.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Bl(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const bn=I("colsw");class fu{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(bn()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(bn("sw")),this.element.appendChild(i),this.swatchElem_=i;const n=t.createElement("button");n.classList.add(bn("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=dr(t)}onValueChange_(){this.update_()}}class vu{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new fu(t,{value:this.value,viewProps:this.viewProps})}}class fr{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=Mi.create(e.expanded),this.swatchC_=new vu(t,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new vi(t,{parser:e.parser,props:A.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Ul(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=e.pickerLayout==="popup"?new Qs(t,{viewProps:this.viewProps}):null;const n=new du(t,{colorType:e.colorType,supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});n.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=n,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(n.view.element),ti({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),sr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,i=t.relatedTarget;i&&e.contains(i)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,i=Xs(t);i&&e.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!Jn(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function _u(r){return Bt(r.getComponents("rgb")).reduce((t,e)=>t<<8|255&Math.floor(e),0)}function mu(r){return r.getComponents("rgb").reduce((t,e,i)=>t<<8|255&Math.floor(i===3?255*e:e),0)>>>0}function bu(r){return typeof r!="number"?U.black():new U([(t=r)>>16&255,t>>8&255,255&t],"rgb");var t}function gu(r){return typeof r!="number"?U.black():new U([(t=r)>>24&255,t>>16&255,t>>8&255,F(255&t,0,255,0,1)],"rgb");var t}function Ni(r,t){return typeof r=="object"&&!G(r)&&t in r&&typeof r[t]=="number"}function Po(r){return Ni(r,"r")&&Ni(r,"g")&&Ni(r,"b")}function ns(r){return Po(r)&&Ni(r,"a")}function Co(r){return Po(r)}function vr(r,t){if(r.mode!==t.mode||r.type!==t.type)return!1;const e=r.getComponents(),i=t.getComponents();for(let n=0;n<e.length;n++)if(e[n]!==i[n])return!1;return!0}function rs(r){return"a"in r?[r.r,r.g,r.b,r.a]:[r.r,r.g,r.b]}function wu(r,t){return(e,i)=>{r?function(n,s,o){const a=ct(s,o).toRgbaObject();n.writeProperty("r",a.r),n.writeProperty("g",a.g),n.writeProperty("b",a.b),n.writeProperty("a",a.a)}(e,i,t):function(n,s,o){const a=ct(s,o).toRgbaObject();n.writeProperty("r",a.r),n.writeProperty("g",a.g),n.writeProperty("b",a.b)}(e,i,t)}}const xu=ht({id:"input-color-number",type:"input",accept:(r,t)=>{if(typeof r!="number"||!function(s){return"color"in s||s.view==="color"}(t))return null;const e=ur(t);return e?{initialValue:r,params:Object.assign(Object.assign({},e),{supportsAlpha:(i=t,!!(!((n=i?.color)===null||n===void 0)&&n.alpha))})}:null;var i,n},binding:{reader:r=>r.params.supportsAlpha?gu:bu,equals:vr,writer:r=>function(t){const e=t?mu:_u;return(i,n)=>{Oi(i,e(n))}}(r.params.supportsAlpha)},controller:r=>{var t,e,i;return new fr(r.document,{colorType:"int",expanded:(t=r.params.expanded)!==null&&t!==void 0&&t,formatter:(i=r.params.supportsAlpha,i?n=>dr(n,"0x"):n=>pr(n,"0x")),parser:Di("int"),pickerLayout:(e=r.params.picker)!==null&&e!==void 0?e:"popup",supportsAlpha:r.params.supportsAlpha,value:r.value,viewProps:r.viewProps})}});function yu(r){return t=>{const e=function(i,n){if(!Co(i))return ct(U.black(),n);if(n==="int"){const s=rs(i);return new U(s,"rgb")}if(n==="float"){const s=rs(i);return new cr(s,"rgb")}return ct(U.black(),"int")}(t,r);return ct(e,"int")}}function Pu(r,t){return e=>r?yo(e,t):xo(e,t)}const Cu=ht({id:"input-color-object",type:"input",accept:(r,t)=>{var e;if(!Co(r))return null;const i=ur(t);return i?{initialValue:r,params:Object.assign(Object.assign({},i),{colorType:(e=lo(t))!==null&&e!==void 0?e:"int"})}:null},binding:{reader:r=>yu(r.params.colorType),equals:vr,writer:r=>wu(ns(r.initialValue),r.params.colorType)},controller:r=>{var t,e;const i=ns(r.initialValue);return new fr(r.document,{colorType:r.params.colorType,expanded:(t=r.params.expanded)!==null&&t!==void 0&&t,formatter:Pu(i,r.params.colorType),parser:Di("int"),pickerLayout:(e=r.params.picker)!==null&&e!==void 0?e:"popup",supportsAlpha:i,value:r.value,viewProps:r.viewProps})}}),Eu=ht({id:"input-color-string",type:"input",accept:(r,t)=>{if(typeof r!="string"||t.view==="text")return null;const e=Ql(r,lo(t));if(!e)return null;const i=is(e);if(!i)return null;const n=ur(t);return n?{initialValue:r,params:Object.assign(Object.assign({},n),{format:e,stringifier:i})}:null},binding:{reader:()=>Jl,equals:vr,writer:r=>{const t=function(e){const i=is(e);return i?(n,s)=>{Oi(n,i(s))}:null}(r.params.format);if(!t)throw Z.notBindable();return t}},controller:r=>{var t,e;return new fr(r.document,{colorType:r.params.format.type,expanded:(t=r.params.expanded)!==null&&t!==void 0&&t,formatter:r.params.stringifier,parser:Di("int"),pickerLayout:(e=r.params.picker)!==null&&e!==void 0?e:"popup",supportsAlpha:r.params.format.alpha,value:r.value,viewProps:r.viewProps})}});class _r{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map((i,n)=>{var s,o;return(o=(s=this.components[n])===null||s===void 0?void 0:s.constrain(i))!==null&&o!==void 0?o:i});return this.asm_.fromComponents(e)}}const ss=I("pndtxt");class ku{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(ss()),this.textViews.forEach(i=>{const n=t.createElement("div");n.classList.add(ss("a")),n.appendChild(i.element),this.element.appendChild(n)})}}class mr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map((i,n)=>function(s,o,a){return new Ri(s,{arrayPosition:a===0?"fst":a===o.axes.length-1?"lst":"mid",parser:o.parser,props:o.axes[a].textProps,value:q(0,{constraint:o.axes[a].constraint}),viewProps:o.viewProps})}(t,e,n)),this.acs_.forEach((i,n)=>{ti({primary:this.value,secondary:i.value,forward:s=>e.assembly.toComponents(s)[n],backward:(s,o)=>{const a=e.assembly.toComponents(s);return a[n]=o,e.assembly.fromComponents(a)}})}),this.view=new ku(t,{textViews:this.acs_.map(i=>i.view)})}get textControllers(){return this.acs_}}class Tu extends fi{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}}const Mu=ht({id:"input-number",type:"input",accept:(r,t)=>{if(typeof r!="number")return null;const e=H(t,i=>Object.assign(Object.assign({},Ns(i)),{options:i.optional.custom(Ai),readonly:i.optional.constant(!1)}));return e?{initialValue:r,params:e}:null},binding:{reader:r=>Ds,constraint:r=>function(t,e){const i=[],n=Fs(t,e);n&&i.push(n);const s=Bs(t);s&&i.push(s);const o=lr(t.options);return o&&i.push(o),new Si(i)}(r.params,r.initialValue),writer:r=>Oi},controller:r=>{const t=r.value,e=r.constraint,i=e&&qi(e,Vi);if(i)return new ce(r.document,{props:new A({options:i.values.value("options")}),value:t,viewProps:r.viewProps});const n=zs(r.params,t.rawValue),s=e&&qi(e,ki);return s?new Yi(r.document,Object.assign(Object.assign({},io(Object.assign(Object.assign({},n),{keyScale:q(n.keyScale),max:s.values.value("max"),min:s.values.value("min")}))),{parser:Wt,value:t,viewProps:r.viewProps})):new Ri(r.document,{parser:Wt,props:A.fromObject(n),value:t,viewProps:r.viewProps})},api:r=>typeof r.controller.value.rawValue!="number"?null:r.controller.valueController instanceof Yi?new Tu(r.controller):r.controller.valueController instanceof ce?new or(r.controller):null});class ae{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(G(t))return!1;const e=t.x,i=t.y;return typeof e=="number"&&typeof i=="number"}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const Eo={toComponents:r=>r.getComponents(),fromComponents:r=>new ae(...r)},De=I("p2d");class Su{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(De()),e.viewProps.bindClassModifiers(this.element),$t(e.expanded,Qe(this.element,De(void 0,"expanded")));const i=t.createElement("div");i.classList.add(De("h")),this.element.appendChild(i);const n=t.createElement("button");n.classList.add(De("b")),n.appendChild(nn(t,"p2dpad")),e.viewProps.bindDisabled(n),i.appendChild(n),this.buttonElement=n;const s=t.createElement("div");if(s.classList.add(De("t")),i.appendChild(s),this.textElement=s,e.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add(De("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const ee=I("p2dp");class Vu{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=t.createElement("div"),this.element.classList.add(ee()),e.layout==="popup"&&this.element.classList.add(ee(void 0,"p")),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(ee("p")),e.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const n=t.createElementNS(It,"svg");n.classList.add(ee("g")),this.padElement.appendChild(n),this.svgElem_=n;const s=t.createElementNS(It,"line");s.classList.add(ee("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const o=t.createElementNS(It,"line");o.classList.add(ee("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=t.createElementNS(It,"line");a.classList.add(ee("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const l=t.createElement("div");l.classList.add(ee("m")),this.padElement.appendChild(l),this.markerElem_=l,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),i=this.props_.get("max"),n=F(t,-i,+i,0,100),s=F(e,-i,+i,0,100),o=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${n}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${n}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function os(r,t,e){return[pt(t[0],Zt(r)),pt(t[1],_i(r))*(e?1:-1)]}class Au{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new Vu(t,{layout:e.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ae(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=this.props.get("max"),n=F(t.point.x,0,t.bounds.width,-i,+i),s=F(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-i,+i);this.value.setRawValue(new ae(n,s),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){eo(t.key)&&t.preventDefault();const[e,i]=os(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));e===0&&i===0||this.value.setRawValue(new ae(this.value.rawValue.x+e,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,i]=os(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));e===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Ru{constructor(t,e){var i,n;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=Mi.create(e.expanded),this.popC_=e.pickerLayout==="popup"?new Qs(t,{viewProps:this.viewProps}):null;const s=new Au(t,{layout:e.pickerLayout,props:new A({invertsY:q(e.invertsY),max:q(e.max),xKeyScale:e.axes[0].textProps.value("keyScale"),yKeyScale:e.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new mr(t,{assembly:Eo,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new Su(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(n=this.view.buttonElement)===null||n===void 0||n.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),ti({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),sr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,i=t.relatedTarget;i&&e.contains(i)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,i=Xs(t);i&&e.contains(i)||i&&i===this.view.buttonElement&&!Jn(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.view.buttonElement.focus()}}function Ou(r){return ae.isObject(r)?new ae(r.x,r.y):new ae}function Du(r,t){r.writeProperty("x",t.x),r.writeProperty("y",t.y)}function as(r,t){var e,i;if(!G(r.min)||!G(r.max))return Math.max(Math.abs((e=r.min)!==null&&e!==void 0?e:0),Math.abs((i=r.max)!==null&&i!==void 0?i:0));const n=Is(r);return Math.max(10*Math.abs(n),10*Math.abs(t))}function Lu(r,t){var e,i;const n=as(ke(r,(e=r.x)!==null&&e!==void 0?e:{}),t.x),s=as(ke(r,(i=r.y)!==null&&i!==void 0?i:{}),t.y);return Math.max(n,s)}function Iu(r){if(!("y"in r))return!1;const t=r.y;return!!t&&"inverted"in t&&!!t.inverted}const Uu=ht({id:"input-point2d",type:"input",accept:(r,t)=>{if(!ae.isObject(r))return null;const e=H(t,i=>Object.assign(Object.assign({},mi(i)),{expanded:i.optional.boolean,picker:i.optional.custom(ro),readonly:i.optional.constant(!1),x:i.optional.custom(ne),y:i.optional.object(Object.assign(Object.assign({},mi(i)),{inverted:i.optional.boolean}))}));return e?{initialValue:r,params:e}:null},binding:{reader:()=>Ou,constraint:r=>{return t=r.params,e=r.initialValue,new _r({assembly:Eo,components:[Yt(Object.assign(Object.assign({},t),t.x),e.x),Yt(Object.assign(Object.assign({},t),t.y),e.y)]});var t,e},equals:ae.equals,writer:()=>Du},controller:r=>{var t,e;const i=r.document,n=r.value,s=r.constraint,o=[r.params.x,r.params.y];return new Ru(i,{axes:n.rawValue.getComponents().map((a,l)=>{var u;return Qn({constraint:s.components[l],initialValue:a,params:ke(r.params,(u=o[l])!==null&&u!==void 0?u:{})})}),expanded:(t=r.params.expanded)!==null&&t!==void 0&&t,invertsY:Iu(r.params),max:Lu(r.params,n.rawValue),parser:Wt,pickerLayout:(e=r.params.picker)!==null&&e!==void 0?e:"popup",value:n,viewProps:r.viewProps})}});class ze{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(G(t))return!1;const e=t.x,i=t.y,n=t.z;return typeof e=="number"&&typeof i=="number"&&typeof n=="number"}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const ls={toComponents:r=>r.getComponents(),fromComponents:r=>new ze(...r)};function Fu(r){return ze.isObject(r)?new ze(r.x,r.y,r.z):new ze}function Bu(r,t){r.writeProperty("x",t.x),r.writeProperty("y",t.y),r.writeProperty("z",t.z)}const zu=ht({id:"input-point3d",type:"input",accept:(r,t)=>{if(!ze.isObject(r))return null;const e=H(t,i=>Object.assign(Object.assign({},mi(i)),{readonly:i.optional.constant(!1),x:i.optional.custom(ne),y:i.optional.custom(ne),z:i.optional.custom(ne)}));return e?{initialValue:r,params:e}:null},binding:{reader:r=>Fu,constraint:r=>{return t=r.params,e=r.initialValue,new _r({assembly:ls,components:[Yt(Object.assign(Object.assign({},t),t.x),e.x),Yt(Object.assign(Object.assign({},t),t.y),e.y),Yt(Object.assign(Object.assign({},t),t.z),e.z)]});var t,e},equals:ze.equals,writer:r=>Bu},controller:r=>{const t=r.value,e=r.constraint,i=[r.params.x,r.params.y,r.params.z];return new mr(r.document,{assembly:ls,axes:t.rawValue.getComponents().map((n,s)=>{var o;return Qn({constraint:e.components[s],initialValue:n,params:ke(r.params,(o=i[s])!==null&&o!==void 0?o:{})})}),parser:Wt,value:t,viewProps:r.viewProps})}});class Ne{constructor(t=0,e=0,i=0,n=0){this.x=t,this.y=e,this.z=i,this.w=n}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(G(t))return!1;const e=t.x,i=t.y,n=t.z,s=t.w;return typeof e=="number"&&typeof i=="number"&&typeof n=="number"&&typeof s=="number"}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const us={toComponents:r=>r.getComponents(),fromComponents:r=>new Ne(...r)};function Nu(r){return Ne.isObject(r)?new Ne(r.x,r.y,r.z,r.w):new Ne}function ju(r,t){r.writeProperty("x",t.x),r.writeProperty("y",t.y),r.writeProperty("z",t.z),r.writeProperty("w",t.w)}const Ku=ht({id:"input-point4d",type:"input",accept:(r,t)=>{if(!Ne.isObject(r))return null;const e=H(t,i=>Object.assign(Object.assign({},mi(i)),{readonly:i.optional.constant(!1),w:i.optional.custom(ne),x:i.optional.custom(ne),y:i.optional.custom(ne),z:i.optional.custom(ne)}));return e?{initialValue:r,params:e}:null},binding:{reader:r=>Nu,constraint:r=>{return t=r.params,e=r.initialValue,new _r({assembly:us,components:[Yt(Object.assign(Object.assign({},t),t.x),e.x),Yt(Object.assign(Object.assign({},t),t.y),e.y),Yt(Object.assign(Object.assign({},t),t.z),e.z),Yt(Object.assign(Object.assign({},t),t.w),e.w)]});var t,e},equals:Ne.equals,writer:r=>ju},controller:r=>{const t=r.value,e=r.constraint,i=[r.params.x,r.params.y,r.params.z,r.params.w];return new mr(r.document,{assembly:us,axes:t.rawValue.getComponents().map((n,s)=>{var o;return Qn({constraint:e.components[s],initialValue:n,params:ke(r.params,(o=i[s])!==null&&o!==void 0?o:{})})}),parser:Wt,value:t,viewProps:r.viewProps})}}),Gu=ht({id:"input-string",type:"input",accept:(r,t)=>{if(typeof r!="string")return null;const e=H(t,i=>({readonly:i.optional.constant(!1),options:i.optional.custom(Ai)}));return e?{initialValue:r,params:e}:null},binding:{reader:r=>to,constraint:r=>function(t){const e=[],i=lr(t.options);return i&&e.push(i),new Si(e)}(r.params),writer:r=>Oi},controller:r=>{const t=r.document,e=r.value,i=r.constraint,n=i&&qi(i,Vi);return n?new ce(t,{props:new A({options:n.values.value("options")}),value:e,viewProps:r.viewProps}):new vi(t,{parser:s=>s,props:A.fromObject({formatter:On}),value:e,viewProps:r.viewProps})},api:r=>typeof r.controller.value.rawValue!="string"?null:r.controller.valueController instanceof ce?new or(r.controller):null}),bi={monitor:{defaultInterval:200,defaultRows:3}},cs=I("mll");class Xu{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(cs()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("textarea");i.classList.add(cs("i")),i.style.height=`calc(var(${no("containerUnitSize")}) * ${e.rows})`,i.readOnly=!0,e.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,i=[];this.value.rawValue.forEach(n=>{n!==void 0&&i.push(this.formatter_(n))}),t.textContent=i.join(`
`),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class br{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Xu(t,{formatter:e.formatter,rows:e.rows,value:this.value,viewProps:this.viewProps})}}const hs=I("sgl");class qu{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(hs()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("input");i.classList.add(hs("i")),i.readOnly=!0,i.type="text",e.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=e!==void 0?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class gr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new qu(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const Yu=ht({id:"monitor-bool",type:"monitor",accept:(r,t)=>{if(typeof r!="boolean")return null;const e=H(t,i=>({readonly:i.required.constant(!0),rows:i.optional.number}));return e?{initialValue:r,params:e}:null},binding:{reader:r=>Js},controller:r=>{var t;return r.value.rawValue.length===1?new gr(r.document,{formatter:ts,value:r.value,viewProps:r.viewProps}):new br(r.document,{formatter:ts,rows:(t=r.params.rows)!==null&&t!==void 0?t:bi.monitor.defaultRows,value:r.value,viewProps:r.viewProps})}});class $u extends fi{get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}}const ie=I("grl");class Hu{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ie()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.props_=e.props,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=t.createElementNS(It,"svg");i.classList.add(ie("g")),i.style.height=`calc(var(${no("containerUnitSize")}) * ${e.rows})`,this.element.appendChild(i),this.svgElem_=i;const n=t.createElementNS(It,"polyline");this.svgElem_.appendChild(n),this.lineElem_=n;const s=t.createElement("div");s.classList.add(ie("t"),I("tt")()),this.element.appendChild(s),this.tooltipElem_=s,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:t,clientHeight:e}=this.element,i=this.value.rawValue.length-1,n=this.props_.get("min"),s=this.props_.get("max"),o=[];this.value.rawValue.forEach((h,d)=>{if(h===void 0)return;const f=F(d,0,i,0,t),v=F(h,n,s,e,0);o.push([f,v].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const a=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0)return void a.classList.remove(ie("t","a"));const u=F(this.cursor_.rawValue,0,i,0,t),c=F(l,n,s,e,0);a.style.left=`${u}px`,a.style.top=`${c}px`,a.textContent=`${this.formatter_(l)}`,a.classList.contains(ie("t","a"))||(a.classList.add(ie("t","a"),ie("t","in")),Bi(a),a.classList.remove(ie("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class ps{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.cursor_=q(-1),this.view=new Hu(t,{cursor:this.cursor_,formatter:e.formatter,rows:e.rows,props:this.props,value:this.value,viewProps:this.viewProps}),Jn(t)){const i=new Ae(this.view.element);i.emitter.on("down",this.onGraphPointerDown_),i.emitter.on("move",this.onGraphPointerMove_),i.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}importProps(t){return Et(t,null,e=>({max:e.required.number,min:e.required.number}),e=>(this.props.set("max",e.max),this.props.set("min",e.min),!0))}exportProps(){return kt(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const{clientWidth:e}=this.view.element;this.cursor_.rawValue=Math.floor(F(t.offsetX,0,e,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.rawValue=Math.floor(F(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.rawValue=-1}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function gn(r){return G(r.format)?dt(2):r.format}function ds(r){return r.view==="graph"}const Wu=ht({id:"monitor-number",type:"monitor",accept:(r,t)=>{if(typeof r!="number")return null;const e=H(t,i=>({format:i.optional.function,max:i.optional.number,min:i.optional.number,readonly:i.required.constant(!0),rows:i.optional.number,view:i.optional.string}));return e?{initialValue:r,params:e}:null},binding:{defaultBufferSize:r=>ds(r)?64:1,reader:r=>Ds},controller:r=>ds(r.params)?function(t){var e,i,n;return new ps(t.document,{formatter:gn(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:bi.monitor.defaultRows,props:A.fromObject({max:(i=t.params.max)!==null&&i!==void 0?i:100,min:(n=t.params.min)!==null&&n!==void 0?n:0}),value:t.value,viewProps:t.viewProps})}(r):function(t){var e;return t.value.rawValue.length===1?new gr(t.document,{formatter:gn(t.params),value:t.value,viewProps:t.viewProps}):new br(t.document,{formatter:gn(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:bi.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}(r),api:r=>r.controller.valueController instanceof ps?new $u(r.controller):null}),Zu=ht({id:"monitor-string",type:"monitor",accept:(r,t)=>{if(typeof r!="string")return null;const e=H(t,i=>({multiline:i.optional.boolean,readonly:i.required.constant(!0),rows:i.optional.number}));return e?{initialValue:r,params:e}:null},binding:{reader:r=>to},controller:r=>{var t;const e=r.value;return e.rawValue.length>1||r.params.multiline?new br(r.document,{formatter:On,rows:(t=r.params.rows)!==null&&t!==void 0?t:bi.monitor.defaultRows,value:e,viewProps:r.viewProps}):new gr(r.document,{formatter:On,value:e,viewProps:r.viewProps})}});class Qu{constructor(t){this.target=t.target,this.reader_=t.reader,this.writer_=t.writer}read(){return this.reader_(this.target.read())}write(t){this.writer_(this.target,t)}inject(t){this.write(this.reader_(t))}}class Ju{constructor(t){this.target=t.target,this.reader_=t.reader}read(){return this.reader_(this.target.read())}}class tc{constructor(t){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=t}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t,e){if(!(i=e.core)||i.major!==Je.major)throw Z.notCompatible(t,e.id);var i;e.type==="blade"?this.pluginsMap_.blades.unshift(e):e.type==="input"?this.pluginsMap_.inputs.unshift(e):e.type==="monitor"&&this.pluginsMap_.monitors.unshift(e)}createInput_(t,e,i){return this.pluginsMap_.inputs.reduce((n,s)=>n??function(o,a){var l;const u=o.accept(a.target.read(),a.params);if(G(u))return null;const c={target:a.target,initialValue:u.initialValue,params:u.params},h=H(a.params,m=>({disabled:m.optional.boolean,hidden:m.optional.boolean,label:m.optional.string,tag:m.optional.string})),d=o.binding.reader(c),f=o.binding.constraint?o.binding.constraint(c):void 0,v=new Qu({reader:d,target:a.target,writer:o.binding.writer(c)}),p=new Ha(q(d(u.initialValue),{constraint:f,equals:o.binding.equals}),v),_=o.controller({constraint:f,document:a.document,initialValue:u.initialValue,params:u.params,value:p,viewProps:Ht.create({disabled:h?.disabled,hidden:h?.hidden})});return new Ja(a.document,{blade:Be(),props:A.fromObject({label:"label"in a.params?(l=h?.label)!==null&&l!==void 0?l:null:a.target.key}),tag:h?.tag,value:p,valueController:_})}(s,{document:t,target:e,params:i}),null)}createMonitor_(t,e,i){return this.pluginsMap_.monitors.reduce((n,s)=>n??function(o,a){var l,u,c;const h=o.accept(a.target.read(),a.params);if(G(h))return null;const d={target:a.target,initialValue:h.initialValue,params:h.params},f=H(a.params,x=>({bufferSize:x.optional.number,disabled:x.optional.boolean,hidden:x.optional.boolean,interval:x.optional.number,label:x.optional.string})),v=o.binding.reader(d),p=(u=(l=f?.bufferSize)!==null&&l!==void 0?l:o.binding.defaultBufferSize&&o.binding.defaultBufferSize(h.params))!==null&&u!==void 0?u:1,_=new il({binding:new Ju({reader:v,target:a.target}),bufferSize:p,ticker:(m=a.document,g=f?.interval,g===0?new Pl:new Cl(m,g??bi.monitor.defaultInterval))});var m,g;const w=o.controller({document:a.document,params:h.params,value:_,viewProps:Ht.create({disabled:f?.disabled,hidden:f?.hidden})});return w.viewProps.bindDisabled(_.ticker),w.viewProps.handleDispose(()=>{_.ticker.dispose()}),new nl(a.document,{blade:Be(),props:A.fromObject({label:"label"in a.params?(c=f?.label)!==null&&c!==void 0?c:null:a.target.key}),value:_,valueController:w})}(s,{document:t,params:i,target:e}),null)}createBinding(t,e,i){if(G(e.read()))throw new Z({context:{key:e.key},type:"nomatchingcontroller"});const n=this.createInput_(t,e,i);if(n)return n;const s=this.createMonitor_(t,e,i);if(s)return s;throw new Z({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const i=this.pluginsMap_.blades.reduce((n,s)=>n??function(o,a){const l=o.accept(a.params);if(!l)return null;const u=H(a.params,c=>({disabled:c.optional.boolean,hidden:c.optional.boolean}));return o.controller({blade:Be(),document:a.document,params:Object.assign(Object.assign({},l.params),{disabled:u?.disabled,hidden:u?.hidden}),viewProps:Ht.create({disabled:u?.disabled,hidden:u?.hidden})})}(s,{document:t,params:e}),null);if(!i)throw new Z({type:"nomatchingview",context:{params:e}});return i}createInputBindingApi_(t){const e=this.pluginsMap_.inputs.reduce((i,n)=>{var s,o;return i||((o=(s=n.api)===null||s===void 0?void 0:s.call(n,{controller:t}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(t,e??new fi(t))}createMonitorBindingApi_(t){const e=this.pluginsMap_.monitors.reduce((i,n)=>{var s,o;return i||((o=(s=n.api)===null||s===void 0?void 0:s.call(n,{controller:t}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(t,e??new fi(t))}createBindingApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(tl(t))return this.createInputBindingApi_(t);if(rl(t))return this.createMonitorBindingApi_(t);throw Z.shouldNeverHappen()}createApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(function(i){return we(i)&&js(i.value)}(t))return this.createBindingApi(t);const e=this.pluginsMap_.blades.reduce((i,n)=>i??n.api({controller:t,pool:this}),null);if(!e)throw Z.shouldNeverHappen();return this.apiCache_.add(t,e)}}const ec=new class{constructor(){this.map_=new Map}get(r){var t;return(t=this.map_.get(r))!==null&&t!==void 0?t:null}has(r){return this.map_.has(r)}add(r,t){return this.map_.set(r,t),r.viewProps.handleDispose(()=>{this.map_.delete(r)}),t}};class ic extends Ve{constructor(t){super(t),this.emitter_=new nt,this.controller.value.emitter.on("change",e=>{this.emitter_.emit("change",new Ti(this,e.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,n=>{i(n)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}class nc extends Ve{}class rc extends Ve{constructor(t){super(t),this.emitter_=new nt,this.controller.value.emitter.on("change",e=>{this.emitter_.emit("change",new Ti(this,e.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,n=>{i(n)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}class sc extends Ve{constructor(t){super(t),this.emitter_=new nt,this.controller.value.emitter.on("change",e=>{this.emitter_.emit("change",new Ti(this,e.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(t){this.controller.valueController.props.set("formatter",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,n=>{i(n)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}const oc={id:"list",type:"blade",core:Je,accept(r){const t=H(r,e=>({options:e.required.custom(Ai),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string}));return t?{params:t}:null},controller(r){const t=new Vi(ar(r.params.options)),e=q(r.params.value,{constraint:t}),i=new ce(r.document,{props:new A({options:t.values.value("options")}),value:e,viewProps:r.viewProps});return new Te(r.document,{blade:r.blade,props:A.fromObject({label:r.params.label}),value:e,valueController:i})},api:r=>r.controller instanceof Te&&r.controller.valueController instanceof ce?new ic(r.controller):null};class ac extends Ws{constructor(t,e){super(t,e)}get element(){return this.controller.view.element}}class lc extends An{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const fs=I("spr");class uc{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(fs()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("hr");i.classList.add(fs("r")),this.element.appendChild(i)}}class vs extends rn{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new uc(t,{viewProps:e.viewProps})}))}}const cc={id:"separator",type:"blade",core:Je,accept(r){const t=H(r,e=>({view:e.required.constant("separator")}));return t?{params:t}:null},controller:r=>new vs(r.document,{blade:r.blade,viewProps:r.viewProps}),api:r=>r.controller instanceof vs?new nc(r.controller):null},hc={id:"slider",type:"blade",core:Je,accept(r){const t=H(r,e=>({max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number}));return t?{params:t}:null},controller(r){var t,e;const i=(t=r.params.value)!==null&&t!==void 0?t:0,n=new ki({max:r.params.max,min:r.params.min}),s=q(i,{constraint:n}),o=new Yi(r.document,Object.assign(Object.assign({},io({formatter:(e=r.params.format)!==null&&e!==void 0?e:Ga,keyScale:q(1),max:n.values.value("max"),min:n.values.value("min"),pointerScale:Us(r.params,i)})),{parser:Wt,value:s,viewProps:r.viewProps}));return new Te(r.document,{blade:r.blade,props:A.fromObject({label:r.params.label}),value:s,valueController:o})},api:r=>r.controller instanceof Te&&r.controller.valueController instanceof Yi?new rc(r.controller):null},pc={id:"text",type:"blade",core:Je,accept(r){const t=H(r,e=>({parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string}));return t?{params:t}:null},controller(r){var t;const e=q(r.params.value),i=new vi(r.document,{parser:r.params.parse,props:A.fromObject({formatter:(t=r.params.format)!==null&&t!==void 0?t:n=>String(n)}),value:e,viewProps:r.viewProps});return new Te(r.document,{blade:r.blade,props:A.fromObject({label:r.params.label}),value:e,valueController:i})},api:r=>r.controller instanceof Te&&r.controller.valueController instanceof vi?new sc(r.controller):null};class dc extends ac{constructor(t){var e,i;const n=t??{},s=(e=n.document)!==null&&e!==void 0?e:Wa(),o=function(){const a=new tc(ec);return[Uu,zu,Ku,Gu,Mu,Eu,Cu,xu,Il,Yu,Zu,Wu,ll,fl,Zr].forEach(l=>{a.register("core",l)}),a}();super(new lc(s,{expanded:n.expanded,blade:Be(),props:A.fromObject({title:n.title}),viewProps:Ht.create()}),o),this.pool_=o,this.containerElem_=(i=n.container)!==null&&i!==void 0?i:function(a){const l=a.createElement("div");return l.classList.add(I("dfw")()),a.body&&a.body.appendChild(l),l}(s),this.containerElem_.appendChild(this.element),this.doc_=s,this.usesDefaultWrapper_=!n.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw Z.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw Z.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){t.css&&function(e,i,n){if(e.querySelector(`style[data-tp-style=${i}]`))return;const s=e.createElement("style");s.dataset.tpStyle=i,s.textContent=n,e.head.appendChild(s)}(this.document,`plugin-${t.id}`,t.css),("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(e=>{this.pool_.register(t.id,e)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[oc,cc,hc,Zr,pc]})}}new Hs("4.0.3");var fc=`#extension GL_OES_standard_derivatives : enable\r
precision mediump float;

uniform bool reflection;\r
uniform vec3 eyePosition;\r
uniform samplerCube textureUnit0;\r
uniform sampler2D textureUnit1;\r
uniform mat4 normalMatrix;\r
varying vec3 vPosition;\r
varying vec3 vNormal;  \r
varying vec2 vUV;

const float PI = 3.1415926535897932384626433832795;

float random(vec2 st){\r
  return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);\r
}

void main() {\r
  vec3 n = normalize((normalMatrix * vec4(normalize(vNormal), 0.0)).xyz);

  vec3 eyeDirection = normalize(vPosition - eyePosition);

  vec3 normal = n;

  vec3 reflectVector = normal;

  if (reflection == true) {\r
    vec3 noiseVec = vec3(0.);\r
    noiseVec.x = texture2D(textureUnit1, vec2(random(vUV))).r * 2. - 1.;\r
    noiseVec.y = texture2D(textureUnit1, vec2(random(fract(vUV + noiseVec.x)))).r * 2. - 1.;\r
    noiseVec.z = texture2D(textureUnit1, vec2(random(fract(vUV + noiseVec.y)))).r * 2. - 1.;\r
    \r
    vec3 dpdx = dFdx(vPosition);\r
    vec3 dpdy = dFdy(vPosition);\r
    normal = normalize(cross(dpdx, dpdy) + noiseVec * 0.0);

    float eta = 1.0 / 1.2;\r
    reflectVector = refract(eyeDirection, normal, eta);\r
  }\r
  vec4 envColor = textureCube(textureUnit0, reflectVector);

  gl_FragColor = envColor;\r
}`,vc=`attribute vec3 position;\r
attribute vec3 normal;\r
attribute vec2 uv;\r
uniform mat4 mMatrix;\r
uniform mat4 vpMatrix;\r
uniform float time;\r
uniform float breakRatio1;\r
uniform float breakRatio2;\r
uniform vec2 total;\r
uniform vec2 id;\r
uniform sampler2D textureUnit1;\r
uniform bool reflection;\r
uniform bool mask;\r
varying vec3 vPosition;\r
varying vec3 vNormal;\r
varying vec2 vUV;

const float PI = 3.1415926535897932384626433832795;\r
const vec2 oStrength = vec2(4., 1.);\r
const float breakRatio1_count = 1.;

mat3 axisAngle(vec3 axis, float angle) {\r
    axis = normalize(axis);\r
    float c = cos(angle);\r
    float s = sin(angle);\r
    float oc = 1.0 - c;

    return mat3(\r
        oc*axis.x*axis.x + c,         oc*axis.x*axis.y - axis.z*s, oc*axis.z*axis.x + axis.y*s,\r
        oc*axis.x*axis.y + axis.z*s,  oc*axis.y*axis.y + c,        oc*axis.y*axis.z - axis.x*s,\r
        oc*axis.z*axis.x - axis.y*s,  oc*axis.y*axis.z + axis.x*s, oc*axis.z*axis.z + c\r
    );\r
}

float random(vec2 st){\r
  return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);\r
}

float easeInOutSine(float x) {\r
  return -(cos(PI * x) - 1.) / 2.;\r
}

float easeOutQuint(float x) {\r
  return 1. - pow(1. - x, 5.);\r
}\r
float easeOutCubic(float x) {\r
  return 1. - pow(1. - x, 1.);\r
}\r
float easeOutCirc(float x) {\r
  return sqrt(1. - pow(x - 1., 2.));\r
}\r
float easeOutSine(float x) {\r
  return sin((x * PI) / 2.);\r
}\r
float easeInCubic(float x){\r
  return x * x * x;\r
}\r
float easeInSine(float x) {\r
  return 1. - cos((x * PI) / 2.);\r
}\r
float easeInQuint(float x) {\r
  return x * x * x * x * x;\r
}

float transEase(float x) {\r
  return x * -x * 2.;\r
}

vec2 transP(vec2 p, vec2 ratio, vec2 base, float interval){\r
  vec2 pUV = p + 0.5;\r
  pUV = pUV * ratio + id * ratio;\r
  pUV = fract(pUV + interval);\r
  float offset = texture2D(textureUnit1, vec2(random(pUV), random(pUV + 0.1))).r * 2. - 1.;\r
  p += offset * oStrength;\r
  p *= 1. - floor(breakRatio1 * (breakRatio1_count + 1.)) / (breakRatio1_count + 1.) * 0.04 * (mask == true ? 0. : 1.);\r
  float d = min(10., length(base + p) / length((total - 1.) / 2.));\r
  float ease = 1.;\r
  ease *= easeInCubic(d);\r
  return (base + p) * ease;\r
}

void main() {\r
  vec3 nPos = position;\r
  mat4 mMatrix_custom = mMatrix;\r
  float interval = floor(time * 1.) * 0.01 * 0.;

  if(reflection == true) {\r
    vec2 ratio = 1. / total;\r
    vec2 o = id - (total - 1.) / 2.;

    nPos.xy = transP(nPos.xy, ratio, o, interval);

    vec3 center = vec3(0.);\r
    for(float i = 0.; i < 2.; i++){\r
      vec2 xy = vec2(-0.5 + i);\r
      for(float j = 0.; j < 2.; j++){\r
        xy.x = -0.5 + j;\r
        center.xy += transP(xy, ratio, o, interval);\r
      }\r
    }\r
    center.xy /= 4.;\r
    nPos.xy -= center.xy;

    nPos.xy *= (mask == true ? 0.92 : 1.);

    float dist = 1. - min(1., length(center.xy) / length((total - 1.) / 2.));\r
    float power = easeInQuint(dist) * floor(breakRatio1 * max(1.,breakRatio1_count)) / max(1.,breakRatio1_count);\r
    power *= mask == true ? 0. : 1.;

    vec3 axis = normalize(cross(center, vec3(0., 0., -1.)));

    float blowAwayRatio = step(0.4, power);

    float power2 = (power - 0.4) / 0.6;\r
    float initY = transEase(-center.y);\r
    float scale = 4.;\r
    float baseTime = easeOutCubic(breakRatio2);\r
    float turnZ = (step(0.4 + pow(random(o * 0.03), 2.) * 0.1, power) - 0.5) * 2.;

    center.x *= 1. + (baseTime * 6.) * (1. + pow(1. - power2, 2.)) * 2. * scale * blowAwayRatio;\r
    center.y += (transEase(-center.y + baseTime * 3.) - initY) * scale * blowAwayRatio;\r
    center.z -= (baseTime * 6.) * (1. + pow(power2, 2.)) * 2. * scale * turnZ * blowAwayRatio;

    center.xy *= (mask == true ? 0.92 : 1.);

    mat3 rotM = axisAngle(axis, power * 2. + (1. + power2) * 30. * baseTime * blowAwayRatio);\r
    center.z += -power * 2.;

    mat4 transM = mat4(\r
      vec4(rotM[0], 0.),\r
      vec4(rotM[1], 0.),\r
      vec4(rotM[2], 0.),\r
      vec4(center, 1.)\r
    );\r
    mMatrix_custom = transM * mMatrix_custom;\r
  }

  mat4 mvpMatrix = vpMatrix * mMatrix_custom;\r
  if(reflection == false) {\r
    mvpMatrix[3] = vec4(vec3(0.), 1.0);\r
  }

  vPosition = (mMatrix_custom * vec4(nPos, 1.0)).xyz;\r
  vNormal = normal;\r
  vUV = uv;

  gl_Position = mvpMatrix * vec4(nPos, 1.0);\r
}`,_c=`precision mediump float;

varying vec4 vColor;\r
varying vec2 vTexCoord;

void main() {\r
  gl_FragColor = vec4(vTexCoord, 1., 1.) * vColor;\r
}`,mc=`attribute vec3 position;\r
attribute vec4 color;\r
attribute vec2 texCoord;\r
uniform mat4 mvpMatrix;\r
varying vec4 vColor;\r
varying vec2 vTexCoord;

void main() {\r
  vColor = color;\r
  vTexCoord = texCoord;\r
  gl_Position = mvpMatrix * vec4(position, 1.0);\r
}`;function Gt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ko(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var yt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},qe={duration:.5,overwrite:!1,delay:0},wr,ot,X,Vt=1e8,j=1/Vt,Dn=Math.PI*2,bc=Dn/4,gc=0,To=Math.sqrt,wc=Math.cos,xc=Math.sin,st=function(t){return typeof t=="string"},Q=function(t){return typeof t=="function"},Qt=function(t){return typeof t=="number"},xr=function(t){return typeof t>"u"},zt=function(t){return typeof t=="object"},ft=function(t){return t!==!1},yr=function(){return typeof window<"u"},Fi=function(t){return Q(t)||st(t)},Mo=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},lt=Array.isArray,Ln=/(?:-?\.?\d|\.)+/gi,So=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ue=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,wn=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Vo=/[+-]=-?[.\d]+/,Ao=/[^,'"\[\]\s]+/gi,yc=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Y,Dt,In,Pr,Pt={},$i={},Ro,Oo=function(t){return($i=Ye(t,Pt))&&bt},Cr=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},gi=function(t,e){return!e&&console.warn(t)},Do=function(t,e){return t&&(Pt[t]=e)&&$i&&($i[t]=e)||Pt},wi=function(){return 0},Pc={suppressEvents:!0,isStart:!0,kill:!1},ji={suppressEvents:!0,kill:!1},Cc={suppressEvents:!0},Er={},le=[],Un={},Lo,gt={},xn={},_s=30,Ki=[],kr="",Tr=function(t){var e=t[0],i,n;if(zt(e)||Q(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(n=Ki.length;n--&&!Ki[n].targetTest(e););i=Ki[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new sa(t[n],i)))||t.splice(n,1);return t},ye=function(t){return t._gsap||Tr(At(t))[0]._gsap},Io=function(t,e,i){return(i=t[e])&&Q(i)?t[e]():xr(i)&&t.getAttribute&&t.getAttribute(e)||i},vt=function(t,e){return(t=t.split(",")).forEach(e)||t},J=function(t){return Math.round(t*1e5)/1e5||0},it=function(t){return Math.round(t*1e7)/1e7||0},je=function(t,e){var i=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+n:i==="-"?t-n:i==="*"?t*n:t/n},Ec=function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i},Hi=function(){var t=le.length,e=le.slice(0),i,n;for(Un={},le.length=0,i=0;i<t;i++)n=e[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},Mr=function(t){return!!(t._initted||t._startAt||t.add)},Uo=function(t,e,i,n){le.length&&!ot&&Hi(),t.render(e,i,!!(ot&&e<0&&Mr(t))),le.length&&!ot&&Hi()},Fo=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(Ao).length<2?e:st(t)?t.trim():t},Bo=function(t){return t},Ct=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},kc=function(t){return function(e,i){for(var n in i)n in e||n==="duration"&&t||n==="ease"||(e[n]=i[n])}},Ye=function(t,e){for(var i in e)t[i]=e[i];return t},ms=function r(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=zt(e[i])?r(t[i]||(t[i]={}),e[i]):e[i]);return t},Wi=function(t,e){var i={},n;for(n in t)n in e||(i[n]=t[n]);return i},ui=function(t){var e=t.parent||Y,i=t.keyframes?kc(lt(t.keyframes)):Ct;if(ft(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},Tc=function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0},zo=function(t,e,i,n,s){var o=t[n],a;if(s)for(a=e[s];o&&o[s]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=o,e.parent=e._dp=t,e},on=function(t,e,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=e._prev,o=e._next;s?s._next=o:t[i]===e&&(t[i]=o),o?o._prev=s:t[n]===e&&(t[n]=s),e._next=e._prev=e.parent=null},he=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Pe=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Mc=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Fn=function(t,e,i,n){return t._startAt&&(ot?t._startAt.revert(ji):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},Sc=function r(t){return!t||t._ts&&r(t.parent)},bs=function(t){return t._repeat?$e(t._tTime,t=t.duration()+t._rDelay)*t:0},$e=function(t,e){var i=Math.floor(t=it(t/e));return t&&i===t?i-1:i},Zi=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},an=function(t){return t._end=it(t._start+(t._tDur/Math.abs(t._ts||t._rts||j)||0))},ln=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=it(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),an(t),i._dirty||Pe(i,t)),t},No=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=Zi(t.rawTime(),e),(!e._dur||Li(0,e.totalDuration(),i)-e._tTime>j)&&e.render(i,!0)),Pe(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-j}},Lt=function(t,e,i,n){return e.parent&&he(e),e._start=it((Qt(i)?i:i||t!==Y?Mt(t,i,e):t._time)+e._delay),e._end=it(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),zo(t,e,"_first","_last",t._sort?"_start":0),Bn(e)||(t._recent=e),n||No(t,e),t._ts<0&&ln(t,t._tTime),t},jo=function(t,e){return(Pt.ScrollTrigger||Cr("scrollTrigger",e))&&Pt.ScrollTrigger.create(e,t)},Ko=function(t,e,i,n,s){if(Vr(t,e,s),!t._initted)return 1;if(!i&&t._pt&&!ot&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Lo!==wt.frame)return le.push(t),t._lazy=[s,n],1},Vc=function r(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||r(e))},Bn=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Ac=function(t,e,i,n){var s=t.ratio,o=e<0||!e&&(!t._start&&Vc(t)&&!(!t._initted&&Bn(t))||(t._ts<0||t._dp._ts<0)&&!Bn(t))?0:1,a=t._rDelay,l=0,u,c,h;if(a&&t._repeat&&(l=Li(0,t._tDur,e),c=$e(l,a),t._yoyo&&c&1&&(o=1-o),c!==$e(t._tTime,a)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||ot||n||t._zTime===j||!e&&t._zTime){if(!t._initted&&Ko(t,e,n,i,l))return;for(h=t._zTime,t._zTime=e||(i?j:0),i||(i=e&&!h),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=l,u=t._pt;u;)u.r(o,u.d),u=u._next;e<0&&Fn(t,e,i,!0),t._onUpdate&&!i&&xt(t,"onUpdate"),l&&t._repeat&&!i&&t.parent&&xt(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&he(t,1),!i&&!ot&&(xt(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Rc=function(t,e,i){var n;if(i>e)for(n=t._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<e)return n;n=n._prev}},He=function(t,e,i,n){var s=t._repeat,o=it(e)||0,a=t._tTime/t._tDur;return a&&!n&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:it(o*(s+1)+t._rDelay*s):o,a>0&&!n&&ln(t,t._tTime=t._tDur*a),t.parent&&an(t),i||Pe(t.parent,t),t},gs=function(t){return t instanceof ut?Pe(t):He(t,t._dur)},Oc={_start:0,endTime:wi,totalDuration:wi},Mt=function r(t,e,i){var n=t.labels,s=t._recent||Oc,o=t.duration()>=Vt?s.endTime(!1):t._dur,a,l,u;return st(e)&&(isNaN(e)||e in n)?(l=e.charAt(0),u=e.substr(-1)==="%",a=e.indexOf("="),l==="<"||l===">"?(a>=0&&(e=e.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(u?(a<0?s:i).totalDuration()/100:1)):a<0?(e in n||(n[e]=o),n[e]):(l=parseFloat(e.charAt(a-1)+e.substr(a+1)),u&&i&&(l=l/100*(lt(i)?i[0]:i).totalDuration()),a>1?r(t,e.substr(0,a-1),i)+l:o+l)):e==null?o:+e},ci=function(t,e,i){var n=Qt(e[1]),s=(n?2:1)+(t<2?0:1),o=e[s],a,l;if(n&&(o.duration=e[1]),o.parent=i,t){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=ft(l.vars.inherit)&&l.parent;o.immediateRender=ft(a.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new et(e[0],o,e[s+1])},de=function(t,e){return t||t===0?e(t):e},Li=function(t,e,i){return i<t?t:i>e?e:i},at=function(t,e){return!st(t)||!(e=yc.exec(t))?"":e[1]},Dc=function(t,e,i){return de(i,function(n){return Li(t,e,n)})},zn=[].slice,Go=function(t,e){return t&&zt(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&zt(t[0]))&&!t.nodeType&&t!==Dt},Lc=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(n){var s;return st(n)&&!e||Go(n,1)?(s=i).push.apply(s,At(n)):i.push(n)})||i},At=function(t,e,i){return X&&!e&&X.selector?X.selector(t):st(t)&&!i&&(In||!We())?zn.call((e||Pr).querySelectorAll(t),0):lt(t)?Lc(t,i):Go(t)?zn.call(t,0):t?[t]:[]},Nn=function(t){return t=At(t)[0]||gi("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return At(e,i.querySelectorAll?i:i===t?gi("Invalid scope")||Pr.createElement("div"):t)}},Xo=function(t){return t.sort(function(){return .5-Math.random()})},qo=function(t){if(Q(t))return t;var e=zt(t)?t:{each:t},i=Ce(e.ease),n=e.from||0,s=parseFloat(e.base)||0,o={},a=n>0&&n<1,l=isNaN(n)||a,u=e.axis,c=n,h=n;return st(n)?c=h={center:.5,edges:.5,end:1}[n]||0:!a&&l&&(c=n[0],h=n[1]),function(d,f,v){var p=(v||e).length,_=o[p],m,g,w,x,b,P,y,C,E;if(!_){if(E=e.grid==="auto"?0:(e.grid||[1,Vt])[1],!E){for(y=-Vt;y<(y=v[E++].getBoundingClientRect().left)&&E<p;);E<p&&E--}for(_=o[p]=[],m=l?Math.min(E,p)*c-.5:n%E,g=E===Vt?0:l?p*h/E-.5:n/E|0,y=0,C=Vt,P=0;P<p;P++)w=P%E-m,x=g-(P/E|0),_[P]=b=u?Math.abs(u==="y"?x:w):To(w*w+x*x),b>y&&(y=b),b<C&&(C=b);n==="random"&&Xo(_),_.max=y-C,_.min=C,_.v=p=(parseFloat(e.amount)||parseFloat(e.each)*(E>p?p-1:u?u==="y"?p/E:E:Math.max(E,p/E))||0)*(n==="edges"?-1:1),_.b=p<0?s-p:s,_.u=at(e.amount||e.each)||0,i=i&&p<0?ia(i):i}return p=(_[d]-_.min)/_.max||0,it(_.b+(i?i(p):p)*_.v)+_.u}},jn=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=it(Math.round(parseFloat(i)/t)*t*e);return(n-n%1)/e+(Qt(i)?0:at(i))}},Yo=function(t,e){var i=lt(t),n,s;return!i&&zt(t)&&(n=i=t.radius||Vt,t.values?(t=At(t.values),(s=!Qt(t[0]))&&(n*=n)):t=jn(t.increment)),de(e,i?Q(t)?function(o){return s=t(o),Math.abs(s-o)<=n?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=Vt,c=0,h=t.length,d,f;h--;)s?(d=t[h].x-a,f=t[h].y-l,d=d*d+f*f):d=Math.abs(t[h]-a),d<u&&(u=d,c=h);return c=!n||u<=n?t[c]:o,s||c===o||Qt(o)?c:c+at(o)}:jn(t))},$o=function(t,e,i,n){return de(lt(t)?!e:i===!0?!!(i=0):!n,function(){return lt(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*n)/n})},Ic=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(n){return e.reduce(function(s,o){return o(s)},n)}},Uc=function(t,e){return function(i){return t(parseFloat(i))+(e||at(i))}},Fc=function(t,e,i){return Wo(t,e,0,1,i)},Ho=function(t,e,i){return de(i,function(n){return t[~~e(n)]})},Bc=function r(t,e,i){var n=e-t;return lt(t)?Ho(t,r(0,t.length),e):de(i,function(s){return(n+(s-t)%n)%n+t})},zc=function r(t,e,i){var n=e-t,s=n*2;return lt(t)?Ho(t,r(0,t.length-1),e):de(i,function(o){return o=(s+(o-t)%s)%s||0,t+(o>n?s-o:o)})},xi=function(t){for(var e=0,i="",n,s,o,a;~(n=t.indexOf("random(",e));)o=t.indexOf(")",n),a=t.charAt(n+7)==="[",s=t.substr(n+7,o-n-7).match(a?Ao:Ln),i+=t.substr(e,n-e)+$o(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),e=o+1;return i+t.substr(e,t.length-e)},Wo=function(t,e,i,n,s){var o=e-t,a=n-i;return de(s,function(l){return i+((l-t)/o*a||0)})},Nc=function r(t,e,i,n){var s=isNaN(t+e)?0:function(f){return(1-f)*t+f*e};if(!s){var o=st(t),a={},l,u,c,h,d;if(i===!0&&(n=1)&&(i=null),o)t={p:t},e={p:e};else if(lt(t)&&!lt(e)){for(c=[],h=t.length,d=h-2,u=1;u<h;u++)c.push(r(t[u-1],t[u]));h--,s=function(v){v*=h;var p=Math.min(d,~~v);return c[p](v-p)},i=e}else n||(t=Ye(lt(t)?[]:{},t));if(!c){for(l in e)Sr.call(a,t,l,"get",e[l]);s=function(v){return Or(v,a)||(o?t.p:t)}}}return de(i,s)},ws=function(t,e,i){var n=t.labels,s=Vt,o,a,l;for(o in n)a=n[o]-e,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},xt=function(t,e,i){var n=t.vars,s=n[e],o=X,a=t._ctx,l,u,c;if(s)return l=n[e+"Params"],u=n.callbackScope||t,i&&le.length&&Hi(),a&&(X=a),c=l?s.apply(u,l):s.call(u),X=o,c},ai=function(t){return he(t),t.scrollTrigger&&t.scrollTrigger.kill(!!ot),t.progress()<1&&xt(t,"onInterrupt"),t},Fe,Zo=[],Qo=function(t){if(t)if(t=!t.name&&t.default||t,yr()||t.headless){var e=t.name,i=Q(t),n=e&&!i&&t.init?function(){this._props=[]}:t,s={init:wi,render:Or,add:Sr,kill:nh,modifier:ih,rawVars:0},o={targetTest:0,get:0,getSetter:Rr,aliases:{},register:0};if(We(),t!==n){if(gt[e])return;Ct(n,Ct(Wi(t,s),o)),Ye(n.prototype,Ye(s,Wi(t,o))),gt[n.prop=e]=n,t.targetTest&&(Ki.push(n),Er[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Do(e,n),t.register&&t.register(bt,n,_t)}else Zo.push(t)},N=255,li={aqua:[0,N,N],lime:[0,N,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,N],navy:[0,0,128],white:[N,N,N],olive:[128,128,0],yellow:[N,N,0],orange:[N,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[N,0,0],pink:[N,192,203],cyan:[0,N,N],transparent:[N,N,N,0]},yn=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*N+.5|0},Jo=function(t,e,i){var n=t?Qt(t)?[t>>16,t>>8&N,t&N]:0:li.black,s,o,a,l,u,c,h,d,f,v;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),li[t])n=li[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+s+s+o+o+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&N,n&N,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&N,t&N]}else if(t.substr(0,3)==="hsl"){if(n=v=t.match(Ln),!e)l=+n[0]%360/360,u=+n[1]/100,c=+n[2]/100,o=c<=.5?c*(u+1):c+u-c*u,s=c*2-o,n.length>3&&(n[3]*=1),n[0]=yn(l+1/3,s,o),n[1]=yn(l,s,o),n[2]=yn(l-1/3,s,o);else if(~t.indexOf("="))return n=t.match(So),i&&n.length<4&&(n[3]=1),n}else n=t.match(Ln)||li.transparent;n=n.map(Number)}return e&&!v&&(s=n[0]/N,o=n[1]/N,a=n[2]/N,h=Math.max(s,o,a),d=Math.min(s,o,a),c=(h+d)/2,h===d?l=u=0:(f=h-d,u=c>.5?f/(2-h-d):f/(h+d),l=h===s?(o-a)/f+(o<a?6:0):h===o?(a-s)/f+2:(s-o)/f+4,l*=60),n[0]=~~(l+.5),n[1]=~~(u*100+.5),n[2]=~~(c*100+.5)),i&&n.length<4&&(n[3]=1),n},ta=function(t){var e=[],i=[],n=-1;return t.split(ue).forEach(function(s){var o=s.match(Ue)||[];e.push.apply(e,o),i.push(n+=o.length+1)}),e.c=i,e},xs=function(t,e,i){var n="",s=(t+n).match(ue),o=e?"hsla(":"rgba(",a=0,l,u,c,h;if(!s)return t;if(s=s.map(function(d){return(d=Jo(d,e,1))&&o+(e?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),i&&(c=ta(t),l=i.c,l.join(n)!==c.c.join(n)))for(u=t.replace(ue,"1").split(Ue),h=u.length-1;a<h;a++)n+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:i).shift());if(!u)for(u=t.split(ue),h=u.length-1;a<h;a++)n+=u[a]+s[a];return n+u[h]},ue=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in li)r+="|"+t+"\\b";return new RegExp(r+")","gi")}(),jc=/hsl[a]?\(/,ea=function(t){var e=t.join(" "),i;if(ue.lastIndex=0,ue.test(e))return i=jc.test(e),t[1]=xs(t[1],i),t[0]=xs(t[0],i,ta(t[1])),!0},yi,wt=function(){var r=Date.now,t=500,e=33,i=r(),n=i,s=1e3/240,o=s,a=[],l,u,c,h,d,f,v=function p(_){var m=r()-n,g=_===!0,w,x,b,P;if((m>t||m<0)&&(i+=m-e),n+=m,b=n-i,w=b-o,(w>0||g)&&(P=++h.frame,d=b-h.time*1e3,h.time=b=b/1e3,o+=w+(w>=s?4:s-w),x=1),g||(l=u(p)),x)for(f=0;f<a.length;f++)a[f](b,d,P,_)};return h={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(_){return d/(1e3/(_||60))},wake:function(){Ro&&(!In&&yr()&&(Dt=In=window,Pr=Dt.document||{},Pt.gsap=bt,(Dt.gsapVersions||(Dt.gsapVersions=[])).push(bt.version),Oo($i||Dt.GreenSockGlobals||!Dt.gsap&&Dt||{}),Zo.forEach(Qo)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),u=c||function(_){return setTimeout(_,o-h.time*1e3+1|0)},yi=1,v(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(l),yi=0,u=wi},lagSmoothing:function(_,m){t=_||1/0,e=Math.min(m||33,t)},fps:function(_){s=1e3/(_||240),o=h.time*1e3+s},add:function(_,m,g){var w=m?function(x,b,P,y){_(x,b,P,y),h.remove(w)}:_;return h.remove(_),a[g?"unshift":"push"](w),We(),w},remove:function(_,m){~(m=a.indexOf(_))&&a.splice(m,1)&&f>=m&&f--},_listeners:a},h}(),We=function(){return!yi&&wt.wake()},R={},Kc=/^[\d.\-M][\d.\-,\s]/,Gc=/["']/g,Xc=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),n=i[0],s=1,o=i.length,a,l,u;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),e[n]=isNaN(u)?u.replace(Gc,"").trim():+u,n=l.substr(a+1).trim();return e},qc=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<i?t.indexOf(")",i+1):i)},Yc=function(t){var e=(t+"").split("("),i=R[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[Xc(e[1])]:qc(t).split(",").map(Fo)):R._CE&&Kc.test(t)?R._CE("",t):i},ia=function(t){return function(e){return 1-t(1-e)}},na=function r(t,e){for(var i=t._first,n;i;)i instanceof ut?r(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?r(i.timeline,e):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=e)),i=i._next},Ce=function(t,e){return t&&(Q(t)?t:R[t]||Yc(t))||e},Re=function(t,e,i,n){i===void 0&&(i=function(l){return 1-e(1-l)}),n===void 0&&(n=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var s={easeIn:e,easeOut:i,easeInOut:n},o;return vt(t,function(a){R[a]=Pt[a]=s,R[o=a.toLowerCase()]=i;for(var l in s)R[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=R[a+"."+l]=s[l]}),s},ra=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Pn=function r(t,e,i){var n=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),o=s/Dn*(Math.asin(1/n)||0),a=function(c){return c===1?1:n*Math.pow(2,-10*c)*xc((c-o)*s)+1},l=t==="out"?a:t==="in"?function(u){return 1-a(1-u)}:ra(a);return s=Dn/s,l.config=function(u,c){return r(t,u,c)},l},Cn=function r(t,e){e===void 0&&(e=1.70158);var i=function(o){return o?--o*o*((e+1)*o+e)+1:0},n=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:ra(i);return n.config=function(s){return r(t,s)},n};vt("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,t){var e=t<5?t+1:t;Re(r+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});R.Linear.easeNone=R.none=R.Linear.easeIn;Re("Elastic",Pn("in"),Pn("out"),Pn());(function(r,t){var e=1/t,i=2*e,n=2.5*e,s=function(a){return a<e?r*a*a:a<i?r*Math.pow(a-1.5/t,2)+.75:a<n?r*(a-=2.25/t)*a+.9375:r*Math.pow(a-2.625/t,2)+.984375};Re("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Re("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});Re("Circ",function(r){return-(To(1-r*r)-1)});Re("Sine",function(r){return r===1?1:-wc(r*bc)+1});Re("Back",Cn("in"),Cn("out"),Cn());R.SteppedEase=R.steps=Pt.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,n=t+(e?0:1),s=e?1:0,o=1-j;return function(a){return((n*Li(0,o,a)|0)+s)*i}}};qe.ease=R["quad.out"];vt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return kr+=r+","+r+"Params,"});var sa=function(t,e){this.id=gc++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Io,this.set=e?e.getSetter:Rr},Pi=function(){function r(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,He(this,+e.duration,1,1),this.data=e.data,X&&(this._ctx=X,X.data.push(this)),yi||wt.wake()}var t=r.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,He(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,n){if(We(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(ln(this,i),!s._dp||s.parent||No(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Lt(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===j||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Uo(this,i,n)),this},t.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+bs(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},t.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+bs(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,n):this._repeat?$e(this._tTime,s)+1:1},t.timeScale=function(i,n){if(!arguments.length)return this._rts===-j?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?Zi(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-j?0:this._rts,this.totalTime(Li(-Math.abs(this._delay),this.totalDuration(),s),n!==!1),an(this),Mc(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(We(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==j&&(this._tTime-=j)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&Lt(n,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(ft(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Zi(n.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=Cc);var n=ot;return ot=i,Mr(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),ot=n,this},t.globalTime=function(i){for(var n=this,s=arguments.length?i:n.rawTime();n;)s=n._start+s/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,gs(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,gs(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,n){return this.totalTime(Mt(this,i),ft(n))},t.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,ft(n)),this._dur||(this._zTime=-j),this},t.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},t.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-j:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-j,this},t.isActive=function(){var i=this.parent||this._dp,n=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=n&&s<this.endTime(!0)-j)},t.eventCallback=function(i,n,s){var o=this.vars;return arguments.length>1?(n?(o[i]=n,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=n)):delete o[i],this):o[i]},t.then=function(i){var n=this;return new Promise(function(s){var o=Q(i)?i:Bo,a=function(){var u=n.then;n.then=null,Q(o)&&(o=o(n))&&(o.then||o===n)&&(n.then=u),s(o),n.then=u};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?a():n._prom=a})},t.kill=function(){ai(this)},r}();Ct(Pi.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-j,_prom:0,_ps:!1,_rts:1});var ut=function(r){ko(t,r);function t(i,n){var s;return i===void 0&&(i={}),s=r.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=ft(i.sortChildren),Y&&Lt(i.parent||Y,Gt(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&jo(Gt(s),i.scrollTrigger),s}var e=t.prototype;return e.to=function(n,s,o){return ci(0,arguments,this),this},e.from=function(n,s,o){return ci(1,arguments,this),this},e.fromTo=function(n,s,o,a){return ci(2,arguments,this),this},e.set=function(n,s,o){return s.duration=0,s.parent=this,ui(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new et(n,s,Mt(this,o),1),this},e.call=function(n,s,o){return Lt(this,et.delayedCall(0,n,s),o)},e.staggerTo=function(n,s,o,a,l,u,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=c,o.parent=this,new et(n,o,Mt(this,l)),this},e.staggerFrom=function(n,s,o,a,l,u,c){return o.runBackwards=1,ui(o).immediateRender=ft(o.immediateRender),this.staggerTo(n,s,o,a,l,u,c)},e.staggerFromTo=function(n,s,o,a,l,u,c,h){return a.startAt=o,ui(a).immediateRender=ft(a.immediateRender),this.staggerTo(n,s,a,l,u,c,h)},e.render=function(n,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,c=n<=0?0:it(n),h=this._zTime<0!=n<0&&(this._initted||!u),d,f,v,p,_,m,g,w,x,b,P,y;if(this!==Y&&c>l&&n>=0&&(c=l),c!==this._tTime||o||h){if(a!==this._time&&u&&(c+=this._time-a,n+=this._time-a),d=c,x=this._start,w=this._ts,m=!w,h&&(u||(a=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(P=this._yoyo,_=u+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(_*100+n,s,o);if(d=it(c%_),c===l?(p=this._repeat,d=u):(b=it(c/_),p=~~b,p&&p===b&&(d=u,p--),d>u&&(d=u)),b=$e(this._tTime,_),!a&&this._tTime&&b!==p&&this._tTime-b*_-this._dur<=0&&(b=p),P&&p&1&&(d=u-d,y=1),p!==b&&!this._lock){var C=P&&b&1,E=C===(P&&p&1);if(p<b&&(C=!C),a=C?0:c%u?u:c,this._lock=1,this.render(a||(y?0:it(p*_)),s,!u)._lock=0,this._tTime=c,!s&&this.parent&&xt(this,"onRepeat"),this.vars.repeatRefresh&&!y&&(this.invalidate()._lock=1),a&&a!==this._time||m!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,E&&(this._lock=2,a=C?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!y&&this.invalidate()),this._lock=0,!this._ts&&!m)return this;na(this,y)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(g=Rc(this,it(a),it(d)),g&&(c-=d-(d=g._start))),this._tTime=c,this._time=d,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,a=0),!a&&c&&!s&&!b&&(xt(this,"onStart"),this._tTime!==c))return this;if(d>=a&&n>=0)for(f=this._first;f;){if(v=f._next,(f._act||d>=f._start)&&f._ts&&g!==f){if(f.parent!==this)return this.render(n,s,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,s,o),d!==this._time||!this._ts&&!m){g=0,v&&(c+=this._zTime=-j);break}}f=v}else{f=this._last;for(var k=n<0?n:d;f;){if(v=f._prev,(f._act||k<=f._end)&&f._ts&&g!==f){if(f.parent!==this)return this.render(n,s,o);if(f.render(f._ts>0?(k-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(k-f._start)*f._ts,s,o||ot&&Mr(f)),d!==this._time||!this._ts&&!m){g=0,v&&(c+=this._zTime=k?-j:j);break}}f=v}}if(g&&!s&&(this.pause(),g.render(d>=a?0:-j)._zTime=d>=a?1:-1,this._ts))return this._start=x,an(this),this.render(n,s,o);this._onUpdate&&!s&&xt(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(x===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((n||!u)&&(c===l&&this._ts>0||!c&&this._ts<0)&&he(this,1),!s&&!(n<0&&!a)&&(c||a||!l)&&(xt(this,c===l&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(n,s){var o=this;if(Qt(s)||(s=Mt(this,s,n)),!(n instanceof Pi)){if(lt(n))return n.forEach(function(a){return o.add(a,s)}),this;if(st(n))return this.addLabel(n,s);if(Q(n))n=et.delayedCall(0,n);else return this}return this!==n?Lt(this,n,s):this},e.getChildren=function(n,s,o,a){n===void 0&&(n=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Vt);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof et?s&&l.push(u):(o&&l.push(u),n&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},e.getById=function(n){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===n)return s[o]},e.remove=function(n){return st(n)?this.removeLabel(n):Q(n)?this.killTweensOf(n):(n.parent===this&&on(this,n),n===this._recent&&(this._recent=this._last),Pe(this))},e.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=it(wt.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),r.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},e.addLabel=function(n,s){return this.labels[n]=Mt(this,s),this},e.removeLabel=function(n){return delete this.labels[n],this},e.addPause=function(n,s,o){var a=et.delayedCall(0,s||wi,o);return a.data="isPause",this._hasPause=1,Lt(this,a,Mt(this,n))},e.removePause=function(n){var s=this._first;for(n=Mt(this,n);s;)s._start===n&&s.data==="isPause"&&he(s),s=s._next},e.killTweensOf=function(n,s,o){for(var a=this.getTweensOf(n,o),l=a.length;l--;)re!==a[l]&&a[l].kill(n,s);return this},e.getTweensOf=function(n,s){for(var o=[],a=At(n),l=this._first,u=Qt(s),c;l;)l instanceof et?Ec(l._targets,a)&&(u?(!re||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(c=l.getTweensOf(a,s)).length&&o.push.apply(o,c),l=l._next;return o},e.tweenTo=function(n,s){s=s||{};var o=this,a=Mt(o,n),l=s,u=l.startAt,c=l.onStart,h=l.onStartParams,d=l.immediateRender,f,v=et.to(o,Ct({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||j,onStart:function(){if(o.pause(),!f){var _=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());v._dur!==_&&He(v,_,0,1).render(v._time,!0,!0),f=1}c&&c.apply(v,h||[])}},s));return d?v.render(0):v},e.tweenFromTo=function(n,s,o){return this.tweenTo(s,Ct({startAt:{time:Mt(this,n)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(n){return n===void 0&&(n=this._time),ws(this,Mt(this,n))},e.previousLabel=function(n){return n===void 0&&(n=this._time),ws(this,Mt(this,n),1)},e.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+j)},e.shiftChildren=function(n,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=n,a._end+=n),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=n);return Pe(this)},e.invalidate=function(n){var s=this._first;for(this._lock=0;s;)s.invalidate(n),s=s._next;return r.prototype.invalidate.call(this,n)},e.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),Pe(this)},e.totalDuration=function(n){var s=0,o=this,a=o._last,l=Vt,u,c,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-n:n));if(o._dirty){for(h=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Lt(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(s-=c,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;He(o,o===Y&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(n){if(Y._ts&&(Uo(Y,Zi(n,Y)),Lo=wt.frame),wt.frame>=_s){_s+=yt.autoSleep||120;var s=Y._first;if((!s||!s._ts)&&yt.autoSleep&&wt._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||wt.sleep()}}},t}(Pi);Ct(ut.prototype,{_lock:0,_hasPause:0,_forcing:0});var $c=function(t,e,i,n,s,o,a){var l=new _t(this._pt,t,e,0,1,ha,null,s),u=0,c=0,h,d,f,v,p,_,m,g;for(l.b=i,l.e=n,i+="",n+="",(m=~n.indexOf("random("))&&(n=xi(n)),o&&(g=[i,n],o(g,t,e),i=g[0],n=g[1]),d=i.match(wn)||[];h=wn.exec(n);)v=h[0],p=n.substring(u,h.index),f?f=(f+1)%5:p.substr(-5)==="rgba("&&(f=1),v!==d[c++]&&(_=parseFloat(d[c-1])||0,l._pt={_next:l._pt,p:p||c===1?p:",",s:_,c:v.charAt(1)==="="?je(_,v)-_:parseFloat(v)-_,m:f&&f<4?Math.round:0},u=wn.lastIndex);return l.c=u<n.length?n.substring(u,n.length):"",l.fp=a,(Vo.test(n)||m)&&(l.e=0),this._pt=l,l},Sr=function(t,e,i,n,s,o,a,l,u,c){Q(n)&&(n=n(s||0,t,o));var h=t[e],d=i!=="get"?i:Q(h)?u?t[e.indexOf("set")||!Q(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():h,f=Q(h)?u?Jc:ua:Ar,v;if(st(n)&&(~n.indexOf("random(")&&(n=xi(n)),n.charAt(1)==="="&&(v=je(d,n)+(at(d)||0),(v||v===0)&&(n=v))),!c||d!==n||Kn)return!isNaN(d*n)&&n!==""?(v=new _t(this._pt,t,e,+d||0,n-(d||0),typeof h=="boolean"?eh:ca,0,f),u&&(v.fp=u),a&&v.modifier(a,this,t),this._pt=v):(!h&&!(e in t)&&Cr(e,n),$c.call(this,t,e,d,n,f,l||yt.stringFilter,u))},Hc=function(t,e,i,n,s){if(Q(t)&&(t=hi(t,s,e,i,n)),!zt(t)||t.style&&t.nodeType||lt(t)||Mo(t))return st(t)?hi(t,s,e,i,n):t;var o={},a;for(a in t)o[a]=hi(t[a],s,e,i,n);return o},oa=function(t,e,i,n,s,o){var a,l,u,c;if(gt[t]&&(a=new gt[t]).init(s,a.rawVars?e[t]:Hc(e[t],n,s,o,i),i,n,o)!==!1&&(i._pt=l=new _t(i._pt,s,t,0,1,a.render,a,0,a.priority),i!==Fe))for(u=i._ptLookup[i._targets.indexOf(s)],c=a._props.length;c--;)u[a._props[c]]=l;return a},re,Kn,Vr=function r(t,e,i){var n=t.vars,s=n.ease,o=n.startAt,a=n.immediateRender,l=n.lazy,u=n.onUpdate,c=n.runBackwards,h=n.yoyoEase,d=n.keyframes,f=n.autoRevert,v=t._dur,p=t._startAt,_=t._targets,m=t.parent,g=m&&m.data==="nested"?m.vars.targets:_,w=t._overwrite==="auto"&&!wr,x=t.timeline,b,P,y,C,E,k,V,M,S,D,O,T,z;if(x&&(!d||!s)&&(s="none"),t._ease=Ce(s,qe.ease),t._yEase=h?ia(Ce(h===!0?s:h,qe.ease)):0,h&&t._yoyo&&!t._repeat&&(h=t._yEase,t._yEase=t._ease,t._ease=h),t._from=!x&&!!n.runBackwards,!x||d&&!n.stagger){if(M=_[0]?ye(_[0]).harness:0,T=M&&n[M.prop],b=Wi(n,Er),p&&(p._zTime<0&&p.progress(1),e<0&&c&&a&&!f?p.render(-1,!0):p.revert(c&&v?ji:Pc),p._lazy=0),o){if(he(t._startAt=et.set(_,Ct({data:"isStart",overwrite:!1,parent:m,immediateRender:!0,lazy:!p&&ft(l),startAt:null,delay:0,onUpdate:u&&function(){return xt(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(ot||!a&&!f)&&t._startAt.revert(ji),a&&v&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(c&&v&&!p){if(e&&(a=!1),y=Ct({overwrite:!1,data:"isFromStart",lazy:a&&!p&&ft(l),immediateRender:a,stagger:0,parent:m},b),T&&(y[M.prop]=T),he(t._startAt=et.set(_,y)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(ot?t._startAt.revert(ji):t._startAt.render(-1,!0)),t._zTime=e,!a)r(t._startAt,j,j);else if(!e)return}for(t._pt=t._ptCache=0,l=v&&ft(l)||l&&!v,P=0;P<_.length;P++){if(E=_[P],V=E._gsap||Tr(_)[P]._gsap,t._ptLookup[P]=D={},Un[V.id]&&le.length&&Hi(),O=g===_?P:g.indexOf(E),M&&(S=new M).init(E,T||b,t,O,g)!==!1&&(t._pt=C=new _t(t._pt,E,S.name,0,1,S.render,S,0,S.priority),S._props.forEach(function(tt){D[tt]=C}),S.priority&&(k=1)),!M||T)for(y in b)gt[y]&&(S=oa(y,b,t,O,E,g))?S.priority&&(k=1):D[y]=C=Sr.call(t,E,y,"get",b[y],O,g,0,n.stringFilter);t._op&&t._op[P]&&t.kill(E,t._op[P]),w&&t._pt&&(re=t,Y.killTweensOf(E,D,t.globalTime(e)),z=!t.parent,re=0),t._pt&&l&&(Un[V.id]=1)}k&&pa(t),t._onInit&&t._onInit(t)}t._onUpdate=u,t._initted=(!t._op||t._pt)&&!z,d&&e<=0&&x.render(Vt,!0,!0)},Wc=function(t,e,i,n,s,o,a,l){var u=(t._pt&&t._ptCache||(t._ptCache={}))[e],c,h,d,f;if(!u)for(u=t._ptCache[e]=[],d=t._ptLookup,f=t._targets.length;f--;){if(c=d[f][e],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==e&&c.fp!==e;)c=c._next;if(!c)return Kn=1,t.vars[e]="+=0",Vr(t,a),Kn=0,l?gi(e+" not eligible for reset"):1;u.push(c)}for(f=u.length;f--;)h=u[f],c=h._pt||h,c.s=(n||n===0)&&!s?n:c.s+(n||0)+o*c.c,c.c=i-c.s,h.e&&(h.e=J(i)+at(h.e)),h.b&&(h.b=c.s+at(h.b))},Zc=function(t,e){var i=t[0]?ye(t[0]).harness:0,n=i&&i.aliases,s,o,a,l;if(!n)return e;s=Ye({},e);for(o in n)if(o in s)for(l=n[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},Qc=function(t,e,i,n){var s=e.ease||n||"power1.inOut",o,a;if(lt(e))a=i[t]||(i[t]=[]),e.forEach(function(l,u){return a.push({t:u/(e.length-1)*100,v:l,e:s})});else for(o in e)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(t),v:e[o],e:s})},hi=function(t,e,i,n,s){return Q(t)?t.call(e,i,n,s):st(t)&&~t.indexOf("random(")?xi(t):t},aa=kr+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",la={};vt(aa+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return la[r]=1});var et=function(r){ko(t,r);function t(i,n,s,o){var a;typeof n=="number"&&(s.duration=n,n=s,s=null),a=r.call(this,o?n:ui(n))||this;var l=a.vars,u=l.duration,c=l.delay,h=l.immediateRender,d=l.stagger,f=l.overwrite,v=l.keyframes,p=l.defaults,_=l.scrollTrigger,m=l.yoyoEase,g=n.parent||Y,w=(lt(i)||Mo(i)?Qt(i[0]):"length"in n)?[i]:At(i),x,b,P,y,C,E,k,V;if(a._targets=w.length?Tr(w):gi("GSAP target "+i+" not found. https://gsap.com",!yt.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,v||d||Fi(u)||Fi(c)){if(n=a.vars,x=a.timeline=new ut({data:"nested",defaults:p||{},targets:g&&g.data==="nested"?g.vars.targets:w}),x.kill(),x.parent=x._dp=Gt(a),x._start=0,d||Fi(u)||Fi(c)){if(y=w.length,k=d&&qo(d),zt(d))for(C in d)~aa.indexOf(C)&&(V||(V={}),V[C]=d[C]);for(b=0;b<y;b++)P=Wi(n,la),P.stagger=0,m&&(P.yoyoEase=m),V&&Ye(P,V),E=w[b],P.duration=+hi(u,Gt(a),b,E,w),P.delay=(+hi(c,Gt(a),b,E,w)||0)-a._delay,!d&&y===1&&P.delay&&(a._delay=c=P.delay,a._start+=c,P.delay=0),x.to(E,P,k?k(b,E,w):0),x._ease=R.none;x.duration()?u=c=0:a.timeline=0}else if(v){ui(Ct(x.vars.defaults,{ease:"none"})),x._ease=Ce(v.ease||n.ease||"none");var M=0,S,D,O;if(lt(v))v.forEach(function(T){return x.to(w,T,">")}),x.duration();else{P={};for(C in v)C==="ease"||C==="easeEach"||Qc(C,v[C],P,v.easeEach);for(C in P)for(S=P[C].sort(function(T,z){return T.t-z.t}),M=0,b=0;b<S.length;b++)D=S[b],O={ease:D.e,duration:(D.t-(b?S[b-1].t:0))/100*u},O[C]=D.v,x.to(w,O,M),M+=O.duration;x.duration()<u&&x.to({},{duration:u-x.duration()})}}u||a.duration(u=x.duration())}else a.timeline=0;return f===!0&&!wr&&(re=Gt(a),Y.killTweensOf(w),re=0),Lt(g,Gt(a),s),n.reversed&&a.reverse(),n.paused&&a.paused(!0),(h||!u&&!v&&a._start===it(g._time)&&ft(h)&&Sc(Gt(a))&&g.data!=="nested")&&(a._tTime=-j,a.render(Math.max(0,-c)||0)),_&&jo(Gt(a),_),a}var e=t.prototype;return e.render=function(n,s,o){var a=this._time,l=this._tDur,u=this._dur,c=n<0,h=n>l-j&&!c?l:n<j?0:n,d,f,v,p,_,m,g,w,x;if(!u)Ac(this,n,s,o);else if(h!==this._tTime||!n||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c||this._lazy){if(d=h,w=this.timeline,this._repeat){if(p=u+this._rDelay,this._repeat<-1&&c)return this.totalTime(p*100+n,s,o);if(d=it(h%p),h===l?(v=this._repeat,d=u):(_=it(h/p),v=~~_,v&&v===_?(d=u,v--):d>u&&(d=u)),m=this._yoyo&&v&1,m&&(x=this._yEase,d=u-d),_=$e(this._tTime,p),d===a&&!o&&this._initted&&v===_)return this._tTime=h,this;v!==_&&(w&&this._yEase&&na(w,m),this.vars.repeatRefresh&&!m&&!this._lock&&d!==p&&this._initted&&(this._lock=o=1,this.render(it(p*v),!0).invalidate()._lock=0))}if(!this._initted){if(Ko(this,c?n:d,o,s,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&v!==_))return this;if(u!==this._dur)return this.render(n,s,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=g=(x||this._ease)(d/u),this._from&&(this.ratio=g=1-g),!a&&h&&!s&&!_&&(xt(this,"onStart"),this._tTime!==h))return this;for(f=this._pt;f;)f.r(g,f.d),f=f._next;w&&w.render(n<0?n:w._dur*w._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(c&&Fn(this,n,s,o),xt(this,"onUpdate")),this._repeat&&v!==_&&this.vars.onRepeat&&!s&&this.parent&&xt(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(c&&!this._onUpdate&&Fn(this,n,!0,!0),(n||!u)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&he(this,1),!s&&!(c&&!a)&&(h||a||m)&&(xt(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),r.prototype.invalidate.call(this,n)},e.resetTo=function(n,s,o,a,l){yi||wt.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||Vr(this,u),c=this._ease(u/this._dur),Wc(this,n,s,o,a,c,u,l)?this.resetTo(n,s,o,a,1):(ln(this,0),this.parent||zo(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?ai(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ot),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,re&&re.vars.overwrite!==!0)._first||ai(this),this.parent&&o!==this.timeline.totalDuration()&&He(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=n?At(n):a,u=this._ptLookup,c=this._pt,h,d,f,v,p,_,m;if((!s||s==="all")&&Tc(a,l))return s==="all"&&(this._pt=0),ai(this);for(h=this._op=this._op||[],s!=="all"&&(st(s)&&(p={},vt(s,function(g){return p[g]=1}),s=p),s=Zc(a,s)),m=a.length;m--;)if(~l.indexOf(a[m])){d=u[m],s==="all"?(h[m]=s,v=d,f={}):(f=h[m]=h[m]||{},v=s);for(p in v)_=d&&d[p],_&&((!("kill"in _.d)||_.d.kill(p)===!0)&&on(this,_,"_pt"),delete d[p]),f!=="all"&&(f[p]=1)}return this._initted&&!this._pt&&c&&ai(this),this},t.to=function(n,s){return new t(n,s,arguments[2])},t.from=function(n,s){return ci(1,arguments)},t.delayedCall=function(n,s,o,a){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(n,s,o){return ci(2,arguments)},t.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(n,s)},t.killTweensOf=function(n,s,o){return Y.killTweensOf(n,s,o)},t}(Pi);Ct(et.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});vt("staggerTo,staggerFrom,staggerFromTo",function(r){et[r]=function(){var t=new ut,e=zn.call(arguments,0);return e.splice(r==="staggerFromTo"?5:4,0,0),t[r].apply(t,e)}});var Ar=function(t,e,i){return t[e]=i},ua=function(t,e,i){return t[e](i)},Jc=function(t,e,i,n){return t[e](n.fp,i)},th=function(t,e,i){return t.setAttribute(e,i)},Rr=function(t,e){return Q(t[e])?ua:xr(t[e])&&t.setAttribute?th:Ar},ca=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},eh=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},ha=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(t===1&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},Or=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},ih=function(t,e,i,n){for(var s=this._pt,o;s;)o=s._next,s.p===n&&s.modifier(t,e,i),s=o},nh=function(t){for(var e=this._pt,i,n;e;)n=e._next,e.p===t&&!e.op||e.op===t?on(this,e,"_pt"):e.dep||(i=1),e=n;return!i},rh=function(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)},pa=function(t){for(var e=t._pt,i,n,s,o;e;){for(i=e._next,n=s;n&&n.pr>e.pr;)n=n._next;(e._prev=n?n._prev:o)?e._prev._next=e:s=e,(e._next=n)?n._prev=e:o=e,e=i}t._pt=s},_t=function(){function r(e,i,n,s,o,a,l,u,c){this.t=i,this.s=s,this.c=o,this.p=n,this.r=a||ca,this.d=l||this,this.set=u||Ar,this.pr=c||0,this._next=e,e&&(e._prev=this)}var t=r.prototype;return t.modifier=function(i,n,s){this.mSet=this.mSet||this.set,this.set=rh,this.m=i,this.mt=s,this.tween=n},r}();vt(kr+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return Er[r]=1});Pt.TweenMax=Pt.TweenLite=et;Pt.TimelineLite=Pt.TimelineMax=ut;Y=new ut({sortChildren:!1,defaults:qe,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});yt.stringFilter=ea;var Ee=[],Gi={},sh=[],ys=0,oh=0,En=function(t){return(Gi[t]||sh).map(function(e){return e()})},Gn=function(){var t=Date.now(),e=[];t-ys>2&&(En("matchMediaInit"),Ee.forEach(function(i){var n=i.queries,s=i.conditions,o,a,l,u;for(a in n)o=Dt.matchMedia(n[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(i.revert(),l&&e.push(i))}),En("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),ys=t,En("matchMedia"))},da=function(){function r(e,i){this.selector=i&&Nn(i),this.data=[],this._r=[],this.isReverted=!1,this.id=oh++,e&&this.add(e)}var t=r.prototype;return t.add=function(i,n,s){Q(i)&&(s=n,n=i,i=Q);var o=this,a=function(){var u=X,c=o.selector,h;return u&&u!==o&&u.data.push(o),s&&(o.selector=Nn(s)),X=o,h=n.apply(o,arguments),Q(h)&&o._r.push(h),X=u,o.selector=c,o.isReverted=!1,h};return o.last=a,i===Q?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},t.ignore=function(i){var n=X;X=null,i(this),X=n},t.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof r?i.push.apply(i,n.getTweens()):n instanceof et&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,n){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,u;l--;)u=s.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(c){return a.splice(a.indexOf(c),1)}));for(a.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,h){return h.g-c.g||-1/0}).forEach(function(c){return c.t.revert(i)}),l=s.data.length;l--;)u=s.data[l],u instanceof ut?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof et)&&u.revert&&u.revert(i);s._r.forEach(function(c){return c(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),n)for(var o=Ee.length;o--;)Ee[o].id===this.id&&Ee.splice(o,1)},t.revert=function(i){this.kill(i||{})},r}(),ah=function(){function r(e){this.contexts=[],this.scope=e,X&&X.data.push(this)}var t=r.prototype;return t.add=function(i,n,s){zt(i)||(i={matches:i});var o=new da(0,s||this.scope),a=o.conditions={},l,u,c;X&&!o.selector&&(o.selector=X.selector),this.contexts.push(o),n=o.add("onMatch",n),o.queries=i;for(u in i)u==="all"?c=1:(l=Dt.matchMedia(i[u]),l&&(Ee.indexOf(o)<0&&Ee.push(o),(a[u]=l.matches)&&(c=1),l.addListener?l.addListener(Gn):l.addEventListener("change",Gn)));return c&&n(o,function(h){return o.add(null,h)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},r}(),Qi={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(n){return Qo(n)})},timeline:function(t){return new ut(t)},getTweensOf:function(t,e){return Y.getTweensOf(t,e)},getProperty:function(t,e,i,n){st(t)&&(t=At(t)[0]);var s=ye(t||{}).get,o=i?Bo:Fo;return i==="native"&&(i=""),t&&(e?o((gt[e]&&gt[e].get||s)(t,e,i,n)):function(a,l,u){return o((gt[a]&&gt[a].get||s)(t,a,l,u))})},quickSetter:function(t,e,i){if(t=At(t),t.length>1){var n=t.map(function(c){return bt.quickSetter(c,e,i)}),s=n.length;return function(c){for(var h=s;h--;)n[h](c)}}t=t[0]||{};var o=gt[e],a=ye(t),l=a.harness&&(a.harness.aliases||{})[e]||e,u=o?function(c){var h=new o;Fe._pt=0,h.init(t,i?c+i:c,Fe,0,[t]),h.render(1,h),Fe._pt&&Or(1,Fe)}:a.set(t,l);return o?u:function(c){return u(t,l,i?c+i:c,a,1)}},quickTo:function(t,e,i){var n,s=bt.to(t,Ct((n={},n[e]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),o=function(l,u,c){return s.resetTo(e,l,u,c)};return o.tween=s,o},isTweening:function(t){return Y.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Ce(t.ease,qe.ease)),ms(qe,t||{})},config:function(t){return ms(yt,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,s=t.defaults,o=t.extendTimeline;(n||"").split(",").forEach(function(a){return a&&!gt[a]&&!Pt[a]&&gi(e+" effect requires "+a+" plugin.")}),xn[e]=function(a,l,u){return i(At(a),Ct(l||{},s),u)},o&&(ut.prototype[e]=function(a,l,u){return this.add(xn[e](a,zt(l)?l:(u=l)&&{},this),u)})},registerEase:function(t,e){R[t]=Ce(e)},parseEase:function(t,e){return arguments.length?Ce(t,e):R},getById:function(t){return Y.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new ut(t),n,s;for(i.smoothChildTiming=ft(t.smoothChildTiming),Y.remove(i),i._dp=0,i._time=i._tTime=Y._time,n=Y._first;n;)s=n._next,(e||!(!n._dur&&n instanceof et&&n.vars.onComplete===n._targets[0]))&&Lt(i,n,n._start-n._delay),n=s;return Lt(Y,i,0),i},context:function(t,e){return t?new da(t,e):X},matchMedia:function(t){return new ah(t)},matchMediaRefresh:function(){return Ee.forEach(function(t){var e=t.conditions,i,n;for(n in e)e[n]&&(e[n]=!1,i=1);i&&t.revert()})||Gn()},addEventListener:function(t,e){var i=Gi[t]||(Gi[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=Gi[t],n=i&&i.indexOf(e);n>=0&&i.splice(n,1)},utils:{wrap:Bc,wrapYoyo:zc,distribute:qo,random:$o,snap:Yo,normalize:Fc,getUnit:at,clamp:Dc,splitColor:Jo,toArray:At,selector:Nn,mapRange:Wo,pipe:Ic,unitize:Uc,interpolate:Nc,shuffle:Xo},install:Oo,effects:xn,ticker:wt,updateRoot:ut.updateRoot,plugins:gt,globalTimeline:Y,core:{PropTween:_t,globals:Do,Tween:et,Timeline:ut,Animation:Pi,getCache:ye,_removeLinkedListItem:on,reverting:function(){return ot},context:function(t){return t&&X&&(X.data.push(t),t._ctx=X),X},suppressOverwrites:function(t){return wr=t}}};vt("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return Qi[r]=et[r]});wt.add(ut.updateRoot);Fe=Qi.to({},{duration:0});var lh=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},uh=function(t,e){var i=t._targets,n,s,o;for(n in e)for(s=i.length;s--;)o=t._ptLookup[s][n],o&&(o=o.d)&&(o._pt&&(o=lh(o,n)),o&&o.modifier&&o.modifier(e[n],t,i[s],n))},kn=function(t,e){return{name:t,headless:1,rawVars:1,init:function(n,s,o){o._onInit=function(a){var l,u;if(st(s)&&(l={},vt(s,function(c){return l[c]=1}),s=l),e){l={};for(u in s)l[u]=e(s[u]);s=l}uh(a,s)}}}},bt=Qi.registerPlugin({name:"attr",init:function(t,e,i,n,s){var o,a,l;this.tween=i;for(o in e)l=t.getAttribute(o)||"",a=this.add(t,"setAttribute",(l||0)+"",e[o],n,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(t,e){for(var i=e._pt;i;)ot?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},kn("roundProps",jn),kn("modifiers"),kn("snap",Yo))||Qi;et.version=ut.version=bt.version="3.13.0";Ro=1;yr()&&We();R.Power0;R.Power1;R.Power2;R.Power3;R.Power4;R.Linear;R.Quad;R.Cubic;R.Quart;R.Quint;R.Strong;R.Elastic;R.Back;R.SteppedEase;R.Bounce;R.Sine;R.Expo;R.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ps,se,Ke,Dr,xe,Cs,Lr,ch=function(){return typeof window<"u"},Jt={},ge=180/Math.PI,Ge=Math.PI/180,Le=Math.atan2,Es=1e8,Ir=/([A-Z])/g,hh=/(left|right|width|margin|padding|x)/i,ph=/[\s,\(]\S/,Ut={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Xn=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},dh=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},fh=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},vh=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},fa=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},va=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},_h=function(t,e,i){return t.style[e]=i},mh=function(t,e,i){return t.style.setProperty(e,i)},bh=function(t,e,i){return t._gsap[e]=i},gh=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},wh=function(t,e,i,n,s){var o=t._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},xh=function(t,e,i,n,s){var o=t._gsap;o[e]=i,o.renderTransform(s,o)},$="transform",mt=$+"Origin",yh=function r(t,e){var i=this,n=this.target,s=n.style,o=n._gsap;if(t in Jt&&s){if(this.tfm=this.tfm||{},t!=="transform")t=Ut[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return i.tfm[a]=Xt(n,a)}):this.tfm[t]=o.x?o[t]:Xt(n,t),t===mt&&(this.tfm.zOrigin=o.zOrigin);else return Ut.transform.split(",").forEach(function(a){return r.call(i,a,e)});if(this.props.indexOf($)>=0)return;o.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(mt,e,"")),t=$}(s||e)&&this.props.push(t,e,s[t])},_a=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Ph=function(){var t=this.props,e=this.target,i=e.style,n=e._gsap,s,o;for(s=0;s<t.length;s+=3)t[s+1]?t[s+1]===2?e[t[s]](t[s+2]):e[t[s]]=t[s+2]:t[s+2]?i[t[s]]=t[s+2]:i.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(Ir,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)n[o]=this.tfm[o];n.svg&&(n.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=Lr(),(!s||!s.isStart)&&!i[$]&&(_a(i),n.zOrigin&&i[mt]&&(i[mt]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},ma=function(t,e){var i={target:t,props:[],revert:Ph,save:yh};return t._gsap||bt.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(n){return i.save(n)}),i},ba,qn=function(t,e){var i=se.createElementNS?se.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):se.createElement(t);return i&&i.style?i:se.createElement(t)},Rt=function r(t,e,i){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(Ir,"-$1").toLowerCase())||n.getPropertyValue(e)||!i&&r(t,Ze(e)||e,1)||""},ks="O,Moz,ms,Ms,Webkit".split(","),Ze=function(t,e,i){var n=e||xe,s=n.style,o=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(ks[o]+t in s););return o<0?null:(o===3?"ms":o>=0?ks[o]:"")+t},Yn=function(){ch()&&window.document&&(Ps=window,se=Ps.document,Ke=se.documentElement,xe=qn("div")||{style:{}},qn("div"),$=Ze($),mt=$+"Origin",xe.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",ba=!!Ze("perspective"),Lr=bt.core.reverting,Dr=1)},Ts=function(t){var e=t.ownerSVGElement,i=qn("svg",e&&e.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=t.cloneNode(!0),s;n.style.display="block",i.appendChild(n),Ke.appendChild(i);try{s=n.getBBox()}catch{}return i.removeChild(n),Ke.removeChild(i),s},Ms=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},ga=function(t){var e,i;try{e=t.getBBox()}catch{e=Ts(t),i=1}return e&&(e.width||e.height)||i||(e=Ts(t)),e&&!e.width&&!e.x&&!e.y?{x:+Ms(t,["x","cx","x1"])||0,y:+Ms(t,["y","cy","y1"])||0,width:0,height:0}:e},wa=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&ga(t))},Se=function(t,e){if(e){var i=t.style,n;e in Jt&&e!==mt&&(e=$),i.removeProperty?(n=e.substr(0,2),(n==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(n==="--"?e:e.replace(Ir,"-$1").toLowerCase())):i.removeAttribute(e)}},oe=function(t,e,i,n,s,o){var a=new _t(t._pt,e,i,0,1,o?va:fa);return t._pt=a,a.b=n,a.e=s,t._props.push(i),a},Ss={deg:1,rad:1,turn:1},Ch={grid:1,flex:1},pe=function r(t,e,i,n){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=xe.style,l=hh.test(e),u=t.tagName.toLowerCase()==="svg",c=(u?"client":"offset")+(l?"Width":"Height"),h=100,d=n==="px",f=n==="%",v,p,_,m;if(n===o||!s||Ss[n]||Ss[o])return s;if(o!=="px"&&!d&&(s=r(t,e,i,"px")),m=t.getCTM&&wa(t),(f||o==="%")&&(Jt[e]||~e.indexOf("adius")))return v=m?t.getBBox()[l?"width":"height"]:t[c],J(f?s/v*h:s/100*v);if(a[l?"width":"height"]=h+(d?o:n),p=n!=="rem"&&~e.indexOf("adius")||n==="em"&&t.appendChild&&!u?t:t.parentNode,m&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===se||!p.appendChild)&&(p=se.body),_=p._gsap,_&&f&&_.width&&l&&_.time===wt.time&&!_.uncache)return J(s/_.width*h);if(f&&(e==="height"||e==="width")){var g=t.style[e];t.style[e]=h+n,v=t[c],g?t.style[e]=g:Se(t,e)}else(f||o==="%")&&!Ch[Rt(p,"display")]&&(a.position=Rt(t,"position")),p===t&&(a.position="static"),p.appendChild(xe),v=xe[c],p.removeChild(xe),a.position="absolute";return l&&f&&(_=ye(p),_.time=wt.time,_.width=p[c]),J(d?v*s/h:v&&s?h/v*s:0)},Xt=function(t,e,i,n){var s;return Dr||Yn(),e in Ut&&e!=="transform"&&(e=Ut[e],~e.indexOf(",")&&(e=e.split(",")[0])),Jt[e]&&e!=="transform"?(s=Ei(t,n),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:tn(Rt(t,mt))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=Ji[e]&&Ji[e](t,e,i)||Rt(t,e)||Io(t,e)||(e==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?pe(t,e,s,i)+i:s},Eh=function(t,e,i,n){if(!i||i==="none"){var s=Ze(e,t,1),o=s&&Rt(t,s,1);o&&o!==i?(e=s,i=o):e==="borderColor"&&(i=Rt(t,"borderTopColor"))}var a=new _t(this._pt,t.style,e,0,1,ha),l=0,u=0,c,h,d,f,v,p,_,m,g,w,x,b;if(a.b=i,a.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=Rt(t,n.substring(4,n.indexOf(")")))),n==="auto"&&(p=t.style[e],t.style[e]=n,n=Rt(t,e)||n,p?t.style[e]=p:Se(t,e)),c=[i,n],ea(c),i=c[0],n=c[1],d=i.match(Ue)||[],b=n.match(Ue)||[],b.length){for(;h=Ue.exec(n);)_=h[0],g=n.substring(l,h.index),v?v=(v+1)%5:(g.substr(-5)==="rgba("||g.substr(-5)==="hsla(")&&(v=1),_!==(p=d[u++]||"")&&(f=parseFloat(p)||0,x=p.substr((f+"").length),_.charAt(1)==="="&&(_=je(f,_)+x),m=parseFloat(_),w=_.substr((m+"").length),l=Ue.lastIndex-w.length,w||(w=w||yt.units[e]||x,l===n.length&&(n+=w,a.e+=w)),x!==w&&(f=pe(t,e,p,w)||0),a._pt={_next:a._pt,p:g||u===1?g:",",s:f,c:m-f,m:v&&v<4||e==="zIndex"?Math.round:0});a.c=l<n.length?n.substring(l,n.length):""}else a.r=e==="display"&&n==="none"?va:fa;return Vo.test(n)&&(a.e=0),this._pt=a,a},Vs={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},kh=function(t){var e=t.split(" "),i=e[0],n=e[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(t=i,i=n,n=t),e[0]=Vs[i]||i,e[1]=Vs[n]||n,e.join(" ")},Th=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,n=i.style,s=e.u,o=i._gsap,a,l,u;if(s==="all"||s===!0)n.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],Jt[a]&&(l=1,a=a==="transformOrigin"?mt:$),Se(i,a);l&&(Se(i,$),o&&(o.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",Ei(i,1),o.uncache=1,_a(n)))}},Ji={clearProps:function(t,e,i,n,s){if(s.data!=="isFromStart"){var o=t._pt=new _t(t._pt,e,i,0,0,Th);return o.u=n,o.pr=-10,o.tween=s,t._props.push(i),1}}},Ci=[1,0,0,1,0,0],xa={},ya=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},As=function(t){var e=Rt(t,$);return ya(e)?Ci:e.substr(7).match(So).map(J)},Ur=function(t,e){var i=t._gsap||ye(t),n=t.style,s=As(t),o,a,l,u;return i.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Ci:s):(s===Ci&&!t.offsetParent&&t!==Ke&&!i.svg&&(l=n.display,n.display="block",o=t.parentNode,(!o||!t.offsetParent&&!t.getBoundingClientRect().width)&&(u=1,a=t.nextElementSibling,Ke.appendChild(t)),s=As(t),l?n.display=l:Se(t,"display"),u&&(a?o.insertBefore(t,a):o?o.appendChild(t):Ke.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},$n=function(t,e,i,n,s,o){var a=t._gsap,l=s||Ur(t,!0),u=a.xOrigin||0,c=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,f=l[0],v=l[1],p=l[2],_=l[3],m=l[4],g=l[5],w=e.split(" "),x=parseFloat(w[0])||0,b=parseFloat(w[1])||0,P,y,C,E;i?l!==Ci&&(y=f*_-v*p)&&(C=x*(_/y)+b*(-p/y)+(p*g-_*m)/y,E=x*(-v/y)+b*(f/y)-(f*g-v*m)/y,x=C,b=E):(P=ga(t),x=P.x+(~w[0].indexOf("%")?x/100*P.width:x),b=P.y+(~(w[1]||w[0]).indexOf("%")?b/100*P.height:b)),n||n!==!1&&a.smooth?(m=x-u,g=b-c,a.xOffset=h+(m*f+g*p)-m,a.yOffset=d+(m*v+g*_)-g):a.xOffset=a.yOffset=0,a.xOrigin=x,a.yOrigin=b,a.smooth=!!n,a.origin=e,a.originIsAbsolute=!!i,t.style[mt]="0px 0px",o&&(oe(o,a,"xOrigin",u,x),oe(o,a,"yOrigin",c,b),oe(o,a,"xOffset",h,a.xOffset),oe(o,a,"yOffset",d,a.yOffset)),t.setAttribute("data-svg-origin",x+" "+b)},Ei=function(t,e){var i=t._gsap||new sa(t);if("x"in i&&!e&&!i.uncache)return i;var n=t.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(t),u=Rt(t,mt)||"0",c,h,d,f,v,p,_,m,g,w,x,b,P,y,C,E,k,V,M,S,D,O,T,z,tt,Nt,Ot,ei,fe,Fr,jt,ve;return c=h=d=p=_=m=g=w=x=0,f=v=1,i.svg=!!(t.getCTM&&wa(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(n[$]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[$]!=="none"?l[$]:"")),n.scale=n.rotate=n.translate="none"),y=Ur(t,i.svg),i.svg&&(i.uncache?(tt=t.getBBox(),u=i.xOrigin-tt.x+"px "+(i.yOrigin-tt.y)+"px",z=""):z=!e&&t.getAttribute("data-svg-origin"),$n(t,z||u,!!z||i.originIsAbsolute,i.smooth!==!1,y)),b=i.xOrigin||0,P=i.yOrigin||0,y!==Ci&&(V=y[0],M=y[1],S=y[2],D=y[3],c=O=y[4],h=T=y[5],y.length===6?(f=Math.sqrt(V*V+M*M),v=Math.sqrt(D*D+S*S),p=V||M?Le(M,V)*ge:0,g=S||D?Le(S,D)*ge+p:0,g&&(v*=Math.abs(Math.cos(g*Ge))),i.svg&&(c-=b-(b*V+P*S),h-=P-(b*M+P*D))):(ve=y[6],Fr=y[7],Ot=y[8],ei=y[9],fe=y[10],jt=y[11],c=y[12],h=y[13],d=y[14],C=Le(ve,fe),_=C*ge,C&&(E=Math.cos(-C),k=Math.sin(-C),z=O*E+Ot*k,tt=T*E+ei*k,Nt=ve*E+fe*k,Ot=O*-k+Ot*E,ei=T*-k+ei*E,fe=ve*-k+fe*E,jt=Fr*-k+jt*E,O=z,T=tt,ve=Nt),C=Le(-S,fe),m=C*ge,C&&(E=Math.cos(-C),k=Math.sin(-C),z=V*E-Ot*k,tt=M*E-ei*k,Nt=S*E-fe*k,jt=D*k+jt*E,V=z,M=tt,S=Nt),C=Le(M,V),p=C*ge,C&&(E=Math.cos(C),k=Math.sin(C),z=V*E+M*k,tt=O*E+T*k,M=M*E-V*k,T=T*E-O*k,V=z,O=tt),_&&Math.abs(_)+Math.abs(p)>359.9&&(_=p=0,m=180-m),f=J(Math.sqrt(V*V+M*M+S*S)),v=J(Math.sqrt(T*T+ve*ve)),C=Le(O,T),g=Math.abs(C)>2e-4?C*ge:0,x=jt?1/(jt<0?-jt:jt):0),i.svg&&(z=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!ya(Rt(t,$)),z&&t.setAttribute("transform",z))),Math.abs(g)>90&&Math.abs(g)<270&&(s?(f*=-1,g+=p<=0?180:-180,p+=p<=0?180:-180):(v*=-1,g+=g<=0?180:-180)),e=e||i.uncache,i.x=c-((i.xPercent=c&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-h)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+o,i.z=d+o,i.scaleX=J(f),i.scaleY=J(v),i.rotation=J(p)+a,i.rotationX=J(_)+a,i.rotationY=J(m)+a,i.skewX=g+a,i.skewY=w+a,i.transformPerspective=x+o,(i.zOrigin=parseFloat(u.split(" ")[2])||!e&&i.zOrigin||0)&&(n[mt]=tn(u)),i.xOffset=i.yOffset=0,i.force3D=yt.force3D,i.renderTransform=i.svg?Sh:ba?Pa:Mh,i.uncache=0,i},tn=function(t){return(t=t.split(" "))[0]+" "+t[1]},Tn=function(t,e,i){var n=at(e);return J(parseFloat(e)+parseFloat(pe(t,"x",i+"px",n)))+n},Mh=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Pa(t,e)},me="0deg",oi="0px",be=") ",Pa=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,u=i.rotation,c=i.rotationY,h=i.rotationX,d=i.skewX,f=i.skewY,v=i.scaleX,p=i.scaleY,_=i.transformPerspective,m=i.force3D,g=i.target,w=i.zOrigin,x="",b=m==="auto"&&t&&t!==1||m===!0;if(w&&(h!==me||c!==me)){var P=parseFloat(c)*Ge,y=Math.sin(P),C=Math.cos(P),E;P=parseFloat(h)*Ge,E=Math.cos(P),o=Tn(g,o,y*E*-w),a=Tn(g,a,-Math.sin(P)*-w),l=Tn(g,l,C*E*-w+w)}_!==oi&&(x+="perspective("+_+be),(n||s)&&(x+="translate("+n+"%, "+s+"%) "),(b||o!==oi||a!==oi||l!==oi)&&(x+=l!==oi||b?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+be),u!==me&&(x+="rotate("+u+be),c!==me&&(x+="rotateY("+c+be),h!==me&&(x+="rotateX("+h+be),(d!==me||f!==me)&&(x+="skew("+d+", "+f+be),(v!==1||p!==1)&&(x+="scale("+v+", "+p+be),g.style[$]=x||"translate(0, 0)"},Sh=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,u=i.skewX,c=i.skewY,h=i.scaleX,d=i.scaleY,f=i.target,v=i.xOrigin,p=i.yOrigin,_=i.xOffset,m=i.yOffset,g=i.forceCSS,w=parseFloat(o),x=parseFloat(a),b,P,y,C,E;l=parseFloat(l),u=parseFloat(u),c=parseFloat(c),c&&(c=parseFloat(c),u+=c,l+=c),l||u?(l*=Ge,u*=Ge,b=Math.cos(l)*h,P=Math.sin(l)*h,y=Math.sin(l-u)*-d,C=Math.cos(l-u)*d,u&&(c*=Ge,E=Math.tan(u-c),E=Math.sqrt(1+E*E),y*=E,C*=E,c&&(E=Math.tan(c),E=Math.sqrt(1+E*E),b*=E,P*=E)),b=J(b),P=J(P),y=J(y),C=J(C)):(b=h,C=d,P=y=0),(w&&!~(o+"").indexOf("px")||x&&!~(a+"").indexOf("px"))&&(w=pe(f,"x",o,"px"),x=pe(f,"y",a,"px")),(v||p||_||m)&&(w=J(w+v-(v*b+p*y)+_),x=J(x+p-(v*P+p*C)+m)),(n||s)&&(E=f.getBBox(),w=J(w+n/100*E.width),x=J(x+s/100*E.height)),E="matrix("+b+","+P+","+y+","+C+","+w+","+x+")",f.setAttribute("transform",E),g&&(f.style[$]=E)},Vh=function(t,e,i,n,s){var o=360,a=st(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?ge:1),u=l-n,c=n+u+"deg",h,d;return a&&(h=s.split("_")[1],h==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),h==="cw"&&u<0?u=(u+o*Es)%o-~~(u/o)*o:h==="ccw"&&u>0&&(u=(u-o*Es)%o-~~(u/o)*o)),t._pt=d=new _t(t._pt,e,i,n,u,dh),d.e=c,d.u="deg",t._props.push(i),d},Rs=function(t,e){for(var i in e)t[i]=e[i];return t},Ah=function(t,e,i){var n=Rs({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,u,c,h,d,f,v;n.svg?(u=i.getAttribute("transform"),i.setAttribute("transform",""),o[$]=e,a=Ei(i,1),Se(i,$),i.setAttribute("transform",u)):(u=getComputedStyle(i)[$],o[$]=e,a=Ei(i,1),o[$]=u);for(l in Jt)u=n[l],c=a[l],u!==c&&s.indexOf(l)<0&&(f=at(u),v=at(c),h=f!==v?pe(i,l,u,v):parseFloat(u),d=parseFloat(c),t._pt=new _t(t._pt,a,l,h,d-h,Xn),t._pt.u=v||0,t._props.push(l));Rs(a,n)};vt("padding,margin,Width,Radius",function(r,t){var e="Top",i="Right",n="Bottom",s="Left",o=(t<3?[e,i,n,s]:[e+s,e+i,n+i,n+s]).map(function(a){return t<2?r+a:"border"+a+r});Ji[t>1?"border"+r:r]=function(a,l,u,c,h){var d,f;if(arguments.length<4)return d=o.map(function(v){return Xt(a,v,u)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(c+"").split(" "),f={},o.forEach(function(v,p){return f[v]=d[p]=d[p]||d[(p-1)/2|0]}),a.init(l,f,h)}});var Ca={name:"css",register:Yn,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,s){var o=this._props,a=t.style,l=i.vars.startAt,u,c,h,d,f,v,p,_,m,g,w,x,b,P,y,C;Dr||Yn(),this.styles=this.styles||ma(t),C=this.styles.props,this.tween=i;for(p in e)if(p!=="autoRound"&&(c=e[p],!(gt[p]&&oa(p,e,i,n,t,s)))){if(f=typeof c,v=Ji[p],f==="function"&&(c=c.call(i,n,t,s),f=typeof c),f==="string"&&~c.indexOf("random(")&&(c=xi(c)),v)v(this,t,p,c,i)&&(y=1);else if(p.substr(0,2)==="--")u=(getComputedStyle(t).getPropertyValue(p)+"").trim(),c+="",ue.lastIndex=0,ue.test(u)||(_=at(u),m=at(c)),m?_!==m&&(u=pe(t,p,u,m)+m):_&&(c+=_),this.add(a,"setProperty",u,c,n,s,0,0,p),o.push(p),C.push(p,0,a[p]);else if(f!=="undefined"){if(l&&p in l?(u=typeof l[p]=="function"?l[p].call(i,n,t,s):l[p],st(u)&&~u.indexOf("random(")&&(u=xi(u)),at(u+"")||u==="auto"||(u+=yt.units[p]||at(Xt(t,p))||""),(u+"").charAt(1)==="="&&(u=Xt(t,p))):u=Xt(t,p),d=parseFloat(u),g=f==="string"&&c.charAt(1)==="="&&c.substr(0,2),g&&(c=c.substr(2)),h=parseFloat(c),p in Ut&&(p==="autoAlpha"&&(d===1&&Xt(t,"visibility")==="hidden"&&h&&(d=0),C.push("visibility",0,a.visibility),oe(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),p!=="scale"&&p!=="transform"&&(p=Ut[p],~p.indexOf(",")&&(p=p.split(",")[0]))),w=p in Jt,w){if(this.styles.save(p),f==="string"&&c.substring(0,6)==="var(--"&&(c=Rt(t,c.substring(4,c.indexOf(")"))),h=parseFloat(c)),x||(b=t._gsap,b.renderTransform&&!e.parseTransform||Ei(t,e.parseTransform),P=e.smoothOrigin!==!1&&b.smooth,x=this._pt=new _t(this._pt,a,$,0,1,b.renderTransform,b,0,-1),x.dep=1),p==="scale")this._pt=new _t(this._pt,b,"scaleY",b.scaleY,(g?je(b.scaleY,g+h):h)-b.scaleY||0,Xn),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){C.push(mt,0,a[mt]),c=kh(c),b.svg?$n(t,c,0,P,0,this):(m=parseFloat(c.split(" ")[2])||0,m!==b.zOrigin&&oe(this,b,"zOrigin",b.zOrigin,m),oe(this,a,p,tn(u),tn(c)));continue}else if(p==="svgOrigin"){$n(t,c,1,P,0,this);continue}else if(p in xa){Vh(this,b,p,d,g?je(d,g+c):c);continue}else if(p==="smoothOrigin"){oe(this,b,"smooth",b.smooth,c);continue}else if(p==="force3D"){b[p]=c;continue}else if(p==="transform"){Ah(this,c,t);continue}}else p in a||(p=Ze(p)||p);if(w||(h||h===0)&&(d||d===0)&&!ph.test(c)&&p in a)_=(u+"").substr((d+"").length),h||(h=0),m=at(c)||(p in yt.units?yt.units[p]:_),_!==m&&(d=pe(t,p,u,m)),this._pt=new _t(this._pt,w?b:a,p,d,(g?je(d,g+h):h)-d,!w&&(m==="px"||p==="zIndex")&&e.autoRound!==!1?vh:Xn),this._pt.u=m||0,_!==m&&m!=="%"&&(this._pt.b=u,this._pt.r=fh);else if(p in a)Eh.call(this,t,p,u,g?g+c:c);else if(p in t)this.add(t,p,u||t[p],g?g+c:c,n,s);else if(p!=="parseTransform"){Cr(p,c);continue}w||(p in a?C.push(p,0,a[p]):typeof t[p]=="function"?C.push(p,2,t[p]()):C.push(p,1,u||t[p])),o.push(p)}}y&&pa(this)},render:function(t,e){if(e.tween._time||!Lr())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:Xt,aliases:Ut,getSetter:function(t,e,i){var n=Ut[e];return n&&n.indexOf(",")<0&&(e=n),e in Jt&&e!==mt&&(t._gsap.x||Xt(t,"x"))?i&&Cs===i?e==="scale"?gh:bh:(Cs=i||{})&&(e==="scale"?wh:xh):t.style&&!xr(t.style[e])?_h:~e.indexOf("-")?mh:Rr(t,e)},core:{_removeProperty:Se,_getMatrix:Ur}};bt.utils.checkPrefix=Ze;bt.core.getStyleSaver=ma;(function(r,t,e,i){var n=vt(r+","+t+","+e,function(s){Jt[s]=1});vt(t,function(s){yt.units[s]="deg",xa[s]=1}),Ut[n[13]]=r+","+t,vt(i,function(s){var o=s.split(":");Ut[o[1]]=n[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");vt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){yt.units[r]="px"});bt.registerPlugin(Ca);var Ea=bt.registerPlugin(Ca)||bt;Ea.core.Tween;window.addEventListener("DOMContentLoaded",async()=>{const r=new Rh;r.init(),r.setupPane(),await r.load(),r.setupGeometry(),r.setupLocation(),r.start()},!1);class Rh{constructor(){this.resize=this.resize.bind(this),this.render=this.render.bind(this)}init(){if(this.canvas=document.getElementById("webgl-canvas"),this.gl=B.createWebGLContext(this.canvas),!this.gl.getExtension("OES_standard_derivatives")){console.log("OES_standard_derivatives is not supported");return}const t={distance:10,min:1,max:15,move:2};this.camera=new Ie(this.canvas,t),this.resize(),window.addEventListener("resize",this.resize,!1),this.gl.enable(this.gl.CULL_FACE),this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.STENCIL_TEST),this.isBackground=!0}setupPane(){const t=new dc,e={background:this.isBackground};t.addBinding(e,"background").on("change",i=>{this.isBackground=i.value})}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.framebuffer&&this.resizeFramebufferSize()}load(){return new Promise(async(t,e)=>{const i=this.gl;if(i==null){const n=new Error("not initialized");e(n)}else{this.program_sub=B.createProgramObject(i,B.createShaderObject(i,mc,i.VERTEX_SHADER),B.createShaderObject(i,_c,i.FRAGMENT_SHADER));const n=B.createShaderObject(i,vc,i.VERTEX_SHADER),s=B.createShaderObject(i,fc,i.FRAGMENT_SHADER);this.program_main=B.createProgramObject(i,n,s);const o=["./img/cube1/px.png","./img/cube1/py.png","./img/cube1/pz.png","./img/cube1/nx.png","./img/cube1/ny.png","./img/cube1/nz.png"],a=[i.TEXTURE_CUBE_MAP_POSITIVE_X,i.TEXTURE_CUBE_MAP_POSITIVE_Y,i.TEXTURE_CUBE_MAP_POSITIVE_Z,i.TEXTURE_CUBE_MAP_NEGATIVE_X,i.TEXTURE_CUBE_MAP_NEGATIVE_Y,i.TEXTURE_CUBE_MAP_NEGATIVE_Z];this.texture0=await B.createCubeTextureFromFile(i,o,a);const l=await B.loadImage("./img/displacementMap2.png");this.texture1=B.createTexture(i,l);const u=await B.loadImage("./img/displacementMap2.png");this.texture2=B.createTexture(i,u),i.bindTexture(i.TEXTURE_2D,this.texture2),this.setTextureWrapping(i.REPEAT),i.bindTexture(i.TEXTURE_2D,null),t()}})}setupGeometry(){const e=[1,1,1,1];this.planeGeometry=un.plane(20,20,e),this.planeVBO=[B.createVBO(this.gl,this.planeGeometry.position),B.createVBO(this.gl,this.planeGeometry.color),B.createVBO(this.gl,this.planeGeometry.texCoord)],this.planeIBO=B.createIBO(this.gl,this.planeGeometry.index),this.cubeGeometry=un.cube(20,e),this.cubeVBO=[B.createVBO(this.gl,this.cubeGeometry.position),B.createVBO(this.gl,this.cubeGeometry.normal),B.createVBO(this.gl,this.cubeGeometry.texCoord)],this.cubeIBO=B.createIBO(this.gl,this.cubeGeometry.index),this.cube2Geometry=un.cube(1,e),this.cube2VBO=[B.createVBO(this.gl,this.cube2Geometry.position),B.createVBO(this.gl,this.cube2Geometry.normal),B.createVBO(this.gl,this.cube2Geometry.texCoord)],this.cube2IBO=B.createIBO(this.gl,this.cube2Geometry.index)}setupLocation(){const t=this.gl;this.attributeLocation_sub=[t.getAttribLocation(this.program_sub,"position"),t.getAttribLocation(this.program_sub,"color"),t.getAttribLocation(this.program_sub,"texCoord")],this.attributeStride_sub=[3,4,2],this.uniformLocation_sub={mvpMatrix:t.getUniformLocation(this.program_sub,"mvpMatrix")},this.attributeLocation_main=[t.getAttribLocation(this.program_main,"position"),t.getAttribLocation(this.program_main,"normal"),t.getAttribLocation(this.program_main,"uv")],this.attributeStride_main=[3,3,2],this.uniformLocation_main={time:t.getUniformLocation(this.program_main,"time"),breakRatio1:t.getUniformLocation(this.program_main,"breakRatio1"),breakRatio2:t.getUniformLocation(this.program_main,"breakRatio2"),mask:t.getUniformLocation(this.program_main,"mask"),id:t.getUniformLocation(this.program_main,"id"),total:t.getUniformLocation(this.program_main,"total"),mMatrix:t.getUniformLocation(this.program_main,"mMatrix"),vpMatrix:t.getUniformLocation(this.program_main,"vpMatrix"),normalMatrix:t.getUniformLocation(this.program_main,"normalMatrix"),reflection:t.getUniformLocation(this.program_main,"reflection"),eyePosition:t.getUniformLocation(this.program_main,"eyePosition"),textureUnit0:t.getUniformLocation(this.program_main,"textureUnit0"),textureUnit1:t.getUniformLocation(this.program_main,"textureUnit1")}}setupRendering(){const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,this.canvas.width,this.canvas.height),t.clearColor(.3,.3,.3,1),t.clearDepth(1),t.clearStencil(0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_CUBE_MAP,this.texture0),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.texture1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT);const e=this.camera.update(),i=45,n=window.innerWidth/window.innerHeight,a=L.perspective(i,n,.1,45),l=L.multiply(a,e);if(t.useProgram(this.program_main),t.uniform3fv(this.uniformLocation_main.eyePosition,this.camera.position),t.uniform1i(this.uniformLocation_main.textureUnit0,0),t.uniform1i(this.uniformLocation_main.textureUnit1,1),t.uniform1f(this.uniformLocation_main.time,this.time),t.uniform1f(this.uniformLocation_main.breakRatio1,this.breakRatio.val1),t.uniform1f(this.uniformLocation_main.breakRatio2,this.breakRatio.val2),this.isBackground===!0){B.enableBuffer(t,this.cubeVBO,this.attributeLocation_main,this.attributeStride_main,this.cubeIBO),t.cullFace(t.FRONT),t.depthMask(!1),t.stencilFunc(t.ALWAYS,0,-1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE);let h=L.translate(L.identity(),W.create(0,0,Math.sin(this.time)*1));const d=L.multiply(l,h),f=L.transpose(L.inverse(h));d[12]=0,d[13]=0,d[14]=0,d[15]=1,t.uniform2fv(this.uniformLocation_main.id,[0,0]),t.uniform2fv(this.uniformLocation_main.total,[0,0]),t.uniformMatrix4fv(this.uniformLocation_main.mMatrix,!1,h),t.uniformMatrix4fv(this.uniformLocation_main.vpMatrix,!1,l),t.uniformMatrix4fv(this.uniformLocation_main.normalMatrix,!1,f),t.uniform1i(this.uniformLocation_main.reflection,!1),t.drawElements(t.TRIANGLES,this.cubeGeometry.index.length,t.UNSIGNED_SHORT,0)}if(.5<=this.breakRatio.val1){B.enableBuffer(t,this.cube2VBO,this.attributeLocation_main,this.attributeStride_main,this.cube2IBO),t.cullFace(t.BACK),t.depthMask(!0),t.stencilFunc(t.ALWAYS,1,-1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE);let h=L.identity();h=L.scale(h,W.create(1,1,.325));const d={w:15,h:15};t.colorMask(!1,!1,!1,!1),t.depthMask(!1),t.uniform1f(this.uniformLocation_main.mask,!0);for(let f=0;f<d.h;f++)for(let v=0;v<d.w;v++){L.multiply(l,h);const p=L.transpose(L.inverse(h));t.uniformMatrix4fv(this.uniformLocation_main.mMatrix,!1,h),t.uniformMatrix4fv(this.uniformLocation_main.vpMatrix,!1,l),t.uniformMatrix4fv(this.uniformLocation_main.normalMatrix,!1,p),t.uniform2fv(this.uniformLocation_main.id,[v,f]),t.uniform2fv(this.uniformLocation_main.total,[d.w,d.h]),t.uniform1i(this.uniformLocation_main.reflection,!0),t.drawElements(t.TRIANGLES,this.cube2Geometry.index.length,t.UNSIGNED_SHORT,0)}t.stencilFunc(t.EQUAL,1,-1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0),t.depthMask(!0),t.uniform1f(this.uniformLocation_main.mask,!1);for(let f=0;f<d.h;f++)for(let v=0;v<d.w;v++){L.multiply(l,h);const p=L.transpose(L.inverse(h));t.uniformMatrix4fv(this.uniformLocation_main.mMatrix,!1,h),t.uniformMatrix4fv(this.uniformLocation_main.vpMatrix,!1,l),t.uniformMatrix4fv(this.uniformLocation_main.normalMatrix,!1,p),t.uniform2fv(this.uniformLocation_main.id,[v,f]),t.uniform2fv(this.uniformLocation_main.total,[d.w,d.h]),t.uniform1i(this.uniformLocation_main.reflection,!0),t.drawElements(t.TRIANGLES,this.cube2Geometry.index.length,t.UNSIGNED_SHORT,0)}}t.stencilFunc(t.EQUAL,1,-1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.cullFace(t.BACK);const u=L.translate(L.identity(),W.create(0,0,-25)),c=L.multiply(l,u);t.useProgram(this.program_sub),t.uniformMatrix4fv(this.uniformLocation_sub.mvpMatrix,!1,c),B.enableBuffer(t,this.planeVBO,this.attributeLocation_sub,this.attributeStride_sub,this.planeIBO),t.drawElements(t.TRIANGLES,this.planeGeometry.index.length,t.UNSIGNED_SHORT,0)}start(){this.gl,this.time=0,this.startTime=Date.now(),this.isRendering=!0,this.breakRatio={val1:0,val2:0},this.render(),this.breakManager()}breakManager(){Ea.timeline({repeat:-1,repeatDelay:0}).set(this.breakRatio,{val1:0,val2:0,overwrite:!0}).to(this.breakRatio,{val1:1,duration:.065,delay:1,ease:"power4.out"}).to(this.breakRatio,{val2:1,duration:4,delay:.05,ease:"power0.inOut"})}render(){requestAnimationFrame(this.render),this.time=(Date.now()-this.startTime)*.001,this.setupRendering()}setTextureWrapping(t){const e=this.gl;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t)}}
